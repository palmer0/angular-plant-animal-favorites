"use strict";(self.webpackChunkangular_favoritos_plantas_animales=self.webpackChunkangular_favoritos_plantas_animales||[]).push([[179],{2011:(It,be,k)=>{k.d(be,{Dh:()=>_e,GT:()=>ie,cc:()=>Ce,hO:()=>je,on:()=>j,pX:()=>re,xv:()=>ce});var d=k(4650),Q=k(9260),O=k(4976);It=k.hmd(It);const se=["ngOnDestroy"],re=(Me,Re,Ve,Pe={})=>new Proxy(Me,{get:(ve,we)=>Ve.runOutsideAngular(()=>{var He;if(Me[we])return!(null===(He=Pe?.spy)||void 0===He)&&He.get&&Pe.spy.get(we,Me[we]),Me[we];if(se.indexOf(we)>-1)return()=>{};const Oe=Re.toPromise().then(rt=>{const ne=rt&&rt[we];return"function"==typeof ne?ne.bind(rt):ne&&ne.then?ne.then(Tt=>Ve.run(()=>Tt)):Ve.run(()=>ne)});return new Proxy(()=>{},{get:(rt,ne)=>Oe[ne],apply:(rt,ne,Tt)=>Oe.then(et=>{var Zt;const lt=et&&et(...Tt);return!(null===(Zt=Pe?.spy)||void 0===Zt)&&Zt.apply&&Pe.spy.apply(we,Tt,lt),lt})})})}),ie=(Me,Re)=>{Re.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(Pe=>{Object.defineProperty(Me.prototype,Pe,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,Pe))})})};class ge{constructor(Re){return Re}}const _e=new d.OlP("angularfire2.app.options"),ce=new d.OlP("angularfire2.app.name");function j(Me,Re,Ve){const ve="object"==typeof Ve&&Ve||{};ve.name=ve.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const He=Q.Z.apps.filter(Oe=>Oe&&Oe.name===ve.name)[0]||Re.runOutsideAngular(()=>Q.Z.initializeApp(Me,ve));try{JSON.stringify(Me)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${It.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(He)}const $=(Me,...Re)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Re)},W={provide:ge,useFactory:j,deps:[_e,d.R0b,[new d.FiY,ce]]};let je=(()=>{class Me{constructor(Ve){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",d.q4F.full,Ve.toString())}static initializeApp(Ve,Pe){return{ngModule:Me,providers:[{provide:_e,useValue:Ve},{provide:ce,useValue:Pe}]}}}return Me.\u0275fac=function(Ve){return new(Ve||Me)(d.LFG(d.Lbi))},Me.\u0275mod=d.oAB({type:Me}),Me.\u0275inj=d.cJS({providers:[W]}),Me})();function Ce(Me,Re,Ve,Pe,ve){const[,we,He]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===Me)||[];if(we)return function We(Me,Re){try{return Me.toString()===Re.toString()}catch{return Me===Re}}(ve,He)||(he("error",`${Re} was already initialized on the ${Ve} Firebase App with different settings.${ht?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ve,was:He})),we;{const Oe=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Me,Oe,ve]),Oe}}const ht=!!It.hot,he=(Me,...Re)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(It,be,k)=>{k.d(be,{q4:()=>ui,iC:()=>Wi,fc:()=>uh,HU:()=>Dt,vb:()=>yl,JM:()=>ml});var d=k(4650),Q=k(259),O=k(5861),se=k(6881),re=k(2090),ie=k(4859),ge=k(1877);const _e=(E,D)=>D.some(A=>E instanceof A);let ce,j;const je=new WeakMap,Ce=new WeakMap,We=new WeakMap,ht=new WeakMap,he=new WeakMap;let Ve={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Ce.get(E);if("objectStoreNames"===D)return E.objectStoreNames||We.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return He(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function we(E){return"function"==typeof E?function ve(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Oe(this),D),He(je.get(this))}:function(...D){return He(E.apply(Oe(this),D))}:function(D,...A){const N=E.call(Oe(this),D,...A);return We.set(N,D.sort?D.sort():[D]),He(N)}}(E):(E instanceof IDBTransaction&&function Re(E){if(Ce.has(E))return;const D=new Promise((A,N)=>{const H=()=>{E.removeEventListener("complete",Z),E.removeEventListener("error",te),E.removeEventListener("abort",te)},Z=()=>{A(),H()},te=()=>{N(E.error||new DOMException("AbortError","AbortError")),H()};E.addEventListener("complete",Z),E.addEventListener("error",te),E.addEventListener("abort",te)});Ce.set(E,D)}(E),_e(E,function $(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Ve):E)}function He(E){if(E instanceof IDBRequest)return function Me(E){const D=new Promise((A,N)=>{const H=()=>{E.removeEventListener("success",Z),E.removeEventListener("error",te)},Z=()=>{A(He(E.result)),H()},te=()=>{N(E.error),H()};E.addEventListener("success",Z),E.addEventListener("error",te)});return D.then(A=>{A instanceof IDBCursor&&je.set(A,E)}).catch(()=>{}),he.set(D,E),D}(E);if(ht.has(E))return ht.get(E);const D=we(E);return D!==E&&(ht.set(E,D),he.set(D,E)),D}const Oe=E=>he.get(E),Tt=["get","getKey","getAll","getAllKeys","count"],et=["put","add","delete","clear"],Zt=new Map;function lt(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Zt.get(D))return Zt.get(D);const A=D.replace(/FromIndex$/,""),N=D!==A,H=et.includes(A);if(!(A in(N?IDBIndex:IDBObjectStore).prototype)||!H&&!Tt.includes(A))return;const Z=function(){var te=(0,O.Z)(function*(ze,...Be){const at=this.transaction(ze,H?"readwrite":"readonly");let Mt=at.store;return N&&(Mt=Mt.index(Be.shift())),(yield Promise.all([Mt[A](...Be),H&&at.done]))[0]});return function(Be){return te.apply(this,arguments)}}();return Zt.set(D,Z),Z}!function Pe(E){Ve=E(Ve)}(E=>({...E,get:(D,A,N)=>lt(D,A)||E.get(D,A,N),has:(D,A)=>!!lt(D,A)||E.has(D,A)}));const de="@firebase/installations",fe="0.6.4",De=1e4,Te=`w:${fe}`,Ge="FIS_v2",Ue="https://firebaseinstallations.googleapis.com/v1",ft=36e5,Wt=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bt(E){return E instanceof re.ZR&&E.code.includes("request-failed")}function on({projectId:E}){return`${Ue}/projects/${E}/installations`}function _n(E){return{token:E.token,requestStatus:2,expiresIn:Ko(E.expiresIn),creationTime:Date.now()}}function Cn(E,D){return xr.apply(this,arguments)}function xr(){return(xr=(0,O.Z)(function*(E,D){const N=(yield D.json()).error;return Wt.create("request-failed",{requestName:E,serverCode:N.code,serverMessage:N.message,serverStatus:N.status})})).apply(this,arguments)}function $r({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Us(E){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function Ko(E){return Number(E.replace("s","000"))}function gt(){return(gt=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:A}){const N=on(E),H=$r(E),Z=D.getImmediate({optional:!0});if(Z){const at=yield Z.getHeartbeatsHeader();at&&H.append("x-firebase-client",at)}const ze={method:"POST",headers:H,body:JSON.stringify({fid:A,authVersion:Ge,appId:E.appId,sdkVersion:Te})},Be=yield Us(()=>fetch(N,ze));if(Be.ok){const at=yield Be.json();return{fid:at.fid||A,registrationStatus:2,refreshToken:at.refreshToken,authToken:_n(at.authToken)}}throw yield Cn("Create Installation",Be)})).apply(this,arguments)}function ei(E){return new Promise(D=>{setTimeout(D,E)})}const Er=/^[cdef][\w-]{21}$/,jr="";function Ji(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function rn(E){return function ac(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Er.test(A)?A:jr}catch{return jr}}function an(E){return`${E.appName}!${E.appId}`}const it=new Map;function Pt(E,D){const A=an(E);dr(A,D),function Hr(E,D){const A=function ni(){return!Mn&&"BroadcastChannel"in self&&(Mn=new BroadcastChannel("[Firebase] FID Change"),Mn.onmessage=E=>{dr(E.data.key,E.data.fid)}),Mn}();A&&A.postMessage({key:E,fid:D}),function pn(){0===it.size&&Mn&&(Mn.close(),Mn=null)}()}(A,D)}function dr(E,D){const A=it.get(E);if(A)for(const N of A)N(D)}let Mn=null;const Bs="firebase-installations-database",Qt=1,es="firebase-installations-store";let un=null;function yi(){return un||(un=function rt(E,D,{blocked:A,upgrade:N,blocking:H,terminated:Z}={}){const te=indexedDB.open(E,D),ze=He(te);return N&&te.addEventListener("upgradeneeded",Be=>{N(He(te.result),Be.oldVersion,Be.newVersion,He(te.transaction))}),A&&te.addEventListener("blocked",()=>A()),ze.then(Be=>{Z&&Be.addEventListener("close",()=>Z()),H&&Be.addEventListener("versionchange",()=>H())}).catch(()=>{}),ze}(Bs,Qt,{upgrade:(E,D)=>{0===D&&E.createObjectStore(es)}})),un}function On(E,D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(E,D){const A=an(E),H=(yield yi()).transaction(es,"readwrite"),Z=H.objectStore(es),te=yield Z.get(A);return yield Z.put(D,A),yield H.done,(!te||te.fid!==D.fid)&&Pt(E,D.fid),D})).apply(this,arguments)}function Li(E){return In.apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(E){const D=an(E),N=(yield yi()).transaction(es,"readwrite");yield N.objectStore(es).delete(D),yield N.done})).apply(this,arguments)}function Vi(E,D){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(E,D){const A=an(E),H=(yield yi()).transaction(es,"readwrite"),Z=H.objectStore(es),te=yield Z.get(A),ze=D(te);return void 0===ze?yield Z.delete(A):yield Z.put(ze,A),yield H.done,ze&&(!te||te.fid!==ze.fid)&&Pt(E,ze.fid),ze})).apply(this,arguments)}function B(E){return L.apply(this,arguments)}function L(){return L=(0,O.Z)(function*(E){let D;const A=yield Vi(E.appConfig,N=>{const H=function z(E){return bn(E||{fid:Ji(),registrationStatus:0})}(N),Z=function ye(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Wt.create("app-offline"))};const A={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},N=function X(E,D){return ke.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:N}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:St(E)}:{installationEntry:D}}(E,H);return D=Z.registrationPromise,Z.installationEntry});return A.fid===jr?{installationEntry:yield D}:{installationEntry:A,registrationPromise:D}}),L.apply(this,arguments)}function ke(){return ke=(0,O.Z)(function*(E,D){try{const A=yield function Rr(E,D){return gt.apply(this,arguments)}(E,D);return On(E.appConfig,A)}catch(A){throw bt(A)&&409===A.customData.serverCode?yield Li(E.appConfig):yield On(E.appConfig,{fid:D.fid,registrationStatus:0}),A}}),ke.apply(this,arguments)}function St(E){return en.apply(this,arguments)}function en(){return(en=(0,O.Z)(function*(E){let D=yield $n(E.appConfig);for(;1===D.registrationStatus;)yield ei(100),D=yield $n(E.appConfig);if(0===D.registrationStatus){const{installationEntry:A,registrationPromise:N}=yield B(E);return N||A}return D})).apply(this,arguments)}function $n(E){return Vi(E,D=>{if(!D)throw Wt.create("installation-not-found");return bn(D)})}function bn(E){return function dn(E){return 1===E.registrationStatus&&E.registrationTime+De<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Pr(){return(Pr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},A){const N=function Ui(E,{fid:D}){return`${on(E)}/${D}/authTokens:generate`}(E,A),H=function Mr(E,{refreshToken:D}){const A=$r(E);return A.append("Authorization",function co(E){return`${Ge} ${E}`}(D)),A}(E,A),Z=D.getImmediate({optional:!0});if(Z){const at=yield Z.getHeartbeatsHeader();at&&H.append("x-firebase-client",at)}const ze={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Te,appId:E.appId}})},Be=yield Us(()=>fetch(N,ze));if(Be.ok)return _n(yield Be.json());throw yield Cn("Generate Auth Token",Be)})).apply(this,arguments)}function ts(E){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,O.Z)(function*(E,D=!1){let A;const N=yield Vi(E.appConfig,Z=>{if(!Gt(Z))throw Wt.create("not-registered");const te=Z.authToken;if(!D&&function mt(E){return 2===E.requestStatus&&!function sn(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+ft}(E)}(te))return Z;if(1===te.requestStatus)return A=function ue(E,D){return J.apply(this,arguments)}(E,D),Z;{if(!navigator.onLine)throw Wt.create("app-offline");const ze=function tn(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(Z);return A=function pt(E,D){return Ct.apply(this,arguments)}(E,ze),ze}});return A?yield A:N.authToken}),Oa.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(E,D){let A=yield Ne(E.appConfig);for(;1===A.authToken.requestStatus;)yield ei(100),A=yield Ne(E.appConfig);const N=A.authToken;return 0===N.requestStatus?ts(E,D):N})).apply(this,arguments)}function Ne(E){return Vi(E,D=>{if(!Gt(D))throw Wt.create("not-registered");return function hr(E){return 1===E.requestStatus&&E.requestTime+De<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ct(){return Ct=(0,O.Z)(function*(E,D){try{const A=yield function Kt(E,D){return Pr.apply(this,arguments)}(E,D),N=Object.assign(Object.assign({},D),{authToken:A});return yield On(E.appConfig,N),A}catch(A){if(!bt(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const N=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield On(E.appConfig,N)}else yield Li(E.appConfig);throw A}}),Ct.apply(this,arguments)}function Gt(E){return void 0!==E&&2===E.registrationStatus}function Nu(){return(Nu=(0,O.Z)(function*(E){const D=E,{installationEntry:A,registrationPromise:N}=yield B(D);return N?N.catch(console.error):ts(D).catch(console.error),A.fid})).apply(this,arguments)}function Yo(){return Yo=(0,O.Z)(function*(E,D=!1){const A=E;return yield function _i(E){return qe.apply(this,arguments)}(A),(yield ts(A,D)).token}),Yo.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(E){const{registrationPromise:D}=yield B(E);D&&(yield D)})).apply(this,arguments)}function Bi(E){return Wt.create("missing-app-config-values",{valueName:E})}const jt="installations",ho=E=>{const D=E.getProvider("app").getImmediate(),A=function ka(E){if(!E||!E.options)throw Bi("App Configuration");if(!E.name)throw Bi("App Name");const D=["projectId","apiKey","appId"];for(const A of D)if(!E.options[A])throw Bi(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:A,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},ds=E=>{const D=E.getProvider("app").getImmediate(),A=(0,se._getProvider)(D,jt).getImmediate();return{getId:()=>function Zn(E){return Nu.apply(this,arguments)}(A),getToken:H=>function kf(E){return Yo.apply(this,arguments)}(A,H)}};(function fo(){(0,se._registerComponent)(new ie.wA(jt,ho,"PUBLIC")),(0,se._registerComponent)(new ie.wA("installations-internal",ds,"PRIVATE"))})(),(0,se.registerVersion)(de,fe),(0,se.registerVersion)(de,fe,"esm2017");const jn="@firebase/remote-config",Ir=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fs{constructor(D,A,N,H){this.client=D,this.storage=A,this.storageCache=N,this.logger=H}isCachedDataFresh(D,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const N=Date.now()-A,H=N<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${N}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${H}.`),H}fetch(D){var A=this;return(0,O.Z)(function*(){const[N,H]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(H&&A.isCachedDataFresh(D.cacheMaxAgeMillis,N))return H;D.eTag=H&&H.eTag;const Z=yield A.client.fetch(D),te=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&te.push(A.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(te),Z})()}}function Wg(E=navigator){return E.languages&&E.languages[0]||E.language}class cc{constructor(D,A,N,H,Z,te){this.firebaseInstallations=D,this.sdkVersion=A,this.namespace=N,this.projectId=H,this.apiKey=Z,this.appId=te}fetch(D){var A=this;return(0,O.Z)(function*(){const[N,H]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Be={sdk_version:A.sdkVersion,app_instance_id:N,app_instance_id_token:H,app_id:A.appId,language_code:Wg()},at={method:"POST",headers:ze,body:JSON.stringify(Be)},Mt=fetch(te,at),Rt=new Promise((_r,Zi)=>{D.signal.addEventListener(()=>{const Js=new Error("The operation was aborted.");Js.name="AbortError",Zi(Js)})});let Fr;try{yield Promise.race([Mt,Rt]),Fr=yield Mt}catch(_r){let Zi="fetch-client-network";throw"AbortError"===_r?.name&&(Zi="fetch-timeout"),Ir.create(Zi,{originalErrorMessage:_r?.message})}let mn=Fr.status;const Ft=Fr.headers.get("ETag")||void 0;let Xs,Lo;if(200===Fr.status){let _r;try{_r=yield Fr.json()}catch(Zi){throw Ir.create("fetch-client-parse",{originalErrorMessage:Zi?.message})}Xs=_r.entries,Lo=_r.state}if("INSTANCE_STATE_UNSPECIFIED"===Lo?mn=500:"NO_CHANGE"===Lo?mn=304:("NO_TEMPLATE"===Lo||"EMPTY_CONFIG"===Lo)&&(Xs={}),304!==mn&&200!==mn)throw Ir.create("fetch-status",{httpStatus:mn});return{status:mn,eTag:Ft,config:Xs}})()}}class Kg{constructor(D,A){this.client=D,this.storage=A}fetch(D){var A=this;return(0,O.Z)(function*(){const N=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(D,N)})()}attemptFetch(D,{throttleEndTimeMillis:A,backoffCount:N}){var H=this;return(0,O.Z)(function*(){yield function Zg(E,D){return new Promise((A,N)=>{const H=Math.max(D-Date.now(),0),Z=setTimeout(A,H);E.addEventListener(()=>{clearTimeout(Z),N(Ir.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,A);try{const Z=yield H.client.fetch(D);return yield H.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function Vd(E){if(!(E instanceof re.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Z))throw Z;const te={throttleEndTimeMillis:Date.now()+(0,re.$s)(N),backoffCount:N+1};return yield H.storage.setThrottleMetadata(te),H.attemptFetch(D,te)}})()}}class c_{constructor(D,A,N,H,Z){this.app=D,this._client=A,this._storageCache=N,this._storage=H,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Lu(E,D){const A=E.target.error||void 0;return Ir.create(D,{originalErrorMessage:A&&A?.message})}const Ei="app_namespace_store";class d_{constructor(D,A,N,H=function ta(){return new Promise((E,D)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=N=>{D(Lu(N,"storage-open"))},A.onsuccess=N=>{E(N.target.result)},A.onupgradeneeded=N=>{0===N.oldVersion&&N.target.result.createObjectStore(Ei,{keyPath:"compositeKey"})}}catch(A){D(Ir.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=D,this.appName=A,this.namespace=N,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var A=this;return(0,O.Z)(function*(){const N=yield A.openDbPromise;return new Promise((H,Z)=>{const ze=N.transaction([Ei],"readonly").objectStore(Ei),Be=A.createCompositeKey(D);try{const at=ze.get(Be);at.onerror=Mt=>{Z(Lu(Mt,"storage-get"))},at.onsuccess=Mt=>{const Rt=Mt.target.result;H(Rt?Rt.value:void 0)}}catch(at){Z(Ir.create("storage-get",{originalErrorMessage:at?.message}))}})})()}set(D,A){var N=this;return(0,O.Z)(function*(){const H=yield N.openDbPromise;return new Promise((Z,te)=>{const Be=H.transaction([Ei],"readwrite").objectStore(Ei),at=N.createCompositeKey(D);try{const Mt=Be.put({compositeKey:at,value:A});Mt.onerror=Rt=>{te(Lu(Rt,"storage-set"))},Mt.onsuccess=()=>{Z()}}catch(Mt){te(Ir.create("storage-set",{originalErrorMessage:Mt?.message}))}})})()}delete(D){var A=this;return(0,O.Z)(function*(){const N=yield A.openDbPromise;return new Promise((H,Z)=>{const ze=N.transaction([Ei],"readwrite").objectStore(Ei),Be=A.createCompositeKey(D);try{const at=ze.delete(Be);at.onerror=Mt=>{Z(Lu(Mt,"storage-delete"))},at.onsuccess=()=>{H()}}catch(at){Z(Ir.create("storage-delete",{originalErrorMessage:at?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Vf{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const A=D.storage.getLastFetchStatus(),N=D.storage.getLastSuccessfulFetchTimestampMillis(),H=D.storage.getActiveConfig(),Z=yield A;Z&&(D.lastFetchStatus=Z);const te=yield N;te&&(D.lastSuccessfulFetchTimestampMillis=te);const ze=yield H;ze&&(D.activeConfig=ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function dc(){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function ps(){(0,se._registerComponent)(new ie.wA("remote-config",function E(D,{instanceIdentifier:A}){const N=D.getProvider("app").getImmediate(),H=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ir.create("registration-window");if(!(0,re.hl)())throw Ir.create("indexed-db-unavailable");const{projectId:Z,apiKey:te,appId:ze}=N.options;if(!Z)throw Ir.create("registration-project-id");if(!te)throw Ir.create("registration-api-key");if(!ze)throw Ir.create("registration-app-id");const Be=new d_(ze,N.name,A=A||"firebase"),at=new Vf(Be),Mt=new ge.Yd(jn);Mt.logLevel=ge.in.ERROR;const Rt=new cc(H,se.SDK_VERSION,A,Z,te,ze),Fr=new Kg(Rt,Be),mn=new fs(Fr,Be,at,Mt),Ft=new c_(N,mn,at,Be,Mt);return function ii(E){const D=(0,re.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ft),Ft},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(jn,"0.4.4"),(0,se.registerVersion)(jn,"0.4.4","esm2017")}();const $d=(E,D)=>D.some(A=>E instanceof A);let hc,Hs;const Uu=new WeakMap,Gs=new WeakMap,zr=new WeakMap,Nr=new WeakMap,Ba=new WeakMap;let gs={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Gs.get(E);if("objectStoreNames"===D)return E.objectStoreNames||zr.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Or(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Hd(E){return"function"==typeof E?function jd(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Vu(){return Hs||(Hs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(rr(this),D),Or(Uu.get(this))}:function(...D){return Or(E.apply(rr(this),D))}:function(D,...A){const N=E.call(rr(this),D,...A);return zr.set(N,D.sort?D.sort():[D]),Or(N)}}(E):(E instanceof IDBTransaction&&function na(E){if(Gs.has(E))return;const D=new Promise((A,N)=>{const H=()=>{E.removeEventListener("complete",Z),E.removeEventListener("error",te),E.removeEventListener("abort",te)},Z=()=>{A(),H()},te=()=>{N(E.error||new DOMException("AbortError","AbortError")),H()};E.addEventListener("complete",Z),E.addEventListener("error",te),E.addEventListener("abort",te)});Gs.set(E,D)}(E),$d(E,function Uf(){return hc||(hc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,gs):E)}function Or(E){if(E instanceof IDBRequest)return function pr(E){const D=new Promise((A,N)=>{const H=()=>{E.removeEventListener("success",Z),E.removeEventListener("error",te)},Z=()=>{A(Or(E.result)),H()},te=()=>{N(E.error),H()};E.addEventListener("success",Z),E.addEventListener("error",te)});return D.then(A=>{A instanceof IDBCursor&&Uu.set(A,E)}).catch(()=>{}),Ba.set(D,E),D}(E);if(Nr.has(E))return Nr.get(E);const D=Hd(E);return D!==E&&(Nr.set(E,D),Ba.set(D,E)),D}const rr=E=>Ba.get(E);function Bu(E,D,{blocked:A,upgrade:N,blocking:H,terminated:Z}={}){const te=indexedDB.open(E,D),ze=Or(te);return N&&te.addEventListener("upgradeneeded",Be=>{N(Or(te.result),Be.oldVersion,Be.newVersion,Or(te.transaction))}),A&&te.addEventListener("blocked",()=>A()),ze.then(Be=>{Z&&Be.addEventListener("close",()=>Z()),H&&Be.addEventListener("versionchange",()=>H())}).catch(()=>{}),ze}function ms(E,{blocked:D}={}){const A=indexedDB.deleteDatabase(E);return D&&A.addEventListener("blocked",()=>D()),Or(A).then(()=>{})}const fc=["get","getKey","getAll","getAllKeys","count"],zs=["put","add","delete","clear"],ra=new Map;function $a(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(ra.get(D))return ra.get(D);const A=D.replace(/FromIndex$/,""),N=D!==A,H=zs.includes(A);if(!(A in(N?IDBIndex:IDBObjectStore).prototype)||!H&&!fc.includes(A))return;const Z=function(){var te=(0,O.Z)(function*(ze,...Be){const at=this.transaction(ze,H?"readwrite":"readonly");let Mt=at.store;return N&&(Mt=Mt.index(Be.shift())),(yield Promise.all([Mt[A](...Be),H&&at.done]))[0]});return function(Be){return te.apply(this,arguments)}}();return ra.set(D,Z),Z}!function gr(E){gs=E(gs)}(E=>({...E,get:(D,A,N)=>$a(D,A)||E.get(D,A,N),has:(D,A)=>!!$a(D,A)||E.has(D,A)}));const Nt="/firebase-messaging-sw.js",ja="/firebase-cloud-messaging-push-scope",Gd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zd="https://fcmregistrations.googleapis.com/v1",$u="google.c.a.c_id",qd="google.c.a.c_l",ju="google.c.a.ts",Yg="google.c.a.e";var le=(()=>{return(E=le||(le={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",le;var E})();function Vt(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ha(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),N=atob(A),H=new Uint8Array(N.length);for(let Z=0;Z<N.length;++Z)H[Z]=N.charCodeAt(Z);return H}const Ga="fcm_token_details_db",ir=5,mo="fcm_token_object_Store";function qr(){return qr=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(Ga))return null;let D=null;return(yield Bu(Ga,ir,{upgrade:(N=(0,O.Z)(function*(H,Z,te,ze){var Be;if(Z<2||!H.objectStoreNames.contains(mo))return;const at=ze.objectStore(mo),Mt=yield at.index("fcmSenderId").get(E);if(yield at.clear(),Mt)if(2===Z){const Rt=Mt;if(!Rt.auth||!Rt.p256dh||!Rt.endpoint)return;D={token:Rt.fcmToken,createTime:null!==(Be=Rt.createTime)&&void 0!==Be?Be:Date.now(),subscriptionOptions:{auth:Rt.auth,p256dh:Rt.p256dh,endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:"string"==typeof Rt.vapidKey?Rt.vapidKey:Vt(Rt.vapidKey)}}}else if(3===Z){const Rt=Mt;D={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:Vt(Rt.auth),p256dh:Vt(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:Vt(Rt.vapidKey)}}}else if(4===Z){const Rt=Mt;D={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:Vt(Rt.auth),p256dh:Vt(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:Vt(Rt.vapidKey)}}}}),function(Z,te,ze,Be){return N.apply(this,arguments)})})).close(),yield ms(Ga),yield ms("fcm_vapid_details_db"),yield ms("undefined"),function Zd(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var N}),qr.apply(this,arguments)}const Gu="firebase-messaging-database",Qg=1,ys="firebase-messaging-store";let za=null;function Yn(){return za||(za=Bu(Gu,Qg,{upgrade:(E,D)=>{0===D&&E.createObjectStore(ys)}})),za}function Ii(E){return is.apply(this,arguments)}function is(){return is=(0,O.Z)(function*(E){const D=zu(E),N=yield(yield Yn()).transaction(ys).objectStore(ys).get(D);if(N)return N;{const H=yield function Hu(E){return qr.apply(this,arguments)}(E.appConfig.senderId);if(H)return yield yo(E,H),H}}),is.apply(this,arguments)}function yo(E,D){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(E,D){const A=zu(E),H=(yield Yn()).transaction(ys,"readwrite");return yield H.objectStore(ys).put(D,A),yield H.done,D})).apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(E){const D=zu(E),N=(yield Yn()).transaction(ys,"readwrite");yield N.objectStore(ys).delete(D),yield N.done})).apply(this,arguments)}function zu({appConfig:E}){return E.appId}const Qn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ia(E,D){return pc.apply(this,arguments)}function pc(){return(pc=(0,O.Z)(function*(E,D){const A=yield gc(E),N=Qd(D),H={method:"POST",headers:A,body:JSON.stringify(N)};let Z;try{Z=yield(yield fetch(Wa(E.appConfig),H)).json()}catch(te){throw Qn.create("token-subscribe-failed",{errorInfo:te?.toString()})}if(Z.error)throw Qn.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw Qn.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Yd(){return(Yd=(0,O.Z)(function*(E,D){const A=yield gc(E),N=Qd(D.subscriptionOptions),H={method:"PATCH",headers:A,body:JSON.stringify(N)};let Z;try{Z=yield(yield fetch(`${Wa(E.appConfig)}/${D.token}`,H)).json()}catch(te){throw Qn.create("token-update-failed",{errorInfo:te?.toString()})}if(Z.error)throw Qn.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw Qn.create("token-update-no-token");return Z.token})).apply(this,arguments)}function Wu(E,D){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,O.Z)(function*(E,D){const N={method:"DELETE",headers:yield gc(E)};try{const Z=yield(yield fetch(`${Wa(E.appConfig)}/${D}`,N)).json();if(Z.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(H){throw Qn.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function Wa({projectId:E}){return`${zd}/projects/${E}/registrations`}function gc(E){return Za.apply(this,arguments)}function Za(){return(Za=(0,O.Z)(function*({appConfig:E,installations:D}){const A=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Qd({p256dh:E,auth:D,endpoint:A,vapidKey:N}){const H={web:{endpoint:A,auth:D,p256dh:E}};return N!==Gd&&(H.web.applicationPubKey=N),H}const Ku=6048e5;function Yu(){return Yu=(0,O.Z)(function*(E){const D=yield function jf(E,D){return Xd.apply(this,arguments)}(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:Vt(D.getKey("auth")),p256dh:Vt(D.getKey("p256dh"))},N=yield Ii(E.firebaseDependencies);if(N){if(function Jg(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(N.subscriptionOptions,A))return Date.now()>=N.createTime+Ku?function Tn(E,D){return Ka.apply(this,arguments)}(E,{token:N.token,createTime:Date.now(),subscriptionOptions:A}):N.token;try{yield Wu(E.firebaseDependencies,N.token)}catch(H){console.warn(H)}return $f(E.firebaseDependencies,A)}return $f(E.firebaseDependencies,A)}),Yu.apply(this,arguments)}function _s(){return _s=(0,O.Z)(function*(E){const D=yield Ii(E.firebaseDependencies);D&&(yield Wu(E.firebaseDependencies,D.token),yield function Kd(E){return qa.apply(this,arguments)}(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),_s.apply(this,arguments)}function Ka(){return Ka=(0,O.Z)(function*(E,D){try{const A=yield function qu(E,D){return Yd.apply(this,arguments)}(E.firebaseDependencies,D),N=Object.assign(Object.assign({},D),{token:A,createTime:Date.now()});return yield yo(E.firebaseDependencies,N),A}catch(A){throw yield function Dr(E){return _s.apply(this,arguments)}(E),A}}),Ka.apply(this,arguments)}function $f(E,D){return _o.apply(this,arguments)}function _o(){return(_o=(0,O.Z)(function*(E,D){const N={token:yield ia(E,D),createTime:Date.now(),subscriptionOptions:D};return yield yo(E,N),N.token})).apply(this,arguments)}function Xd(){return(Xd=(0,O.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ha(D)})})).apply(this,arguments)}function Qu(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function mc(E,D){if(!D.notification)return;E.notification={};const A=D.notification.title;A&&(E.notification.title=A);const N=D.notification.body;N&&(E.notification.body=N);const H=D.notification.image;H&&(E.notification.image=H);const Z=D.notification.icon;Z&&(E.notification.icon=Z)}(D,E),function yc(E,D){D.data&&(E.data=D.data)}(D,E),function Jd(E,D){var A,N,H,Z,te;if(!(D.fcmOptions||null!==(A=D.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const ze=null!==(H=null===(N=D.fcmOptions)||void 0===N?void 0:N.link)&&void 0!==H?H:null===(Z=D.notification)||void 0===Z?void 0:Z.click_action;ze&&(E.fcmOptions.link=ze);const Be=null===(te=D.fcmOptions)||void 0===te?void 0:te.analytics_label;Be&&(E.fcmOptions.analyticsLabel=Be)}(D,E),D}function sa(E,D){const A=[];for(let N=0;N<E.length;N++)A.push(E.charAt(N)),N<D.length&&A.push(D.charAt(N));return A.join("")}function vs(E){return Qn.create("missing-app-config-values",{valueName:E})}sa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class em{constructor(D,A,N){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function oa(E){if(!E||!E.options)throw vs("App Configuration Object");if(!E.name)throw vs("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const N of D)if(!A[N])throw vs(N);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:H,installations:A,analyticsProvider:N}}_delete(){return Promise.resolve()}}function Hf(E){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Nt,{scope:ja}),E.swRegistration.update().catch(()=>{})}catch(D){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Ya(){return(Ya=(0,O.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield Hf(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Gd)})).apply(this,arguments)}function aa(){return aa=(0,O.Z)(function*(E,D){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield function vo(E,D){return wo.apply(this,arguments)}(E,D?.vapidKey),yield function h_(E,D){return Ya.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function Bf(E){return Yu.apply(this,arguments)}(E)}),aa.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(E,D,A){const N=function Io(E){switch(E){case le.NOTIFICATION_CLICKED:return"notification_open";case le.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(N,{message_id:A[$u],message_name:A[qd],message_time:A[ju],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Do(){return Do=(0,O.Z)(function*(E,D){const A=D.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===le.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Qu(A)):E.onMessageHandler.next(Qu(A)));const N=A.data;(function _c(E){return"object"==typeof E&&!!E&&$u in E})(N)&&"1"===N[Yg]&&(yield function vc(E,D,A){return Eo.apply(this,arguments)}(E,A.messageType,N))}),Do.apply(this,arguments)}const qs="@firebase/messaging",Co=E=>{const D=new em(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function el(E,D){return Do.apply(this,arguments)}(D,A)),D},tl=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:N=>function Ju(E,D){return aa.apply(this,arguments)}(D,N)}};function Gf(){return nl.apply(this,arguments)}function nl(){return(nl=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Qa(){(0,se._registerComponent)(new ie.wA("messaging",Co,"PUBLIC")),(0,se._registerComponent)(new ie.wA("messaging-internal",tl,"PRIVATE")),(0,se.registerVersion)(qs,"0.12.4"),(0,se.registerVersion)(qs,"0.12.4","esm2017")}();const gn="analytics",rh="firebase_id",rl="origin",Ec=6e4,il="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sl="https://www.googletagmanager.com/gtag/js",sr=new ge.Yd("@firebase/analytics"),Hn=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ic(E){if(!E.startsWith(sl)){const D=Hn.create("invalid-gtag-resource",{gtagURL:E});return sr.warn(D.message),""}return E}function Xa(E){return Promise.all(E.map(D=>D.catch(A=>A)))}function So(){return(So=(0,O.Z)(function*(E,D,A,N,H,Z){const te=N[H];try{if(te)yield D[te];else{const Be=(yield Xa(A)).find(at=>at.measurementId===H);Be&&(yield D[Be.appId])}}catch(ze){sr.error(ze)}E("config",H,Z)})).apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(E,D,A,N,H){try{let Z=[];if(H&&H.send_to){let te=H.send_to;Array.isArray(te)||(te=[te]);const ze=yield Xa(A);for(const Be of te){const at=ze.find(Rt=>Rt.measurementId===Be),Mt=at&&D[at.appId];if(!Mt){Z=[];break}Z.push(Mt)}}0===Z.length&&(Z=Object.values(D)),yield Promise.all(Z),E("event",N,H||{})}catch(Z){sr.error(Z)}})).apply(this,arguments)}const tu=30,xo=new class Ao{constructor(D={},A=1e3){this.throttleMetadata=D,this.intervalMillis=A}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,A){this.throttleMetadata[D]=A}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Wf(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Xt(){return(Xt=(0,O.Z)(function*(E){var D;const{appId:A,apiKey:N}=E,H={method:"GET",headers:Wf(N)},Z=il.replace("{app-id}",A),te=yield fetch(Z,H);if(200!==te.status&&304!==te.status){let ze="";try{const Be=yield te.json();null!==(D=Be.error)&&void 0!==D&&D.message&&(ze=Be.error.message)}catch{}throw Hn.create("config-fetch-failed",{httpStatus:te.status,responseMessage:ze})}return te.json()})).apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(E,D=xo,A){const{appId:N,apiKey:H,measurementId:Z}=E.options;if(!N)throw Hn.create("no-app-id");if(!H){if(Z)return{measurementId:Z,appId:N};throw Hn.create("no-api-key")}const te=D.getThrottleMetadata(N)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new p_;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==A?A:Ec),Cc({appId:N,apiKey:H,measurementId:Z},te,ze,D)})).apply(this,arguments)}function Cc(E,D,A){return bc.apply(this,arguments)}function bc(){return bc=(0,O.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:A},N,H=xo){var Z;const{appId:te,measurementId:ze}=E;try{yield function f_(E,D){return new Promise((A,N)=>{const H=Math.max(D-Date.now(),0),Z=setTimeout(A,H);E.addEventListener(()=>{clearTimeout(Z),N(Hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(N,D)}catch(Be){if(ze)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${Be?.message}]`),{appId:te,measurementId:ze};throw Be}try{const Be=yield function ih(E){return Xt.apply(this,arguments)}(E);return H.deleteThrottleMetadata(te),Be}catch(Be){const at=Be;if(!function Zf(E){if(!(E instanceof re.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(at)){if(H.deleteThrottleMetadata(te),ze)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${at?.message}]`),{appId:te,measurementId:ze};throw Be}const Mt=503===Number(null===(Z=at?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,re.$s)(A,H.intervalMillis,tu):(0,re.$s)(A,H.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+Mt,backoffCount:A+1};return H.setThrottleMetadata(te,Rt),sr.debug(`Calling attemptFetch again in ${Mt} millis`),Cc(E,Rt,N,H)}}),bc.apply(this,arguments)}class p_{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Mo,Qf;function Kf(){return(Kf=(0,O.Z)(function*(E,D,A,N,H){if(H&&H.global)E("event",A,N);else{const Z=yield D;E("event",A,Object.assign(Object.assign({},N),{send_to:Z}))}})).apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(){if(!(0,re.hl)())return sr.warn(Hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(E){return sr.warn(Hn.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function ot(){return ot=(0,O.Z)(function*(E,D,A,N,H,Z,te){var ze;const Be=function tm(E){return nu.apply(this,arguments)}(E);Be.then(mn=>{A[mn.measurementId]=mn.appId,E.options.measurementId&&mn.measurementId!==E.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mn=>sr.error(mn)),D.push(Be);const at=function Wr(){return nn.apply(this,arguments)}().then(mn=>{if(mn)return N.getId()}),[Mt,Rt]=yield Promise.all([Be,at]);(function da(E){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(sl)&&A.src.includes(E))return A;return null})(Z)||function Es(E,D){const A=function Ja(E,D){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,D)),A}("firebase-js-sdk-policy",{createScriptURL:Ic}),N=document.createElement("script"),H=`${sl}?l=${E}&id=${D}`;N.src=A?A?.createScriptURL(H):H,N.async=!0,document.head.appendChild(N)}(Z,Mt.measurementId),Qf&&(H("consent","default",Qf),function Sc(E){Qf=E}(void 0)),H("js",new Date);const Fr=null!==(ze=te?.config)&&void 0!==ze?ze:{};return Fr[rl]="firebase",Fr.update=!0,null!=Rt&&(Fr[rh]=Rt),H("config",Mt.measurementId,Fr),Mo&&(H("set",Mo),function cl(E){Mo=E}(void 0)),Mt.measurementId}),ot.apply(this,arguments)}class kr{constructor(D){this.app=D}_delete(){return delete Rn[this.app.options.appId],Promise.resolve()}}let Rn={},sh=[];const iu={};let Ac,Ci,ai="dataLayer",dl="gtag",ha=!1;function Zs(E,D,A){!function ou(){const E=[];if((0,re.ru)()&&E.push("This is a browser extension environment."),(0,re.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((N,H)=>`(${H+1}) ${N}`).join(" "),A=Hn.create("invalid-analytics-context",{errorInfo:D});sr.warn(A.message)}}();const N=E.options.appId;if(!N)throw Hn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Hn.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Rn[N])throw Hn.create("already-exists",{id:N});if(!ha){!function zf(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(ai);const{wrappedGtag:Z,gtagCore:te}=function Ws(E,D,A,N,H){let Z=function(...te){window[N].push(arguments)};return window[H]&&"function"==typeof window[H]&&(Z=window[H]),window[H]=function ca(E,D,A,N){function Z(){return Z=(0,O.Z)(function*(te,...ze){try{if("event"===te){const[Be,at]=ze;yield function Dc(E,D,A,N,H){return eu.apply(this,arguments)}(E,D,A,Be,at)}else if("config"===te){const[Be,at]=ze;yield function ol(E,D,A,N,H,Z){return So.apply(this,arguments)}(E,D,A,N,Be,at)}else if("consent"===te){const[Be]=ze;E("consent","update",Be)}else if("get"===te){const[Be,at,Mt]=ze;E("get",Be,at,Mt)}else if("set"===te){const[Be]=ze;E("set",Be)}else E(te,...ze)}catch(Be){sr.error(Be)}}),Z.apply(this,arguments)}return function H(te){return Z.apply(this,arguments)}}(Z,E,D,A),{gtagCore:Z,wrappedGtag:window[H]}}(Rn,sh,iu,ai,dl);Ci=Z,Ac=te,ha=!0}return Rn[N]=function oi(E,D,A,N,H,Z,te){return ot.apply(this,arguments)}(E,sh,iu,D,Ac,ai,A),new kr(E)}function hl(){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const fa="@firebase/analytics";!function Xf(){(0,se._registerComponent)(new ie.wA(gn,(D,{options:A})=>Zs(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,se._registerComponent)(new ie.wA("analytics-internal",function E(D){try{const A=D.getProvider(gn).getImmediate();return{logEvent:(N,H,Z)=>function oh(E,D,A,N){E=(0,re.m9)(E),function g_(E,D,A,N,H){return Kf.apply(this,arguments)}(Ci,Rn[E.app.options.appId],D,A,N).catch(H=>sr.error(H))}(A,N,H,Z)}}catch(A){throw Hn.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,se.registerVersion)(fa,"0.10.0"),(0,se.registerVersion)(fa,"0.10.0","esm2017")}();var au=k(4408),Gi=k(7565);const Cr=new class lu extends Gi.v{}(class uu extends au.o{constructor(D,A){super(D,A),this.scheduler=D,this.work=A}schedule(D,A=0){return A>0?super.schedule(D,A):(this.delay=A,this.state=D,this.scheduler.flush(this),this)}execute(D,A){return A>0||this.closed?super.execute(D,A):this._execute(D,A)}requestAsyncId(D,A,N=0){return null!=N&&N>0||null==N&&this.delay>0?super.requestAsyncId(D,A,N):(D.flush(this),0)}});var Nc=k(4986),Fn=k(8505),Qs=k(5363),Oo=k(9468);const ui=new d.GfV("7.5.0"),Gn="__angularfire_symbol__analyticsIsSupportedValue",ko="__angularfire_symbol__analyticsIsSupported",Oc="__angularfire_symbol__remoteConfigIsSupportedValue",pa="__angularfire_symbol__remoteConfigIsSupported",zi="__angularfire_symbol__messagingIsSupportedValue",Is="__angularfire_symbol__messagingIsSupported";function ml(E,D,A){if(D){if(1===D.length)return D[0];const Z=D.filter(te=>te.app===A);if(1===Z.length)return Z[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[ko]||(globalThis[ko]=hl().then(E=>globalThis[Gn]=E).catch(()=>globalThis[Gn]=!1)),globalThis[Is]||(globalThis[Is]=Gf().then(E=>globalThis[zi]=E).catch(()=>globalThis[zi]=!1)),globalThis[pa]||(globalThis[pa]=dc().then(E=>globalThis[Oc]=E).catch(()=>globalThis[Oc]=!1));const yl=(E,D)=>{const A=D?[D]:(0,Q.C6)(),N=[];return A.forEach(H=>{H.container.getProvider(E).instances.forEach(te=>{N.includes(te)||N.push(te)})}),N};function Ds(){}class kc{constructor(D,A=Cr){this.zone=D,this.delegate=A}now(){return this.delegate.now()}schedule(D,A,N){const H=this.zone;return this.delegate.schedule(function(te){H.runGuarded(()=>{D.apply(this,[te])})},A,N)}}class ga{constructor(D){this.zone=D,this.task=null}call(D,A){const N=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ds,{},Ds,Ds)),A.pipe((0,Fn.b)({next:N,complete:N,error:N})).subscribe(D).add(N)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dt=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new kc(Zone.current)),this.insideAngular=A.run(()=>new kc(Zone.current,Nc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(d.LFG(d.R0b))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function qi(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function uh(E){return E.pipe((0,Qs.Q)(qi().outsideAngular))}function Wi(E){return qi(),function ch(E){return function(A){return(A=A.lift(new ga(E.ngZone))).pipe((0,Oo.R)(E.outsideAngular),(0,Qs.Q)(E.insideAngular))}}(qi())(E)}},2090:(It,be,k)=>{k.d(be,{$s:()=>Li,BH:()=>we,G6:()=>Te,L:()=>ce,LL:()=>Qe,Pz:()=>ve,Sg:()=>He,UG:()=>ne,US:()=>ie,ZB:()=>W,ZR:()=>Ot,aH:()=>Pe,b$:()=>Zt,eu:()=>Ue,hl:()=>Ge,jU:()=>Tt,m9:()=>Gr,ne:()=>an,pd:()=>Ji,r3:()=>gi,ru:()=>et,tV:()=>j,uI:()=>rt,vZ:()=>gt,w1:()=>de,xO:()=>Er,xb:()=>co,z$:()=>Oe,zI:()=>ft,zd:()=>jr});const se=function(B){const L=[];let z=0;for(let ye=0;ye<B.length;ye++){let X=B.charCodeAt(ye);X<128?L[z++]=X:X<2048?(L[z++]=X>>6|192,L[z++]=63&X|128):55296==(64512&X)&&ye+1<B.length&&56320==(64512&B.charCodeAt(ye+1))?(X=65536+((1023&X)<<10)+(1023&B.charCodeAt(++ye)),L[z++]=X>>18|240,L[z++]=X>>12&63|128,L[z++]=X>>6&63|128,L[z++]=63&X|128):(L[z++]=X>>12|224,L[z++]=X>>6&63|128,L[z++]=63&X|128)}return L},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let X=0;X<B.length;X+=3){const ke=B[X],St=X+1<B.length,en=St?B[X+1]:0,$n=X+2<B.length,bn=$n?B[X+2]:0;let Pr=(15&en)<<2|bn>>6,Ui=63&bn;$n||(Ui=64,St||(Pr=64)),ye.push(z[ke>>2],z[(3&ke)<<4|en>>4],z[Pr],z[Ui])}return ye.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(se(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let z=0,ye=0;for(;z<B.length;){const X=B[z++];if(X<128)L[ye++]=String.fromCharCode(X);else if(X>191&&X<224){const ke=B[z++];L[ye++]=String.fromCharCode((31&X)<<6|63&ke)}else if(X>239&&X<365){const $n=((7&X)<<18|(63&B[z++])<<12|(63&B[z++])<<6|63&B[z++])-65536;L[ye++]=String.fromCharCode(55296+($n>>10)),L[ye++]=String.fromCharCode(56320+(1023&$n))}else{const ke=B[z++],St=B[z++];L[ye++]=String.fromCharCode((15&X)<<12|(63&ke)<<6|63&St)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let X=0;X<B.length;){const ke=z[B.charAt(X++)],en=X<B.length?z[B.charAt(X)]:0;++X;const bn=X<B.length?z[B.charAt(X)]:64;++X;const Kt=X<B.length?z[B.charAt(X)]:64;if(++X,null==ke||null==en||null==bn||null==Kt)throw new ge;ye.push(ke<<2|en>>4),64!==bn&&(ye.push(en<<4&240|bn>>2),64!==Kt&&ye.push(bn<<6&192|Kt))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ce=function(B){return function(B){const L=se(B);return ie.encodeByteArray(L,!0)}(B).replace(/\./g,"")},j=function(B){try{return ie.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function W(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!je(z)||(B[z]=W(B[z],L[z]));return B}function je(B){return"__proto__"!==B}const Me=()=>{try{return function Ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=B&&j(B[1]);return L&&JSON.parse(L)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Pe=()=>{var B;return null===(B=Me())||void 0===B?void 0:B.config},ve=B=>{var L;return null===(L=Me())||void 0===L?void 0:L[`_${B}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,ye)=>{z?this.reject(z):this.resolve(ye),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,ye))}}}function He(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=L||"demo-project",X=B.iat||0,ke=B.sub||B.user_id;if(!ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:X,exp:X+3600,auth_time:X,sub:ke,user_id:ke,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(St)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function ne(){var B;const L=null===(B=Me())||void 0===B?void 0:B.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Tt(){return"object"==typeof self&&self.self===self}function et(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function de(){const B=Oe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Te(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){try{return"object"==typeof indexedDB}catch{return!1}}function Ue(){return new Promise((B,L)=>{try{let z=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(ye);X.onsuccess=()=>{X.result.close(),z||self.indexedDB.deleteDatabase(ye),B(!0)},X.onupgradeneeded=()=>{z=!1},X.onerror=()=>{var ke;L((null===(ke=X.error)||void 0===ke?void 0:ke.message)||"")}}catch(z){L(z)}})}function ft(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ot extends Error{constructor(L,z,ye){super(z),this.code=L,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(L,z,ye){this.service=L,this.serviceName=z,this.errors=ye}create(L,...z){const ye=z[0]||{},X=`${this.service}/${L}`,ke=this.errors[L],St=ke?function Wt(B,L){return B.replace(bt,(z,ye)=>{const X=L[ye];return null!=X?String(X):`<${ye}?>`})}(ke,ye):"Error";return new Ot(X,`${this.serviceName}: ${St} (${X}).`,ye)}}const bt=/\{\$([^}]+)}/g;function gi(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function co(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function gt(B,L){if(B===L)return!0;const z=Object.keys(B),ye=Object.keys(L);for(const X of z){if(!ye.includes(X))return!1;const ke=B[X],St=L[X];if(ei(ke)&&ei(St)){if(!gt(ke,St))return!1}else if(ke!==St)return!1}for(const X of ye)if(!z.includes(X))return!1;return!0}function ei(B){return null!==B&&"object"==typeof B}function Er(B){const L=[];for(const[z,ye]of Object.entries(B))Array.isArray(ye)?ye.forEach(X=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(X))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(ye));return L.length?"&"+L.join("&"):""}function jr(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[X,ke]=ye.split("=");L[decodeURIComponent(X)]=decodeURIComponent(ke)}}),L}function Ji(B){const L=B.indexOf("?");if(!L)return"";const z=B.indexOf("#",L);return B.substring(L,z>0?z:void 0)}function an(B,L){const z=new it(B,L);return z.subscribe.bind(z)}class it{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(ye=>{this.error(ye)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,ye){let X;if(void 0===L&&void 0===z&&void 0===ye)throw new Error("Missing Observer.");X=function mi(B,L){if("object"!=typeof B||null===B)return!1;for(const z of L)if(z in B&&"function"==typeof B[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:ye},void 0===X.next&&(X.next=ti),void 0===X.error&&(X.error=ti),void 0===X.complete&&(X.complete=ti);const ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),ke}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ti(){}const un=1e3,yi=2,On=144e5,Wn=.5;function Li(B,L=un,z=yi){const ye=L*Math.pow(z,B),X=Math.round(Wn*ye*(Math.random()-.5)*2);return Math.min(On,ye+X)}function Gr(B){return B&&B._delegate?B._delegate:B}},4731:(It,be,k)=>{var d=k(4650);let Q=null;function O(){return Q}class re{}const ie=new d.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function _e(){return(0,d.LFG)(j)}()},providedIn:"platform"}),n})();const ce=new d.OlP("Location Initialized");let j=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){$()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){$()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function W(){return new j((0,d.LFG)(ie))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let ht=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Me)},providedIn:"root"}),n})();const he=new d.OlP("appBaseHref");let Me=(()=>{class n extends ht{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+We(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+We(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge),d.LFG(he,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Re=(()=>{class n extends ht{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+We(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+We(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge),d.LFG(he,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ce(we(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function ve(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,we(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=We,n.joinWithSlash=je,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(d.LFG(ht))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Pe(){return new Ve((0,d.LFG)(ht))}()},providedIn:"root"}),n})();function we(n){return n.replace(/\/index.html$/,"")}class Kn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $s=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Kn(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),kn(m,i)}});for(let i=0,u=r.length;i<u;i++){const m=r.get(i).context;m.index=i,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{kn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function kn(n,e){n.context.$implicit=e.item}let Bi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Fa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Fa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class jt{constructor(){this.$implicit=null,this.ngIf=null}}function Fa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Ei=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Bd="server";function ps(n){return n===Bd}let Ua=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new $d((0,d.LFG)(ie),window)}),n})();class $d{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=hc(this.window.history)||hc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function hc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Jd extends re{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class _c extends Jd{static makeCurrent(){!function se(n){Q||(Q=n)}(new _c)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function oa(){return sa=sa||document.querySelector("base"),sa?sa.getAttribute("href"):null}();return null==t?null:function em(n){vs=vs||document.createElement("a"),vs.setAttribute("href",n);const e=vs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){sa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Yo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let vs,sa=null;const Hf=new d.OlP("TRANSITION_ID"),h_=[{provide:d.ip1,useFactory:function Xu(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Hf,ie,d.zs3],multi:!0}];let vo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const wo=new d.OlP("EventManagerPlugins");let Ju=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const l=i[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class aa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let vc=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let u=i.get(t)??0;return u+=r,u>0?i.set(t,u):i.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Eo=(()=>{class n extends vc{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const u=this.styleRef.get(r);u?u.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Io={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},el=/%COMP%/g,Qa=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function th(n,e){return e.flat(100).map(t=>t.replace(el,n))}function bo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ji=(()=>{class n{constructor(t,r,i,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new ws(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof rh?i.applyToHost(t):i instanceof gn&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let u=i.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case d.ifc.Emulated:u=new rh(l,m,r,this.appId,w);break;case d.ifc.ShadowDom:return new nh(l,m,t,r);default:u=new gn(l,m,r,w)}u.onDestroy=()=>i.delete(r.id),i.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ju),d.LFG(Eo),d.LFG(d.AFp),d.LFG(Qa))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ws{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Io[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(la(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(la(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Io[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Io[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bo(r)):this.eventManager.addEventListener(e,t,bo(r))}}function la(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nh extends ws{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=th(i.id,i.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gn extends ws{constructor(e,t,r,i,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=th(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class rh extends gn{constructor(e,t,r,i,u){const l=i+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function Gf(n){return"_ngcontent-%COMP%".replace(el,n)}(l),this.hostAttr=function nl(n){return"_nghost-%COMP%".replace(el,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let rl=(()=>{class n extends aa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ec=["alt","control","meta","shift"],il={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let sr=(()=>{class n extends aa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Ec.forEach(C=>{const T=r.indexOf(C);T>-1&&(r.splice(T,1),l+=C+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=i,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let i=il[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ec.forEach(l=>{l!==i&&(0,sl[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Dc=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Es(){_c.makeCurrent()},multi:!0},{provide:ie,useFactory:function ol(){return(0,d.RDi)(document),document},deps:[]}]),eu=new d.OlP(""),ca=[{provide:d.rWj,useClass:class Ya{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};i.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Ws=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function zf(){return new d.qLn},deps:[]},{provide:wo,useClass:rl,multi:!0,deps:[ie,d.R0b,d.Lbi]},{provide:wo,useClass:sr,multi:!0,deps:[ie]},{provide:ji,useClass:ji,deps:[Ju,Eo,d.AFp,Qa]},{provide:d.FYo,useExisting:ji},{provide:vc,useExisting:Eo},{provide:Eo,useClass:Eo,deps:[ie]},{provide:Ju,useClass:Ju,deps:[wo,d.R0b]},{provide:class Vu{},useClass:vo,deps:[]},[]];let da=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Hf,useExisting:d.AFp},h_]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(eu,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Ws,...ca],imports:[Ei,d.hGG]}),n})(),Wf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function xo(){return new Wf((0,d.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var nn=k(8996),oi=k(7669);function ot(...n){const e=(0,oi.yG)(n);return(0,nn.D)(n,e)}var kr=k(7579);class Rn extends kr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const iu=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ai=k(9751);const{isArray:dl}=Array,{getPrototypeOf:Ac,prototype:Ci,keys:ha}=Object;function su(n){if(1===n.length){const e=n[0];if(dl(e))return{args:e,keys:null};if(function ou(n){return n&&"object"==typeof n&&Ac(n)===Ci}(e)){const t=ha(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zs=k(4671),wt=k(4004);const{isArray:xc}=Array;function Ks(n){return(0,wt.U)(e=>function hl(n,e){return xc(e)?n(...e):n(e)}(n,e))}function Ys(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var mr=k(5403),Mc=k(9672);function Rc(...n){const e=(0,oi.yG)(n),t=(0,oi.jO)(n),{args:r,keys:i}=su(n);if(0===r.length)return(0,nn.D)([],e);const u=new ai.y(function Po(n,e,t=Zs.y){return r=>{No(e,()=>{const{length:i}=n,u=new Array(i);let l=i,m=i;for(let w=0;w<i;w++)No(e,()=>{const C=(0,nn.D)(n[w],e);let T=!1;C.subscribe((0,mr.x)(r,P=>{u[w]=P,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Ys(i,l):Zs.y));return t?u.pipe(Ks(t)):u}function No(n,e,t){n?(0,Mc.f)(t,n,e):e()}var fl=k(8189);function pl(...n){return function oh(){return(0,fl.J)(1)}()((0,nn.D)(n,(0,oi.yG)(n)))}var fa=k(8421);function ah(n){return new ai.y(e=>{(0,fa.Xf)(n()).subscribe(e)})}var Xf=k(9635),au=k(576);function uu(n,e){const t=(0,au.m)(n)?n:()=>n,r=i=>i.error(t());return new ai.y(e?i=>e.schedule(r,0,i):r)}var Gi=k(515),lu=k(727),Cr=k(4482);function Pc(){return(0,Cr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Nc extends ai.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Cr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lu.w0.EMPTY)}return e}refCount(){return Pc()(this)}}function Fn(n,e){return(0,Cr.e)((t,r)=>{let i=null,u=0,l=!1;const m=()=>l&&!i&&r.complete();t.subscribe((0,mr.x)(r,w=>{i?.unsubscribe();let C=0;const T=u++;(0,fa.Xf)(n(w,T)).subscribe(i=(0,mr.x)(r,P=>r.next(e?e(w,P,T,C++):P),()=>{i=null,m()}))},()=>{l=!0,m()}))})}function Qs(n){return n<=0?()=>Gi.E:(0,Cr.e)((e,t)=>{let r=0;e.subscribe((0,mr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Oo(...n){const e=(0,oi.yG)(n);return(0,Cr.e)((t,r)=>{(e?pl(n,t,e):pl(n,t)).subscribe(r)})}function ui(n,e){return(0,Cr.e)((t,r)=>{let i=0;t.subscribe((0,mr.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Gn=k(5577);function ko(n){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,mr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Oc(n=pa){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,mr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function pa(){return new iu}function zi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ui((i,u)=>n(i,u,r)):Zs.y,Qs(1),t?ko(e):Oc(()=>new iu))}function Is(n,e){return(0,au.m)(e)?(0,Gn.z)(n,e,1):(0,Gn.z)(n,1)}var yr=k(8505);function Fo(n){return(0,Cr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,mr.x)(t,void 0,void 0,l=>{u=(0,fa.Xf)(n(l,Fo(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function gl(n,e){return(0,Cr.e)(function Jf(n,e,t,r,i){return(u,l)=>{let m=t,w=e,C=0;u.subscribe((0,mr.x)(l,T=>{const P=C++;w=m?n(w,T,P):(m=!0,T),r&&l.next(w)},i&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function ml(n){return n<=0?()=>Gi.E:(0,Cr.e)((e,t)=>{let r=[];e.subscribe((0,mr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ui((i,u)=>n(i,u,r)):Zs.y,ml(1),t?ko(e):Oc(()=>new iu))}function ga(n){return(0,Cr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Dt="primary",qi=Symbol("RouteTitle");class _l{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bi(n){return new _l(n)}function uh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))i[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!ch(n[i],e[i]))return!1;return!0}function ch(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function dh(n){return Array.prototype.concat.apply([],n)}function hh(n){return n.length>0?n[n.length-1]:null}function D(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function A(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,nn.D)(Promise.resolve(n)):ot(n)}const N=!1,H={exact:function Be(n,e,t){if(!_r(n.segments,e.segments)||!Fr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Be(n.children[r],e.children[r],t))return!1;return!0},subset:Mt},Z={exact:function ze(n,e){return Wi(n,e)},subset:function at(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ch(n[t],e[t]))},ignored:()=>!0};function te(n,e,t){return H[t.paths](n.root,e.root,t.matrixParams)&&Z[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Mt(n,e,t){return Rt(n,e,e.segments,t)}function Rt(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!_r(i,t)||e.hasChildren()||!Fr(i,t,r))}if(n.segments.length===t.length){if(!_r(n.segments,t)||!Fr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Mt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(_r(n.segments,i)&&Fr(n.segments,i,r)&&n.children[Dt])&&Rt(n.children[Dt],e,u,r)}}function Fr(n,e,t){return e.every((r,i)=>Z[t](n[i].parameters,r.parameters))}class mn{constructor(e=new Ft([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bi(this.queryParams)),this._queryParamMap}toString(){return Lc.serialize(this)}}class Ft{constructor(e,t){this.segments=e,this.children=t,this.parent=null,D(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ep(this)}}class Xs{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bi(this.parameters)),this._parameterMap}toString(){return nm(this)}}function _r(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Js=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Fc},providedIn:"root"}),n})();class Fc{parse(e){const t=new Uc(e);return new mn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${cu(e.root,!0)}`,r=function m_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Vo(t)}=${Vo(i)}`).join("&"):`${Vo(t)}=${Vo(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function tp(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Lc=new Fc;function ep(n){return n.segments.map(e=>nm(e)).join("/")}function cu(n,e){if(!n.hasChildren())return ep(n);if(e){const t=n.children[Dt]?cu(n.children[Dt],!1):"",r=[];return D(n.children,(i,u)=>{u!==Dt&&r.push(`${u}:${cu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Zi(n,e){let t=[];return D(n.children,(r,i)=>{i===Dt&&(t=t.concat(e(r,i)))}),D(n.children,(r,i)=>{i!==Dt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Dt?[cu(n.children[Dt],!1)]:[`${i}:${cu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dt]?`${ep(n)}/${t[0]}`:`${ep(n)}/(${t.join("//")})`}}function Vc(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vo(n){return Vc(n).replace(/%3B/gi,";")}function Uo(n){return Vc(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vl(n){return decodeURIComponent(n)}function np(n){return vl(n.replace(/\+/g,"%20"))}function nm(n){return`${Uo(n.path)}${function rp(n){return Object.keys(n).map(e=>`;${Uo(e)}=${Uo(n[e])}`).join("")}(n.parameters)}`}const rm=/^[^\/()?;=#]+/;function fh(n){const e=n.match(rm);return e?e[0]:""}const mw=/^[^=?&#]+/,y_=/^[^&#]+/;class Uc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dt]=new Ft(e,t)),r}parseSegment(){const e=fh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,N);return this.capture(e),new Xs(vl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=fh(this.remaining);i&&(r=i,this.capture(r))}e[vl(t)]=vl(r)}parseQueryParam(e){const t=function du(n){const e=n.match(mw);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function im(n){const e=n.match(y_);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=np(t),u=np(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,N);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Dt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Dt]:new Ft([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,N)}}function ph(n){return n.segments.length>0?new Ft([],{[Dt]:n}):n}function ma(n){const e={};for(const r of Object.keys(n.children)){const u=ma(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function __(n){if(1===n.numberOfChildren&&n.children[Dt]){const e=n.children[Dt];return new Ft(n.segments.concat(e.segments),e.children)}return n}(new Ft(n.segments,e))}function hu(n){return n instanceof mn}const wl=!1;function sm(n,e,t,r,i){if(0===t.length)return Bo(e.root,e.root,e.root,r,i);const u=function jc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return D(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...i,{outlets:m}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&i.push(m))}),i):[...i,u]},[]);return new mh(t,e,r)}(t);return u.toRoot()?Bo(e.root,e.root,new Ft([],{}),r,i):function l(w){const C=function yh(n,e,t,r){if(n.isAbsolute)return new fu(e.root,!0,0);if(-1===r)return new fu(t,t===e.root,0);return function pu(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new d.vHH(4005,wl&&"Invalid number of '../'");i=r.segments.length}return new fu(r,!1,i-u)}(t,r+($c(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),T=C.processChildren?Cs(C.segmentGroup,C.index,u.commands):vh(C.segmentGroup,C.index,u.commands);return Bo(e.root,C.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function $c(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gh(n){return"object"==typeof n&&null!=n&&n.outlets}function Bo(n,e,t,r,i){let l,u={};r&&D(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(T=>`${T}`):`${w}`}),l=n===e?t:om(n,e,t);const m=ph(ma(l));return new mn(m,u,i)}function om(n,e,t){const r={};return D(n.children,(i,u)=>{r[u]=i===e?t:om(i,e,t)}),new Ft(n.segments,r)}class mh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$c(r[0]))throw new d.vHH(4003,wl&&"Root segment cannot have matrix parameters");const i=r.find(gh);if(i&&i!==hh(r))throw new d.vHH(4004,wl&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vh(n,e,t){if(n||(n=new Ft([],{})),0===n.segments.length&&n.hasChildren())return Cs(n,e,t);const r=function sp(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],m=t[r];if(gh(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(i>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!ap(w,C,l))return u;r+=2}else{if(!ap(w,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ft(n.segments.slice(0,r.pathIndex),{});return u.children[Dt]=new Ft(n.segments.slice(r.pathIndex),n.children),Cs(u,0,i)}return r.match&&0===i.length?new Ft(n.segments,{}):r.match&&!n.hasChildren()?Hc(n,e,t):r.match?Cs(n,0,i):Hc(n,e,t)}function Cs(n,e,t){if(0===t.length)return new Ft(n.segments,{});{const r=function _h(n){return gh(n[0])?n[0].outlets:{[Dt]:n}}(t),i={};if(!r[Dt]&&n.children[Dt]&&1===n.numberOfChildren&&0===n.children[Dt].segments.length){const u=Cs(n.children[Dt],e,t);return new Ft(n.segments,u.children)}return D(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[l]=vh(n.children[l],e,u))}),D(n.children,(u,l)=>{void 0===r[l]&&(i[l]=u)}),new Ft(n.segments,i)}}function Hc(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(gh(u)){const w=Gc(u.outlets);return new Ft(r,w)}if(0===i&&$c(t[0])){r.push(new Xs(n.segments[e].path,op(t[0]))),i++;continue}const l=gh(u)?u.outlets[Dt]:`${u}`,m=i<t.length-1?t[i+1]:null;l&&m&&$c(m)?(r.push(new Xs(l,op(m))),i+=2):(r.push(new Xs(l,{})),i++)}return new Ft(r,{})}function Gc(n){const e={};return D(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Hc(new Ft([],{}),0,t))}),e}function op(n){const e={};return D(n,(t,r)=>e[r]=`${t}`),e}function ap(n,e,t){return n==t.path&&Wi(e,t.parameters)}const zc="imperative";class eo{constructor(e,t){this.id=e,this.url=t}}class up extends eo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class os extends eo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qc extends eo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _a extends eo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Wc extends eo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class El extends eo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class w_ extends eo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E_ extends eo{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class I_ extends eo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lp extends eo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zc{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class am{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class um{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Il{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cp{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ti{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let hp=(()=>{class n{createUrlTree(t,r,i,u,l,m){return sm(t||r.root,i,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),D_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return hp.\u0275fac(e)},providedIn:"root"}),n})();class pp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=gp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=gp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Lr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Lr(e,this._root).map(t=>t.value)}}function gp(n,e){if(n===e.value)return e;for(const t of e.children){const r=gp(n,t);if(r)return r}return null}function Lr(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Lr(n,t);if(r.length)return r.unshift(e),r}return[]}class Si{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Dl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class C_ extends pp{constructor(e,t){super(e),this.snapshot=t,mu(this,e)}toString(){return this.snapshot.toString()}}function b_(n,e){const t=function T_(n,e){const l=new Eh([],{},{},"",{},Dt,e,null,n.root,-1,{});return new to("",new Si(l,[]))}(n,e),r=new Rn([new Xs("",{})]),i=new Rn({}),u=new Rn({}),l=new Rn({}),m=new Rn(""),w=new ar(r,i,l,m,u,Dt,e,t.root);return w.snapshot=t.root,new C_(new Si(w,[]),t)}class ar{constructor(e,t,r,i,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,wt.U)(C=>C[qi]))??ot(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>bi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>bi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function wh(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Eh{get title(){return this.data?.[qi]}constructor(e,t,r,i,u,l,m,w,C,T,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=T,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class to extends pp{constructor(e,t){super(t),this.url=e,mu(this,t)}toString(){return yp(this._root)}}function mu(n,e){e.value._routerState=n,e.children.forEach(t=>mu(n,t))}function yp(n){const e=n.children.length>0?` { ${n.children.map(yp).join(", ")} } `:"";return`${n.value}${e}`}function Cl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wi(e.params,t.params)||n.params.next(t.params),function lh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function bs(n,e){const t=Wi(n.params,e.params)&&function Lo(n,e){return _r(n,e)&&n.every((t,r)=>Wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||bs(n.parent,e.parent))}function bl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cm(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return bl(n,r,i);return bl(n,r)})}(n,e,t);return new Si(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>bl(n,m)),l}}const r=function dm(n){return new ar(new Rn(n.url),new Rn(n.params),new Rn(n.queryParams),new Rn(n.fragment),new Rn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>bl(n,u));return new Si(r,i)}}const hm="ngNavigationCancelingError";function y(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=hu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=f(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function f(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[hm]=!0,r.cancellationCode=e,t&&(r.url=t),r}function p(n){return v(n)&&hu(n.url)}function v(n){return n&&n[hm]}class S{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new M,this.attachRef=null}}let M=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new S,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const U=!1;let K=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(M),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,U);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,U);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,U);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,U);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new Ae(t,m,i.injector);if(r&&function $e(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(l);this.activated=i.createComponent(C,i.length,w)}else this.activated=i.createComponent(l,{index:i.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class Ae{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ar?this.route:e===M?this.childContexts:this.parent.get(e,t)}}let Je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[K],encapsulation:2}),n})();function nt(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qc(n){const e=n.children&&n.children.map(Qc),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dt&&(t.component=Je),t}function Ki(n){return n.outlet||Dt}function Ih(n,e){const t=n.filter(r=>Ki(r)===e);return t.push(...n.filter(r=>Ki(r)!==e)),t}function Tl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Dh{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Dl(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),D(i,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Dl(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Dl(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Dl(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Ti(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Il(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Cl(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const m=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Cl(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Tl(i.snapshot),w=m?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class x_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class M_{constructor(e,t){this.component=e,this.route=t}}function _p(n,e,t){const r=n._root;return Ch(r,e?e._root:null,t,[r.value])}function Xc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Ch(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Dl(e);return n.children.forEach(l=>{(function yw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function JA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_r(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_r(n.url,e.url)||!Wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bs(n,e)||!Wi(n.queryParams,e.queryParams);default:return!bs(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?i.canActivateChecks.push(new x_(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Ch(n,e,u.component?m?m.children:null:t,r,i),w&&m&&m.outlet&&m.outlet.isActivated&&i.canDeactivateChecks.push(new M_(m.outlet.component,l))}else l&&vp(e,m,i),i.canActivateChecks.push(new x_(r)),Ch(n,null,u.component?m?m.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),D(u,(l,m)=>vp(l,t.getContext(m),i)),i}function vp(n,e,t){const r=Dl(n),i=n.value;D(r,(u,l)=>{vp(u,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new M_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function bh(n){return"function"==typeof n}function _u(n){return n instanceof iu||"EmptyError"===n?.name}const gm=Symbol("INITIAL_VALUE");function Sl(){return Fn(n=>Rc(n.map(e=>e.pipe(Qs(1),Oo(gm)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===gm)return gm;if(!1===t||t instanceof mn)return t}return!0}),ui(e=>e!==gm),Qs(1)))}function L_(n){return(0,Xf.z)((0,yr.b)(e=>{if(hu(e))throw y(0,e)}),(0,wt.U)(e=>!0===e))}const V_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ew(n,e,t,r,i){const u=U_(n,e,t);return u.matched?function Th(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ot(i.map(l=>{const m=Xc(l,n);return A(function O_(n){return n&&bh(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Sl(),L_()):ot(!0)}(r=nt(e,r),e,t).pipe((0,wt.U)(l=>!0===l?u:{...V_})):ot(u)}function U_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...V_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||uh)(t,n,e);if(!i)return{...V_};const u={};D(i.posParams,(m,w)=>{u[w]=m.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Sh(n,e,t,r){if(t.length>0&&function vC(n,e,t){return t.some(r=>B_(n,e,r)&&Ki(r)!==Dt)}(n,t,r)){const u=new Ft(e,function Iw(n,e,t,r){const i={};i[Dt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ki(u)!==Dt){const l=new Ft([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ki(u)]=l}return i}(n,e,r,new Ft(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Dw(n,e,t){return t.some(r=>B_(n,e,r))}(n,t,r)){const u=new Ft(n.segments,function _C(n,e,t,r,i){const u={};for(const l of r)if(B_(n,t,l)&&!i[Ki(l)]){const m=new Ft([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[Ki(l)]=m}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new Ft(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function B_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Cw(n,e,t,r){return!!(Ki(n)===r||r!==Dt&&B_(e,t,n))&&("**"===n.path||U_(e,n,t).matched)}function Ah(n,e,t){return 0===e.length&&!n.children[t]}const _m=!1;class vu{constructor(e){this.segmentGroup=e||null}}class xh{constructor(e){this.urlTree=e}}function wp(n){return uu(new vu(n))}function $_(n){return uu(new xh(n))}class bw{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Sh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ft(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Dt).pipe((0,wt.U)(u=>this.createUrlTree(ma(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Fo(u=>{if(u instanceof xh)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof vu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Dt).pipe((0,wt.U)(i=>this.createUrlTree(ma(i),e.queryParams,e.fragment))).pipe(Fo(i=>{throw i instanceof vu?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,_m)}createUrlTree(e,t,r){const i=ph(e);return new mn(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(u=>new Ft([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,nn.D)(i).pipe(Is(u=>{const l=r.children[u],m=Ih(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,wt.U)(w=>({segment:w,outlet:u})))}),gl((u,l)=>(u[l.outlet]=l.segment,u),{}),yl())}expandSegment(e,t,r,i,u,l){return(0,nn.D)(r).pipe(Is(m=>this.expandSegmentAgainstRoute(e,t,r,m,i,u,l).pipe(Fo(C=>{if(C instanceof vu)return ot(null);throw C}))),zi(m=>!!m),Fo((m,w)=>{if(_u(m))return Ah(t,i,u)?ot(new Ft([],{})):wp(t);throw m}))}expandSegmentAgainstRoute(e,t,r,i,u,l,m){return Cw(i,t,u,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l):wp(t):wp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$_(u):this.lineralizeSegments(r,u).pipe((0,Gn.z)(l=>{const m=new Ft(l,{});return this.expandSegment(e,m,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:T}=U_(t,i,u);if(!m)return wp(t);const P=this.applyRedirectCommands(w,i.redirectTo,T);return i.redirectTo.startsWith("/")?$_(P):this.lineralizeSegments(i,P).pipe((0,Gn.z)(V=>this.expandSegment(e,t,r,V.concat(C),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=nt(r,e),r.loadChildren?(r._loadedRoutes?ot({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,wt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Ft(i,{})))):ot(new Ft(i,{}))):Ew(t,r,i,e).pipe(Fn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Gn.z)(T=>{const P=T.injector??e,V=T.routes,{segmentGroup:q,slicedSegments:oe}=Sh(t,m,w,V),Ee=new Ft(q.segments,q.children);if(0===oe.length&&Ee.hasChildren())return this.expandChildren(P,V,Ee).pipe((0,wt.U)(Xe=>new Ft(m,Xe)));if(0===V.length&&0===oe.length)return ot(new Ft(m,{}));const Ie=Ki(r)===u;return this.expandSegment(P,Ee,V,oe,Ie?Dt:u,!0).pipe((0,wt.U)(_t=>new Ft(m.concat(_t.segments),_t.children)))})):wp(t)))}getChildConfig(e,t,r){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function yC(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ot(!0):ot(i.map(l=>{const m=Xc(l,n);return A(function P_(n){return n&&bh(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Sl(),L_())}(e,t,r).pipe((0,Gn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,yr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function EC(n){return uu(f(_m,3))}())):ot({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ot(r);if(i.numberOfChildren>1||!i.children[Dt])return e.redirectTo,uu(new d.vHH(4e3,_m));i=i.children[Dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new mn(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return D(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const m=i.substring(1);r[u]=t[m]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return D(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,i)}),new Ft(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,_m);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class j_{}class Ep{constructor(e,t,r,i,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=Sh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Dt).pipe((0,wt.U)(t=>{if(null===t)return null;const r=new Eh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Si(r,t),u=new to(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=mp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,nn.D)(Object.keys(r.children)).pipe(Is(i=>{const u=r.children[i],l=Ih(t,i);return this.processSegmentGroup(e,l,u,i)}),gl((i,u)=>i&&u?(i.push(...u),i):null),function Ds(n,e=!1){return(0,Cr.e)((t,r)=>{let i=0;t.subscribe((0,mr.x)(r,u=>{const l=n(u,i++);(l||e)&&r.next(u),!l&&r.complete()}))})}(i=>null!==i),ko(null),yl(),(0,wt.U)(i=>{if(null===i)return null;const u=Sw(i);return function CC(n){n.sort((e,t)=>e.value.outlet===Dt?-1:t.value.outlet===Dt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,nn.D)(t).pipe(Is(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,u)),zi(l=>!!l),Fo(l=>{if(_u(l))return Ah(r,i,u)?ot([]):ot(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!Cw(t,r,i,u))return ot(null);let l;if("**"===t.path){const m=i.length>0?hh(i).parameters:{},w=xw(r)+i.length;l=ot({snapshot:new Eh(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(t),Ki(t),t.component??t._loadedComponent??null,t,Aw(r),w,Mw(t)),consumedSegments:[],remainingSegments:[]})}else l=Ew(r,t,i,e).pipe((0,wt.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:T})=>{if(!m)return null;const P=xw(r)+w.length;return{snapshot:new Eh(w,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(t),Ki(t),t.component??t._loadedComponent??null,t,Aw(r),P,Mw(t)),consumedSegments:w,remainingSegments:C}}));return l.pipe(Fn(m=>{if(null===m)return ot(null);const{snapshot:w,consumedSegments:C,remainingSegments:T}=m;e=t._injector??e;const P=t._loadedInjector??e,V=function bC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:q,slicedSegments:oe}=Sh(r,C,T,V.filter(Ie=>void 0===Ie.redirectTo));if(0===oe.length&&q.hasChildren())return this.processChildren(P,V,q).pipe((0,wt.U)(Ie=>null===Ie?null:[new Si(w,Ie)]));if(0===V.length&&0===oe.length)return ot([new Si(w,[])]);const Ee=Ki(t)===u;return this.processSegment(P,V,q,oe,Ee?Dt:u).pipe((0,wt.U)(Ie=>null===Ie?null:[new Si(w,Ie)]))}))}}function TC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Sw(n){const e=[],t=new Set;for(const r of n){if(!TC(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Sw(r.children);e.push(new Si(r.value,i))}return e.filter(r=>!t.has(r))}function Aw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function va(n){return n.data||{}}function Mw(n){return n.resolve||{}}function G_(n){return"string"==typeof n.title||null===n.title}function z_(n){return Fn(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,wt.U)(()=>e)):ot(e)})}const Mh=new d.OlP("ROUTES");let W_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=A(t.loadComponent()).pipe((0,wt.U)(Nw),(0,yr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),ga(()=>{this.componentLoaders.delete(t)})),i=new Nc(r,()=>new kr.x).pipe(Pc());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,wt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,T=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=dh(w.get(Mh,[],d.XFs.Self|d.XFs.Optional)));return{routes:C.map(Qc),injector:w}}),ga(()=>{this.childrenLoaders.delete(r)})),l=new Nc(u,()=>new kr.x).pipe(Pc());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return A(t()).pipe((0,wt.U)(Nw),(0,Gn.z)(r=>r instanceof d.YKP||Array.isArray(r)?ot(r):(0,nn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nw(n){return function $o(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let wm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new kr.x,this.configLoader=(0,d.f3M)(W_),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(Js),this.rootContexts=(0,d.f3M)(M),this.navigationId=0,this.afterPreactivation=()=>ot(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new am(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Zc(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Rn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ui(r=>0!==r.id),(0,wt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Fn(r=>{let i=!1,u=!1;return ot(r).pipe((0,yr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new _a(l.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Gi.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ow(l.source)&&(t.browserUrlTree=l.extractedUrl),ot(l).pipe(Fn(T=>{const P=this.transitions?.getValue();return this.events.next(new up(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),P!==this.transitions?.getValue()?Gi.E:Promise.resolve(T)}),function Tw(n,e,t,r){return Fn(i=>function IC(n,e,t,r,i){return new bw(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,wt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,yr.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function AC(n,e,t,r,i){return(0,Gn.z)(u=>function H_(n,e,t,r,i,u,l="emptyOnly"){return new Ep(n,e,t,r,i,l,u).recognize().pipe(Fn(m=>null===m?function DC(n){return new ai.y(e=>e.error(n))}(new j_):ot(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,wt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,yr.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const V=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(V,T)}t.browserUrlTree=T.urlAfterRedirects}const P=new El(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(P)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:P,source:V,restoredState:q,extras:oe}=l,Ee=new up(T,this.urlSerializer.serialize(P),V,q);this.events.next(Ee);const Ie=b_(P,this.rootComponentType).snapshot;return ot(r={...l,targetSnapshot:Ie,urlAfterRedirects:P,extras:{...oe,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new _a(l.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Gi.E}}),(0,yr.b)(l=>{const m=new w_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,wt.U)(l=>r={...l,guards:_p(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function mm(n,e){return(0,Gn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?ot({...t,guardsResult:!0}):function gC(n,e,t,r){return(0,nn.D)(n).pipe((0,Gn.z)(i=>function mC(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ot(u.map(m=>{const w=Tl(e)??i,C=Xc(m,w);return A(function fC(n){return n&&bh(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(zi())})).pipe(Sl()):ot(!0)}(i.component,i.route,t,e,r)),zi(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Gn.z)(m=>m&&function _w(n){return"boolean"==typeof n}(m)?function k_(n,e,t,r){return(0,nn.D)(e).pipe(Is(i=>pl(function Jc(n,e){return null!==n&&e&&e(new um(n)),ot(!0)}(i.route.parent,r),function ym(n,e){return null!==n&&e&&e(new cp(n)),ot(!0)}(i.route,r),function F_(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function R_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ah(()=>ot(l.guards.map(w=>{const C=Tl(l.node)??t,T=Xc(w,C);return A(function N_(n){return n&&bh(n.canActivateChild)}(T)?T.canActivateChild(r,n):C.runInContext(()=>T(r,n))).pipe(zi())})).pipe(Sl())));return ot(u).pipe(Sl())}(n,i.path,t),function ww(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ot(!0);const i=r.map(u=>ah(()=>{const l=Tl(e)??t,m=Xc(u,l);return A(function ex(n){return n&&bh(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(zi())}));return ot(i).pipe(Sl())}(n,i.route,t))),zi(i=>!0!==i,!0))}(r,u,n,e):ot(m)),(0,wt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,yr.b)(l=>{if(r.guardsResult=l.guardsResult,hu(l.guardsResult))throw y(0,l.guardsResult);const m=new E_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),ui(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),z_(l=>{if(l.guards.canActivateChecks.length)return ot(l).pipe((0,yr.b)(m=>{const w=new I_(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Fn(m=>{let w=!1;return ot(m).pipe(function tx(n,e){return(0,Gn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ot(t);let u=0;return(0,nn.D)(i).pipe(Is(l=>function nx(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!G_(i)&&(u[qi]=i.title),function Rw(n,e,t,r){const i=function rx(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ot({});const u={};return(0,nn.D)(i).pipe((0,Gn.z)(l=>function Pw(n,e,t,r){const i=Tl(e)??r,u=Xc(n,i);return A(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(zi(),(0,yr.b)(m=>{u[l]=m}))),ml(1),function kc(n){return(0,wt.U)(()=>n)}(u),Fo(l=>_u(l)?Gi.E:uu(l)))}(u,n,e,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=mp(n,t).resolve,i&&G_(i)&&(n.data[qi]=i.title),null)))}(l.route,r,n,e)),(0,yr.b)(()=>u++),ml(1),(0,Gn.z)(l=>u===i.length?ot(t):Gi.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,yr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,yr.b)(m=>{const w=new lp(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),z_(l=>{const m=w=>{const C=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,yr.b)(T=>{w.component=T}),(0,wt.U)(()=>{})));for(const T of w.children)C.push(...m(T));return C};return Rc(m(l.targetSnapshot.root)).pipe(ko(),Qs(1))}),z_(()=>this.afterPreactivation()),(0,wt.U)(l=>{const m=function yu(n,e,t){const r=bl(n,e._root,t?t._root:void 0);return new C_(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,yr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new Dh(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Qs(1),(0,yr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new os(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),ga(()=>{i||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Fo(l=>{if(u=!0,v(l)){p(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new qc(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),p(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),C={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Ow(r.source)};t.scheduleNavigation(w,zc,null,C,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new Wc(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Gi.E}))}))}cancelNavigationTransition(t,r,i){const u=new qc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ow(n){return n!==zc}let kw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Dt);return r}getResolvedTitleForRoute(t){return t.data[qi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(xC)},providedIn:"root"}),n})(),xC=(()=>{class n extends kw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(RC)},providedIn:"root"}),n})();class MC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let RC=(()=>{class n extends MC{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ut=new d.OlP("",{providedIn:"root",factory:()=>({})});let Lw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Vw)},providedIn:"root"}),n})(),Vw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NC(n){throw n}function OC(n,e,t){return e.parse("/")}const Uw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Ut,{optional:!0})||{},this.errorHandler=this.options.errorHandler||NC,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||OC,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(Lw),this.routeReuseStrategy=(0,d.f3M)(Fw),this.urlCreationStrategy=(0,d.f3M)(D_),this.titleStrategy=(0,d.f3M)(kw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=dh((0,d.f3M)(Mh,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(wm),this.urlSerializer=(0,d.f3M)(Js),this.location=(0,d.f3M)(Ve),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new mn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=b_(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),zc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const u={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const w={...i};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Qc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,C=w?this.currentUrlTree.fragment:l;let T=null;switch(m){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,T,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=hu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,zc,null,r)}navigate(t,r={skipLocationChange:!1}){return function FC(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Uw}:!1===r?{...kC}:r,hu(t))return te(this.currentUrlTree,t,i);const u=this.parseUrl(t);return te(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,C,T;return l?(m=l.resolve,w=l.reject,C=l.promise):C=new Promise((P,V)=>{m=P,w=V}),T="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wa=(()=>{class n{constructor(t,r,i,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new kr.x;const w=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=t.events.subscribe(C=>{C instanceof os&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,u=this.el.nativeElement;null!==r?i.setAttribute(u,t,r):i.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zr),d.Y36(ar),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(ht))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class Z_{}let K_=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ui(t=>t instanceof os),Is(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&i.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&i.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,nn.D)(i).pipe((0,fl.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ot(null);const u=i.pipe((0,Gn.z)(l=>null===l?ot(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,nn.D)([u,l]).pipe((0,fl.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Z_),d.LFG(W_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Cp=new d.OlP("");let $w=(()=>{class n{constructor(t,r,i,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof up?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof os&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var ro=(()=>((ro=ro||{})[ro.COMPLETE=0]="COMPLETE",ro[ro.FAILED=1]="FAILED",ro[ro.REDIRECTING=2]="REDIRECTING",ro))();const bp=!1;function ed(n,e){return{\u0275kind:n,\u0275providers:e}}const Q_=new d.OlP("",{providedIn:"root",factory:()=>!1});function Tp(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Zr),i=n.get(jw);1===n.get(Im)&&r.initialNavigation(),n.get(Hw,null,d.XFs.Optional)?.setUpPreloading(),n.get(Cp,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const jw=new d.OlP(bp?"bootstrap done indicator":"",{factory:()=>new kr.x}),Im=new d.OlP(bp?"initial navigation":"",{providedIn:"root",factory:()=>1});function BC(){let n=[];return n=bp?[{provide:d.Xts,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Zr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function dp(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ed(1,n)}const Hw=new d.OlP(bp?"router preloader":"");function $C(n){return ed(0,[{provide:Hw,useExisting:K_},{provide:Z_,useExisting:n}])}const Nh=!1,GC=new d.OlP(Nh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),X_=[Ve,{provide:Js,useClass:Fc},Zr,M,{provide:ar,useFactory:function Y_(n){return n.routerState.root},deps:[Zr]},W_,Nh?{provide:Q_,useValue:!0}:[]];function zC(){return new d.PXZ("Router",Zr)}let qC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[X_,Nh&&r?.enableTracing?BC().\u0275providers:[],{provide:Mh,multi:!0,useValue:t},{provide:GC,useFactory:qw,deps:[[Zr,new d.FiY,new d.tp0]]},{provide:Ut,useValue:r||{}},r?.useHash?{provide:ht,useClass:Re}:{provide:ht,useClass:Me},{provide:Cp,useFactory:()=>{const n=(0,d.f3M)(Ua),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Ut),r=(0,d.f3M)(wm),i=(0,d.f3M)(Js);return t.scrollOffset&&n.setOffset(t.scrollOffset),new $w(i,r,n,e,t)}},r?.preloadingStrategy?$C(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:zC},r?.initialNavigation?ZC(r):[],[{provide:Ww,useFactory:Tp},{provide:d.tb,multi:!0,useExisting:Ww}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Mh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(GC,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Je]}),n})();function qw(n){if(Nh&&n)throw new d.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ZC(n){return["disabled"===n.initialNavigation?ed(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Zr);return()=>{e.setUpLocationChangeListener()}}},{provide:Im,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ed(2,[{provide:Im,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(ce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Zr),u=e.get(jw);(function ox(n,e){n.events.pipe(ui(t=>t instanceof os||t instanceof qc||t instanceof Wc||t instanceof _a),(0,wt.U)(t=>t instanceof os||t instanceof _a?ro.COMPLETE:t instanceof qc&&(0===t.code||1===t.code)?ro.REDIRECTING:ro.FAILED),ui(t=>t!==ro.REDIRECTING),Qs(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(wm).afterPreactivation=()=>(r(!0),u.closed?ot(void 0):u),i.initialNavigation()}))}}]).\u0275providers:[]]}const Ww=new d.OlP(Nh?"Router Initializer":"");var Cm=k(4986),An=k(4976);function Ap(){return(0,Cr.e)((n,e)=>{let t,r=!1;n.subscribe((0,mr.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Zw(n,e){return n===e}var tt,li=k(2011),Tm=(k(3042),k(3942)),pe=k(5861),Ts=k(6881),kh=k(4859),Al=k(1877),zt=k(2090),KC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},io={},J_=J_||{},Ht=KC||self;function Ai(){}function Sm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Mp="closure_uid_"+(1e9*Math.random()>>>0),Yw=0;function YC(n,e,t){return n.call.apply(n.bind,arguments)}function QC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function xi(n,e,t){return(xi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YC:QC).apply(null,arguments)}function Rp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[i].apply(r,l)}}function xl(){this.s=this.s,this.o=this.o}xl.prototype.s=!1,xl.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function cx(n){Object.prototype.hasOwnProperty.call(n,Mp)&&n[Mp]||(n[Mp]=++Yw)}(this)},xl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function tv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Xw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Sm(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function Mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Mi.prototype.h=function(){this.defaultPrevented=!0};var XC=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",Ai,e),Ht.removeEventListener("test",Ai,e)}catch{}return n}();function Ss(n){return/^[\s\xa0]*$/.test(n)}var Am=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function nv(n,e){return n<e?-1:n>e?1:0}function xm(){var n=Ht.navigator;return n&&(n=n.userAgent)?n:""}function jo(n){return-1!=xm().indexOf(n)}function rv(n){return rv[" "](n),n}function Jw(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}rv[" "]=Ai;var sv,n,JC=jo("Opera"),Ml=jo("Trident")||jo("MSIE"),eE=jo("Edge"),iv=eE||Ml,Pp=jo("Gecko")&&!(-1!=xm().toLowerCase().indexOf("webkit")&&!jo("Edge"))&&!(jo("Trident")||jo("MSIE"))&&!jo("Edge"),Mm=-1!=xm().toLowerCase().indexOf("webkit")&&!jo("Edge");function Np(){var n=Ht.document;return n?n.documentMode:void 0}e:{var Op="",tE=(n=xm(),Pp?/rv:([^\);]+)(\)|;)/.exec(n):eE?/Edge\/([\d\.]+)/.exec(n):Ml?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Mm?/WebKit\/(\S+)/.exec(n):JC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(tE&&(Op=tE?tE[1]:""),Ml){var Rm=Np();if(null!=Rm&&Rm>parseFloat(Op)){sv=String(Rm);break e}}sv=Op}var nE={},wu=Ht.document&&Ml&&(Np()||parseInt(sv,10))||void 0;function Rl(n,e){if(Mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Pp){e:{try{rv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Om[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Rl.$.h.call(this)}}Kr(Rl,Mi);var Om={2:"touch",3:"pen",4:"mouse"};Rl.prototype.h=function(){Rl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Eu="closure_listenable_"+(1e6*Math.random()|0),eb=0;function iE(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++eb,this.fa=this.ia=!1}function kp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function ov(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sE(n){const e={};for(const t in n)e[t]=n[t];return e}const Fh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<Fh.length;u++)t=Fh[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function av(n){this.src=n,this.g={},this.h=0}function uv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Qw(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(kp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function lv(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}av.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=lv(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new iE(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var cv="closure_lm_"+(1e6*Math.random()|0),dv={};function aE(n,e,t,r,i){if(r&&r.once)return hv(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)aE(n,e[u],t,r,i);return null}return t=mv(t),n&&n[Eu]?n.O(e,t,xp(r)?!!r.capture:!!r,i):uE(n,e,t,!1,r,i)}function uE(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=xp(i)?!!i.capture:!!i,m=pv(n);if(m||(n[cv]=m=new av(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function tb(){const e=nb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)XC||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Fm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hv(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)hv(n,e[u],t,r,i);return null}return t=mv(t),n&&n[Eu]?n.P(e,t,xp(r)?!!r.capture:!!r,i):uE(n,e,t,!0,r,i)}function km(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)km(n,e[u],t,r,i);else r=xp(r)?!!r.capture:!!r,t=mv(t),n&&n[Eu]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=lv(u=n.g[e],t,r,i))&&(kp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=pv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=lv(e,t,r,i)),(t=-1<n?e[n]:null)&&fv(t))}function fv(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Eu])uv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Fm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pv(e))?(uv(t,n),0==t.h&&(t.src=null,e[cv]=null)):kp(n)}}}function Fm(n){return n in dv?dv[n]:dv[n]="on"+n}function nb(n,e){if(n.fa)n=!0;else{e=new Rl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&fv(n),n=t.call(r,e)}return n}function pv(n){return(n=n[cv])instanceof av?n:null}var gv="__closure_events_fn_"+(1e9*Math.random()>>>0);function mv(n){return"function"==typeof n?n:(n[gv]||(n[gv]=function(e){return n.handleEvent(e)}),n[gv])}function Yr(){xl.call(this),this.i=new av(this),this.S=this,this.J=null}function ci(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Mi(e,n);else if(e instanceof Mi)e.target=e.target||n;else{var i=e;oE(e=new Mi(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=Lm(l,r,!0,e)&&i}if(i=Lm(l=e.g=n,r,!0,e)&&i,i=Lm(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Lm(l=e.g=t[u],r,!1,e)&&i}function Lm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&uv(n.i,l),i=!1!==m.call(w,r)&&i}}return i&&!r.defaultPrevented}Kr(Yr,xl),Yr.prototype[Eu]=!0,Yr.prototype.removeEventListener=function(n,e,t,r){km(this,n,e,t,r)},Yr.prototype.N=function(){if(Yr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kp(t[r]);delete n.g[e],n.h--}}this.J=null},Yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Yr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Vm=Ht.JSON.stringify;function lE(){var n=dE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var yv,ib=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new cE,n=>n.reset());class cE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dx(n){Ht.setTimeout(()=>{throw n},0)}function Fp(n,e){yv||function sb(){var n=Ht.Promise.resolve(void 0);yv=function(){n.then(Ea)}}(),Lp||(yv(),Lp=!0),dE.add(n,e)}var Lp=!1,dE=new class rb{constructor(){this.h=this.g=null}add(e,t){const r=ib.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ea(){for(var n;n=lE();){try{n.h.call(n.g)}catch(t){dx(t)}var e=ib;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Lp=!1}function Pl(n,e){Yr.call(this),this.h=n||1,this.g=e||Ht,this.j=xi(this.qb,this),this.l=Date.now()}function Qr(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Iu(n,e,t){if("function"==typeof n)t&&(n=xi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=xi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ht.setTimeout(n,e||0)}function Vp(n){n.g=Iu(()=>{n.g=null,n.i&&(n.i=!1,Vp(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kr(Pl,Yr),(tt=Pl.prototype).ga=!1,tt.T=null,tt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ci(this,"tick"),this.ga&&(Qr(this),this.start()))}},tt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.N=function(){Pl.$.N.call(this),Qr(this),delete this.g};class so extends xl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Vp(this)}N(){super.N(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function td(n){xl.call(this),this.h=n,this.g={}}Kr(td,xl);var nd=[];function rd(n,e,t,r){Array.isArray(t)||(t&&(nd[0]=t.toString()),t=nd);for(var i=0;i<t.length;i++){var u=aE(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function id(n){ov(n.g,function(e,t){this.g.hasOwnProperty(t)&&fv(e)},n),n.g={}}function Du(){this.g=!0}function Ho(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Bh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return Vm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}td.prototype.N=function(){td.$.N.call(this),id(this)},td.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Du.prototype.Ea=function(){this.g=!1},Du.prototype.info=function(){};var Nl={},_v=null;function Up(){return _v=_v||new Yr}function vv(n){Mi.call(this,Nl.Ta,n)}function $h(n){const e=Up();ci(e,new vv(e))}function wv(n,e){Mi.call(this,Nl.STAT_EVENT,n),this.stat=e}function Ri(n){const e=Up();ci(e,new wv(e,n))}function Ev(n,e){Mi.call(this,Nl.Ua,n),this.size=e}function jh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},e)}Nl.Ta="serverreachability",Kr(vv,Mi),Nl.STAT_EVENT="statevent",Kr(wv,Mi),Nl.Ua="timingevent",Kr(Ev,Mi);var Um={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Bm(){}function pE(){}Bm.prototype.h=null;var Hh,sd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Bp(){Mi.call(this,"d")}function Iv(){Mi.call(this,"c")}function od(){}function ad(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new td(this),this.P=Dv,this.V=new Pl(n=iv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new gE}function gE(){this.i=null,this.g="",this.h=!1}Kr(Bp,Mi),Kr(Iv,Mi),Kr(od,Bm),od.prototype.g=function(){return new XMLHttpRequest},od.prototype.i=function(){return{}},Hh=new od;var Dv=45e3,$p={},jp={};function $m(n,e,t){n.L=1,n.v=qp(Ia(e)),n.s=t,n.S=!0,jm(n,null)}function jm(n,e){n.G=Date.now(),Gh(n),n.A=Ia(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),vE(t.i,"t",r),n.C=0,t=n.l.I,n.h=new gE,n.g=kE(n.l,t?e:null,!n.s),0<n.O&&(n.M=new so(xi(n.Pa,n,n.g),n.O)),rd(n.U,n.g,"readystatechange",n.nb),e=n.I?sE(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),$h(),function Lh(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var T=C[0];C=C[1];var P=T.split("_");l=2<=P.length&&"type"==P[1]?l+(T+"=")+C+"&":l+(T+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Cv(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function bv(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Tv(n,t),i==jp){4==e&&(n.o=4,Ri(14),r=!1),Ho(n.j,n.m,null,"[Incomplete Response]");break}if(i==$p){n.o=4,Ri(15),Ho(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ho(n.j,n.m,i,null),Hm(n,i)}Cv(n)&&i!=jp&&i!=$p&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ri(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ty(e),e.L=!0,Ri(11))):(Ho(n.j,n.m,t,"[Invalid Chunked Response]"),Ol(n),zh(n))}function Tv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?jp:(t=Number(e.substring(t,r)),isNaN(t)?$p:(r+=1)+t>e.length?jp:(e=e.substr(r,t),n.C=r+t,e))}function Gh(n){n.Y=Date.now()+n.P,mE(n,n.P)}function mE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jh(xi(n.lb,n),e)}function Hp(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function zh(n){0==n.l.H||n.J||Bv(n.l,n)}function Ol(n){Hp(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,Qr(n.V),id(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function Hm(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||qm(t.h,n)))if(!n.K&&qm(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Qp(t),ld(t)}ey(t),Ri(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=jh(xi(t.ib,t),6e3));if(1>=DE(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else cd(t,11)}else if((n.K||t.g==n)&&Qp(t),!Ss(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let C=i[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.J=C[1],t.oa=C[2];const T=C[3];null!=T&&(t.qa=T,t.j.info("VER="+t.qa));const P=C[4];null!=P&&(t.Ga=P,t.j.info("SVER="+t.Ga));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const oe=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.h;u.g||-1==oe.indexOf("spdy")&&-1==oe.indexOf("quic")&&-1==oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Mv(u,u.h),u.h=null))}if(r.F){const Ee=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Ee&&(r.Da=Ee,Ln(r.G,r.F,Ee))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=OE(r,r.I?r.oa:null,r.Y),l.K){Rv(r.h,l);var m=l,w=r.K;w&&m.setTimeout(w),m.B&&(Hp(m),Gh(m)),r.g=l}else Vv(r);0<t.i.length&&Yp(t)}else"stop"!=C[0]&&"close"!=C[0]||cd(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?cd(t,7):Xm(t):"noop"!=C[0]&&t.l&&t.l.Aa(C),t.A=0)}$h()}catch{}}function yE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Sm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ab(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Sm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ob(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Sm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(tt=ad.prototype).setTimeout=function(n){this.P=n},tt.nb=function(n){n=n.target;const e=this.M;e&&3==As(n)?e.l():this.Pa(n)},tt.Pa=function(n){try{if(n==this.g)e:{const T=As(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||iv||this.g&&(this.h.h||this.g.ja()||ME(this.g)))){this.J||4!=T||7==e||$h(),Hp(this);var t=this.g.da();this.aa=t;t:if(Cv(this)){var r=ME(this.g);n="";var i=r.length,u=4==As(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ol(this),zh(this);var l="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Vh(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ss(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Ri(12),Ol(this),zh(this);break e}Ho(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hm(this,t)}this.S?(bv(this,T,l),iv&&this.i&&3==T&&(rd(this.U,this.V,"tick",this.mb),this.V.start())):(Ho(this.j,this.m,l,null),Hm(this,l)),4==T&&Ol(this),this.i&&!this.J&&(4==T?Bv(this.l,this):(this.i=!1,Gh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ri(12)):(this.o=0,Ri(13)),Ol(this),zh(this)}}}catch{}},tt.mb=function(){if(this.g){var n=As(this.g),e=this.g.ja();this.C<e.length&&(Hp(this),bv(this,n,e),this.i&&4!=n&&Gh(this))}},tt.cancel=function(){this.J=!0,Ol(this)},tt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Uh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($h(),Ri(17)),Ol(this),this.o=2,zh(this)):mE(this,this.Y-n)};var Gm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof kl){this.h=void 0!==e?e:n.h,Gp(this,n.j),this.s=n.s,this.g=n.g,zp(this,n.m),this.l=n.l,e=n.i;var t=new Wp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Sv(this,t),this.o=n.o}else n&&(t=String(n).match(Gm))?(this.h=!!e,Gp(this,t[1]||"",!0),this.s=qh(t[2]||""),this.g=qh(t[3]||"",!0),zp(this,t[4]),this.l=qh(t[5]||"",!0),Sv(this,t[6]||"",!0),this.o=qh(t[7]||"")):(this.h=!!e,this.i=new Wp(null,this.h))}function Ia(n){return new kl(n)}function Gp(n,e,t){n.j=t?qh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Sv(n,e,t){e instanceof Wp?(n.i=e,function wE(n,e){e&&!n.j&&(Da(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(lb(this,r),vE(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Fl(e,ud)),n.i=new Wp(e,n.h))}function Ln(n,e,t){n.i.set(e,t)}function qp(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ll),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ll(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fl(e,_E,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fl(e,_E,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fl(t,"/"==t.charAt(0)?Av:ub,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fl(t,xv)),n.join("")};var _E=/[#\/\?@]/g,ub=/[#\?:]/g,Av=/[#\?]/g,ud=/[#\?@]/g,xv=/#/g;function Wp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Da(n){n.g||(n.g=new Map,n.h=0,n.i&&function zm(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lb(n,e){Da(n),e=Wh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cb(n,e){return Da(n),e=Wh(n,e),n.g.has(e)}function vE(n,e,t){lb(n,e),0<t.length&&(n.i=null,n.g.set(Wh(n,e),tv(t)),n.h+=t.length)}function Wh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function br(n){this.l=n||EE,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ka&&Ht.g.Ka()&&Ht.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=Wp.prototype).add=function(n,e){Da(this),this.i=null,n=Wh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Da(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},tt.sa=function(){Da(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},tt.Z=function(n){Da(this);let e=[];if("string"==typeof n)cb(this,n)&&(e=e.concat(this.g.get(Wh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},tt.set=function(n,e){return Da(this),this.i=null,cb(this,n=Wh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var EE=10;function IE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DE(n){return n.h?1:n.g?n.g.size:0}function qm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mv(n,e){n.g?n.g.add(e):n.h=e}function Rv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Pv(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return tv(n.i)}function Vl(){}function hb(){this.g=new Vl}function fb(n,e,t){const r=t||"";try{yE(n,function(i,u){let l=i;xp(i)&&(l=Vm(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Zh(n){this.l=n.fc||null,this.j=n.ob||!1}function Nv(n,e){Yr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Zm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}br.prototype.cancel=function(){if(this.i=Pv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Vl.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},Vl.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},Kr(Zh,Bm),Zh.prototype.g=function(){return new Nv(this.l,this.j)},Zh.prototype.i=function(n){return function(){return n}}({}),Kr(Nv,Yr);var Zm=0;function Km(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function as(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zp(n)}function Zp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Nv.prototype).open=function(n,e){if(this.readyState!=Zm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zp(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ht).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,as(this)),this.readyState=Zm},tt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zp(this)),this.g&&(this.readyState=3,Zp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ht.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Km(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},tt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?as(this):Zp(this),3==this.readyState&&Km(this)}},tt.Za=function(n){this.g&&(this.response=this.responseText=n,as(this))},tt.Ya=function(n){this.g&&(this.response=n,as(this))},tt.ka=function(){this.g&&as(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Nv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pb=Ht.JSON.parse;function yn(n){Yr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=oo,this.L=this.M=!1}Kr(yn,Yr);var oo="",Go=/^https?$/i,bE=["POST","PUT"];function SE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,AE(n),Ym(n)}function AE(n){n.F||(n.F=!0,ci(n,"complete"),ci(n,"error"))}function xE(n){if(n.h&&typeof J_<"u"&&(!n.C[1]||4!=As(n)||2!=n.da()))if(n.v&&4==As(n))Iu(n.La,0,n);else if(ci(n,"readystatechange"),4==As(n)){n.h=!1;try{const m=n.da();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var i=String(n.I).match(Gm)[1]||null;if(!i&&Ht.self&&Ht.self.location){var u=Ht.self.location.protocol;i=u.substr(0,u.length-1)}r=!Go.test(i?i.toLowerCase():"")}t=r}if(t)ci(n,"complete"),ci(n,"success");else{n.m=6;try{var l=2<As(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",AE(n)}}finally{Ym(n)}}}function Ym(n,e){if(n.g){Qm(n);const t=n.g,r=n.C[0]?Ai:null;n.g=null,n.C=null,e||ci(n,"ready");try{t.onreadystatechange=r}catch{}}}function Qm(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function As(n){return n.g?n.g.readyState:0}function ME(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case oo:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Ov(n){let e="";return ov(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function kv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Ov(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function Kp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Fv(n){this.Ga=0,this.i=[],this.j=new Du,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Kp("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Kp("baseRetryDelayMs",5e3,n),this.hb=Kp("retryDelaySeedMs",1e4,n),this.eb=Kp("forwardChannelMaxRetries",2,n),this.xa=Kp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new br(n&&n.concurrentRequestLimit),this.Ja=new hb,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Xm(n){if(RE(n),3==n.H){var e=n.W++,t=Ia(n.G);Ln(t,"SID",n.J),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),Ul(n,t),(e=new ad(n,n.j,e,void 0)).L=2,e.v=qp(Ia(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(t=Ht.navigator.sendBeacon(e.v.toString(),"")),!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=kE(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Gh(e)}NE(n)}function ld(n){n.g&&(ty(n),n.g.cancel(),n.g=null)}function RE(n){ld(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),Qp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function Yp(n){IE(n.h)||n.m||(n.m=!0,Fp(n.Na,n),n.C=0)}function Jm(n,e){var t;t=e?e.m:n.W++;const r=Ia(n.G);Ln(r,"SID",n.J),Ln(r,"RID",t),Ln(r,"AID",n.V),Ul(n,r),n.o&&n.s&&kv(r,n.o,n.s),t=new ad(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=Lv(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Mv(n.h,t),$m(t,r,e)}function Ul(n,e){n.ma&&ov(n.ma,function(t,r){Ln(e,r,t)}),n.l&&yE({},function(t,r){Ln(e,r,t)})}function Lv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?xi(n.l.Va,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=i[w].h;const T=i[w].g;if(C-=u,0>C)u=Math.max(0,i[w].h-100),m=!1;else try{fb(T,l,"req"+C+"_")}catch{r&&r(T)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function Vv(n){n.g||n.u||(n.ba=1,Fp(n.Ma,n),n.A=0)}function ey(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=jh(xi(n.Ma,n),$v(n,n.A)),n.A++,0))}function ty(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function Uv(n){n.g=new ad(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ia(n.wa);Ln(e,"RID","rpc"),Ln(e,"SID",n.J),Ln(e,"CI",n.M?"0":"1"),Ln(e,"AID",n.V),Ln(e,"TYPE","xmlhttp"),Ul(n,e),n.o&&n.s&&kv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=qp(Ia(e)),t.s=null,t.S=!0,jm(t,n)}function Qp(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function Bv(n,e){var t=null;if(n.g==e){Qp(n),ty(n),n.g=null;var r=2}else{if(!qm(n.h,e))return;t=e.F,Rv(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;ci(r=Up(),new Ev(r,t)),Yp(n)}else Vv(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function PE(n,e){return!(DE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=jh(xi(n.Na,n,e),$v(n,n.C)),n.C++,0)))}(n,e)||2==r&&ey(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:cd(n,5);break;case 4:cd(n,10);break;case 3:cd(n,6);break;default:cd(n,2)}}function $v(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function cd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=xi(n.pb,n);t||(t=new kl("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||Gp(t,"https"),qp(t)),function CE(n,e){const t=new Du;if(Ht.Image){const r=new Image;r.onload=Rp(Wm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Rp(Wm,t,r,"TestLoadImage: error",!1,e),r.onabort=Rp(Wm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Rp(Wm,t,r,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ri(2);n.H=0,n.l&&n.l.za(e),NE(n),RE(n)}function NE(n){if(n.H=0,n.pa=[],n.l){const e=Pv(n.h);(0!=e.length||0!=n.i.length)&&(Xw(n.pa,e),Xw(n.pa,n.i),n.h.i.length=0,tv(n.i),n.i.length=0),n.l.ya()}}function OE(n,e,t){var r=t instanceof kl?Ia(t):new kl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),zp(r,r.m);else{var i=Ht.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new kl(null,void 0);r&&Gp(u,r),e&&(u.g=e),i&&zp(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Ln(r,t,e),Ln(r,"VER",n.qa),Ul(n,r),r}function kE(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yn(t&&n.Ha&&!n.va?new Zh({ob:!0}):n.va)).Oa(n.I),e}function FE(){}function ny(){if(Ml&&!(10<=Number(wu)))throw Error("Environmental error: no available transport.")}function xs(n,e){Yr.call(this),this.g=new Fv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Ss(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ss(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Kh(this)}function LE(n){Bp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function VE(){Iv.call(this),this.status=1}function Kh(n){this.g=n}function zo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function jv(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=u+((l=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function wn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(tt=yn.prototype).Oa=function(n){this.M=n},tt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Hh.g(),this.C=function fE(n){return n.h||(n.h=n.i())}(this.u?this.u:Hh),this.g.onreadystatechange=xi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void SE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Ht.FormData&&n instanceof Ht.FormData,!(0<=Qw(bE,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Qm(this),0<this.B&&((this.L=function TE(n){return Ml&&function rE(){return Jw(nE,9,function(){let n=0;const e=Am(String(sv)).split("."),t=Am("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",u=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=nv(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||nv(0==i[2].length,0==u[2].length)||nv(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xi(this.ua,this)):this.A=Iu(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){SE(this,u)}},tt.ua=function(){typeof J_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ci(this,"complete"),ci(this,"abort"),Ym(this))},tt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ym(this,!0)),yn.$.N.call(this)},tt.La=function(){this.s||(this.G||this.v||this.l?xE(this):this.kb())},tt.kb=function(){xE(this)},tt.da=function(){try{return 2<As(this)?this.g.status:-1}catch{return-1}},tt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},tt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pb(e)}},tt.Ia=function(){return this.m},tt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=Fv.prototype).qa=8,tt.H=1,tt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ad(this,this.j,n,void 0);let u=this.s;if(this.U&&(u?(u=sE(u),oE(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Lv(this,i,e),Ln(t=Ia(this.G),"RID",n),Ln(t,"CVER",22),this.F&&Ln(t,"X-HTTP-Session-Id",this.F),Ul(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(Ov(u)))+"&"+e:this.o&&kv(t,this.o,u)),Mv(this.h,i),this.bb&&Ln(t,"TYPE","init"),this.P?(Ln(t,"$req",e),Ln(t,"SID","null"),i.ba=!0,$m(i,t,null)):$m(i,t,e),this.H=2}}else 3==this.H&&(n?Jm(this,n):0==this.i.length||IE(this.h)||Jm(this))},tt.Ma=function(){if(this.u=null,Uv(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=jh(xi(this.jb,this),n)}},tt.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Ri(10),ld(this),Uv(this))},tt.ib=function(){null!=this.v&&(this.v=null,ld(this),ey(this),Ri(19))},tt.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Ri(2)):(this.j.info("Failed to ping google.com"),Ri(1))},(tt=FE.prototype).Ba=function(){},tt.Aa=function(){},tt.za=function(){},tt.ya=function(){},tt.Va=function(){},ny.prototype.g=function(n,e){return new xs(n,e)},Kr(xs,Yr),xs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Ri(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=OE(n,null,n.Y),Yp(n)},xs.prototype.close=function(){Xm(this.g)},xs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Vm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&Yp(e)},xs.prototype.N=function(){this.g.l=null,delete this.j,Xm(this.g),delete this.g,xs.$.N.call(this)},Kr(LE,Bp),Kr(VE,Iv),Kr(Kh,FE),Kh.prototype.Ba=function(){ci(this.g,"a")},Kh.prototype.Aa=function(n){ci(this.g,new LE(n))},Kh.prototype.za=function(n){ci(this.g,new VE)},Kh.prototype.ya=function(){ci(this.g,"b")},Kr(zo,function gb(){this.blockSize=-1}),zo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},zo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)jv(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){jv(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){jv(this,r),i=0;break}}this.h=i,this.i+=e},zo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var mb={};function Hv(n){return-128<=n&&128>n?Jw(mb,n,function(e){return new wn([0|e],0>e?-1:0)}):new wn([0|n],0>n?-1:0)}function Ca(n){if(isNaN(n)||!isFinite(n))return dd;if(0>n)return Xr(Ca(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=ry;return new wn(e,0)}var ry=4294967296,dd=Hv(0),iy=Hv(1),Gv=Hv(16777216);function ba(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ms(n){return-1==n.h}function Xr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new wn(t,~n.h).add(iy)}function Xp(n,e){return n.add(Xr(e))}function Jp(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Yh(n,e){this.g=n,this.h=e}function eg(n,e){if(ba(e))throw Error("division by zero");if(ba(n))return new Yh(dd,dd);if(Ms(n))return e=eg(Xr(n),e),new Yh(Xr(e.g),Xr(e.h));if(Ms(e))return e=eg(n,Xr(e)),new Yh(Xr(e.g),e.h);if(30<n.g.length){if(Ms(n)||Ms(e))throw Error("slowDivide_ only works with positive integers.");for(var t=iy,r=e;0>=r.X(n);)t=Bl(t),r=Bl(r);var i=Qh(t,1),u=Qh(r,1);for(r=Qh(r,2),t=Qh(t,2);!ba(r);){var l=u.add(r);0>=l.X(n)&&(i=i.add(t),u=l),r=Qh(r,1),t=Qh(t,1)}return e=Xp(n,i.R(e)),new Yh(i,e)}for(i=dd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Ca(t)).R(e);Ms(l)||0<l.X(n);)l=(u=Ca(t-=r)).R(e);ba(u)&&(u=iy),i=i.add(u),n=Xp(n,l)}return new Yh(i,n)}function Bl(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new wn(t,n.h)}function Qh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new wn(i,n.h)}(tt=wn.prototype).ea=function(){if(Ms(this))return-Xr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:ry+r)*e,e*=ry}return n},tt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ba(this))return"0";if(Ms(this))return"-"+Xr(this).toString(n);for(var e=Ca(Math.pow(n,6)),t=this,r="";;){var i=eg(t,e).g,u=((0<(t=Xp(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ba(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},tt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},tt.X=function(n){return Ms(n=Xp(this,n))?-1:ba(n)?0:1},tt.abs=function(){return Ms(this)?Xr(this):this},tt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),l=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(u&=65535)}return new wn(t,-2147483648&t[t.length-1]?-1:0)},tt.R=function(n){if(ba(this)||ba(n))return dd;if(Ms(this))return Ms(n)?Xr(this).R(Xr(n)):Xr(Xr(this).R(n));if(Ms(n))return Xr(this.R(Xr(n)));if(0>this.X(Gv)&&0>n.X(Gv))return Ca(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(i)>>>16,w=65535&n.D(i);t[2*r+2*i]+=l*w,Jp(t,2*r+2*i),t[2*r+2*i+1]+=u*w,Jp(t,2*r+2*i+1),t[2*r+2*i+1]+=l*m,Jp(t,2*r+2*i+1),t[2*r+2*i+2]+=u*m,Jp(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new wn(t,0)},tt.gb=function(n){return eg(this,n).h},tt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new wn(t,this.h&n.h)},tt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new wn(t,this.h|n.h)},tt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new wn(t,this.h^n.h)},ny.prototype.createWebChannel=ny.prototype.g,xs.prototype.send=xs.prototype.u,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,Um.NO_ERROR=0,Um.TIMEOUT=8,Um.HTTP_ERROR=6,hE.COMPLETE="complete",pE.EventType=sd,sd.OPEN="a",sd.CLOSE="b",sd.ERROR="c",sd.MESSAGE="d",Yr.prototype.listen=Yr.prototype.O,yn.prototype.listenOnce=yn.prototype.P,yn.prototype.getLastError=yn.prototype.Sa,yn.prototype.getLastErrorCode=yn.prototype.Ia,yn.prototype.getStatus=yn.prototype.da,yn.prototype.getResponseJson=yn.prototype.Wa,yn.prototype.getResponseText=yn.prototype.ja,yn.prototype.send=yn.prototype.ha,yn.prototype.setWithCredentials=yn.prototype.Oa,zo.prototype.digest=zo.prototype.l,zo.prototype.reset=zo.prototype.reset,zo.prototype.update=zo.prototype.j,wn.prototype.add=wn.prototype.add,wn.prototype.multiply=wn.prototype.R,wn.prototype.modulo=wn.prototype.gb,wn.prototype.compare=wn.prototype.X,wn.prototype.toNumber=wn.prototype.ea,wn.prototype.toString=wn.prototype.toString,wn.prototype.getBits=wn.prototype.D,wn.fromNumber=Ca,wn.fromString=function UE(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Xr(UE(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ca(Math.pow(e,8)),r=dd,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+u),e);8>u?(u=Ca(Math.pow(e,u)),r=r.R(u).add(Ca(l))):r=(r=r.R(t)).add(Ca(l))}return r};var yb=io.createWebChannelTransport=function(){return new ny},Xh=io.getStatEventTarget=function(){return Up()},BE=io.ErrorCode=Um,zv=io.EventType=hE,hx=io.Event=Nl,qv=io.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},$E=io.FetchXmlHttpFactory=Zh,Wv=io.WebChannel=pE,At=io.XhrIo=yn,_b=io.Md5=zo,Jh=io.Integer=wn;const jE="@firebase/firestore";class Xn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");let ef="9.21.0";const qo=new Al.Yd("@firebase/firestore");function tf(){return qo.logLevel}function Fe(n,...e){if(qo.logLevel<=Al.in.DEBUG){const t=e.map(Zv);qo.debug(`Firestore (${ef}): ${n}`,...t)}}function lr(n,...e){if(qo.logLevel<=Al.in.ERROR){const t=e.map(Zv);qo.error(`Firestore (${ef}): ${n}`,...t)}}function Rs(n,...e){if(qo.logLevel<=Al.in.WARN){const t=e.map(Zv);qo.warn(`Firestore (${ef}): ${n}`,...t)}}function Zv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${ef}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function yt(n,e){n||st()}function Ye(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends zt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xn.UNAUTHENTICATED))}shutdown(){}}class wb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Eb{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=C=>this.i!==i?(i=this.i,t(C)):Promise.resolve();let l=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=l;e.enqueueRetryable((0,pe.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new nf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new Xn(e)}}class sy{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class GE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new sy(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zE{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.T=t.token,new Kv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function tg(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class rf{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=tg(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function sf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function qE(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Vn(0,0))}static max(){return new Et(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class af{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===af.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof af?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends af{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const WE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends af{construct(e,t,r){return new cr(e,t,r)}static isValidIdentifier(e){return WE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Se(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const m=e[i];if("\\"===m){if(i+1===e.length)throw new Se(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[i+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Se(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,i+=2}else"`"===m?(l=!l,i++):"."!==m||l?(r+=m,i++):(u(),i++)}if(u(),l)throw new Se(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(t)}static emptyPath(){return new cr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(ln.fromString(e))}static fromName(e){return new Ze(ln.fromString(e).popFirst(5))}static empty(){return new Ze(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new ln(e.slice()))}}class Yv{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ZE(n){return n.fields.find(e=>2===e.kind)}function uf(n){return n.fields.filter(e=>2!==e.kind)}Yv.UNKNOWN_ID=-1;class ng{constructor(e,t){this.fieldPath=e,this.kind=t}}class rg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rg(0,di.min())}}function KE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new di(i,Ze.empty(),e)}function Qv(n){return new di(n.readTime,n.key,-1)}class di{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new di(Et.min(),Ze.empty(),-1)}static max(){return new di(Et.max(),Ze.empty(),-1)}}function Xv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const YE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function $l(n){return XE.apply(this,arguments)}function XE(){return XE=(0,pe.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==YE)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),XE.apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let i=0,u=0,l=!1;e.forEach(m=>{++i,m.next(()=>{++u,l&&u===i&&t()},w=>r(w))}),l=!0,u===i&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(i=>i?ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,i)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(T=>{l[C]=T,++m,m===u&&r(l)},T=>i(T))}})}static doWhile(e,t){return new ee((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class ig{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Vr,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Cu(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=e0(r.target.error);this.R.reject(new Cu(e,i))}}static open(e,t,r,i){try{return new ig(t,e.transaction(i,r))}catch(u){throw new Cu(t,u)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JE(t)}}class Wo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Wo.S((0,zt.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),hd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,zt.hl)())return!1;if(Wo.C())return!0;const e=(0,zt.z$)(),t=Wo.S(e),r=0<t&&t<10,i=Wo.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new Cu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;i("VersionError"===m.name?new Se(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Se(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Cu(e,m))},u.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,pe.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.O(e);const w=ig.open(u.db,e,l?"readonly":"readwrite",r),C=i(w).next(T=>(w.P(),T)).catch(T=>(w.abort(T),ee.reject(T))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,T="FirebaseError"!==C.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",T),u.close(),!T)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ib{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return hd(this.L.delete())}}class Cu extends Se{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function jl(n){return"IndexedDbTransactionError"===n.name}class JE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hd(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),hd(this.store.add(e))}get(e){return hd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),hd(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),hd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(l,m)=>{u.push(m)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ee((u,l)=>{i.onerror=m=>{l(m.target.error)},i.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ee((r,i)=>{t.onerror=u=>{const l=e0(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ee((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void i();const w=new Ib(m),C=t(m.primaryKey,m.value,w);if(C instanceof ee){const T=C.catch(P=>(w.done(),ee.reject(P)));r.push(T)}w.isDone?i():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hd(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=e0(r.target.error);t(i)}})}let Jv=!1;function e0(n){const e=Wo.S((0,zt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jv||(Jv=!0,setTimeout(()=>{throw r},0)),r}}return n}class eI{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){jl(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield $l(r)}yield t.et(6e4)}))}}class Db{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return ee.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(m=>{i-=m,r.add(l)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,u)).next(m=>(Fe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=Qv(u);Xv(l,r)>0&&(r=l)}),new di(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Yi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function sg(n){return null==n}function lf(n){return 0===n&&1/n==-1/0}function t0(n){return"number"==typeof n&&Number.isInteger(n)&&!lf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tI(e)),e=Cb(n.get(t),e);return tI(e)}function Cb(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function tI(n){return n+"\x01\x01"}function ao(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===i.length?w=m:(i+=m,w=i,i=""),r.push(w);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:st()}u=l+2}return new ln(r)}const nI=["userId","batchId"];function og(n,e){return[n,Pi(e)]}function rI(n,e,t){return[n,Pi(e),t]}const bb={},Tb=["prefixPath","collectionGroup","readTime","documentId"],Sb=["prefixPath","collectionGroup","documentId"],Ab=["collectionGroup","readTime","prefixPath","documentId"],xb=["canonicalId","targetId"],Mb=["targetId","path"],Rb=["path","targetId"],iI=["collectionId","parent"],sI=["indexId","uid"],Pb=["uid","sequenceNumber"],Nb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oI=["indexId","uid","orderedDocumentKey"],Ob=["userId","collectionPath","documentId"],kb=["userId","collectionPath","largestBatchId"],Fb=["userId","collectionGroup","largestBatchId"],ay=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],n0=[...ay,"documentOverlays"],r0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uy=r0,Lb=[...uy,"indexConfiguration","indexState","indexEntries"];class s0 extends QE{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Tr(n,e){const t=Ye(n);return Wo.M(t.at,e)}function aI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xn{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ly(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ly(this.root,e,this.comparator,!1)}getReverseIterator(){return new ly(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ly(this.root,e,this.comparator,!0)}}class ly{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ni{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Ni.RED,this.left=i??Ni.EMPTY,this.right=u??Ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ni(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1,Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cy(this.data.getIterator())}getIteratorFrom(e){return new cy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class cy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cf(n){return n.hasNext()?n.getNext():void 0}class Oi{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new Nn(cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class uI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new uI("Invalid base64 string: "+i):i}}(e);return new vr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vr.EMPTY_BYTE_STRING=new vr("");const cI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tu(n){if(yt(!!n),"string"==typeof n){let e=0;const t=cI.exec(n);if(yt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jn(n.seconds),nanos:Jn(n.nanos)}}function Jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ta(n){return"string"==typeof n?vr.fromBase64String(n):vr.fromUint8Array(n)}function dy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function hy(n){const e=n.mapValue.fields.__previous_value__;return dy(e)?hy(e):e}function ag(n){const e=Tu(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class Vb{constructor(e,t,r,i,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Su{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Su("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}const pd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ug={nullValue:"NULL_VALUE"};function Hl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dy(n)?4:hf(n)?9007199254740991:10:st()}function Sa(n,e){if(n===e)return!0;const t=Hl(n);if(t!==Hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ag(n).isEqual(ag(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Tu(r.timestampValue),l=Tu(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ta(n.bytesValue).isEqual(Ta(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Jn(r.geoPointValue.latitude)===Jn(i.geoPointValue.latitude)&&Jn(r.geoPointValue.longitude)===Jn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Jn(r.integerValue)===Jn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Jn(r.doubleValue),l=Jn(i.doubleValue);return u===l?lf(u)===lf(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return sf(n.arrayValue.values||[],e.arrayValue.values||[],Sa);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(aI(u)!==aI(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Sa(u[m],l[m])))return!1;return!0}(n,e);default:return st()}var i}function fy(n,e){return void 0!==(n.values||[]).find(t=>Sa(t,e))}function Gl(n,e){if(n===e)return 0;const t=Hl(n),r=Hl(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=Jn(i.integerValue||i.doubleValue),m=Jn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return dI(n.timestampValue,e.timestampValue);case 4:return dI(ag(n),ag(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,u){const l=Ta(i),m=Ta(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const C=Bt(l[w],m[w]);if(0!==C)return C}return Bt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=Bt(Jn(i.latitude),Jn(u.latitude));return 0!==l?l:Bt(Jn(i.longitude),Jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const C=Gl(l[w],m[w]);if(C)return C}return Bt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===pd.mapValue&&u===pd.mapValue)return 0;if(i===pd.mapValue)return 1;if(u===pd.mapValue)return-1;const l=i.fields||{},m=Object.keys(l),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let T=0;T<m.length&&T<C.length;++T){const P=Bt(m[T],C[T]);if(0!==P)return P;const V=Gl(l[m[T]],w[C[T]]);if(0!==V)return V}return Bt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw st()}}function dI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Tu(n),r=Tu(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function df(n){return o0(n)}function o0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Tu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ta(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=o0(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of i)l?l=!1:u+=",",u+=`${m}:${o0(r.fields[m])}`;return u+"}"}(n.mapValue):st();var e}function gd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function a0(n){return!!n&&"integerValue"in n}function lg(n){return!!n&&"arrayValue"in n}function hI(n){return!!n&&"nullValue"in n}function fI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gy(n){return!!n&&"mapValue"in n}function cg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hf(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function pI(n){return"nullValue"in n?ug:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gd(Su.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function gI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gd(Su.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pd:st()}function u0(n,e){const t=Gl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function l0(n,e){const t=Gl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cg(t)}setAll(e){let t=cr.emptyPath(),r={},i=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,i),r={},i=[],t=m.popLast()}l?r[m.lastSegment()]=cg(l):i.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());gy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bu(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Jr(cg(this.value))}}function c0(n){const e=[];return bu(n.fields,(t,r)=>{const i=new cr([t]);if(gy(r)){const u=c0(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new Oi(e)}class Un{constructor(e,t,r,i,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Un(e,0,Et.min(),Et.min(),Et.min(),Jr.empty(),0)}static newFoundDocument(e,t,r,i){return new Un(e,1,t,Et.min(),r,i,0)}static newNoDocument(e,t){return new Un(e,2,t,Et.min(),Et.min(),Jr.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,Et.min(),Et.min(),Jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class md{constructor(e,t){this.position=e,this.inclusive=t}}function mI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(l.referenceValue),t.key):Gl(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function d0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sa(n.position[t],e.position[t]))return!1;return!0}class ff{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ub(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yI{}class Yt extends yI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new yy(e,t,r):"array-contains"===t?new II(e,r):"in"===t?new f0(e,r):"not-in"===t?new p0(e,r):"array-contains-any"===t?new DI(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new _y(e,r):new Bb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Gl(t,this.value)):null!==t&&Hl(this.value)===Hl(t)&&this.matchesComparison(Gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class En extends yI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new En(e,t)}matches(e){return zl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function zl(n){return"and"===n.op}function uo(n){return"or"===n.op}function h0(n){return my(n)&&zl(n)}function my(n){for(const e of n.filters)if(e instanceof En)return!1;return!0}function yd(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+df(n.value);if(h0(n))return n.filters.map(e=>yd(e)).join(",");{const e=n.filters.map(t=>yd(t)).join(",");return`${n.op}(${e})`}}function _I(n,e){return n instanceof Yt?(t=n,(r=e)instanceof Yt&&t.op===r.op&&t.field.isEqual(r.field)&&Sa(t.value,r.value)):n instanceof En?function(t,r){return r instanceof En&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,l)=>i&&_I(u,r.filters[l]),!0)}(n,e):void st();var t,r}function vI(n,e){const t=n.filters.concat(e);return En.create(t,n.op)}function wI(n){return n instanceof Yt?`${(e=n).field.canonicalString()} ${e.op} ${df(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(wI).join(" ,")+"}"}(n):"Filter";var e}class yy extends Yt{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class _y extends Yt{constructor(e,t){super(e,"in",t),this.keys=EI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bb extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=EI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function EI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class II extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lg(t)&&fy(t.arrayValue,this.value)}}class f0 extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fy(this.value.arrayValue,t)}}class p0 extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fy(this.value.arrayValue,t)}}class DI extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fy(this.value.arrayValue,r))}}class g0{constructor(e,t=null,r=[],i=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=m,this.ft=null}}function dg(n,e=null,t=[],r=[],i=null,u=null,l=null){return new g0(n,e,t,r,i,u,l)}function ql(n){const e=Ye(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yd(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>df(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>df(r)).join(",")),e.ft=t}return e.ft}function _d(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ub(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_I(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!d0(n.startAt,e.startAt)&&d0(n.endAt,e.endAt)}function pf(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vy(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function CI(n,e,t){let r=ug,i=!0;for(const u of vy(n,e)){let l=ug,m=!0;switch(u.op){case"<":case"<=":l=pI(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=ug}u0({value:r,inclusive:i},{value:l,inclusive:m})<0&&(r=l,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];u0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function bI(n,e,t){let r=pd,i=!0;for(const u of vy(n,e)){let l=pd,m=!0;switch(u.op){case">=":case">":l=gI(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=pd}l0({value:r,inclusive:i},{value:l,inclusive:m})>0&&(r=l,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];l0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Au{constructor(e,t=null,r=[],i=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.dt=null,this._t=null}}function m0(n,e,t,r,i,u,l,m){return new Au(n,e,t,r,i,u,l,m)}function Wl(n){return new Au(n)}function y0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function _0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hg(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function wy(n){return null!==n.collectionGroup}function vd(n){const e=Ye(n);if(null===e.dt){e.dt=[];const t=hg(e),r=_0(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new ff(t)),e.dt.push(new ff(cr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ff(cr.keyField(),u))}}}return e.dt}function ki(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=dg(e.path,e.collectionGroup,vd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of vd(e))t.push(new ff(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new md(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new md(e.startAt.position,e.startAt.inclusive):null;e._t=dg(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Ey(n,e){e.getFirstInequalityField(),hg(n);const t=n.filters.concat([e]);return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Iy(n,e,t){return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gf(n,e){return _d(ki(n),ki(e))&&n.limitType===e.limitType}function TI(n){return`${ql(ki(n))}|lt:${n.limitType}`}function hi(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>wI(r)).join(", ")}]`),sg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>df(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>df(r)).join(",")),`Target(${t})`}(ki(n))}; limitType=${n.limitType})`}function Aa(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of vd(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const m=mI(i,u,l);return i.inclusive?m<=0:m<0}(t.startAt,vd(t),r)||t.endAt&&!function(i,u,l){const m=mI(i,u,l);return i.inclusive?m>=0:m>0}(t.endAt,vd(t),r)));var t,r}function SI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AI(n){return(e,t)=>{let r=!1;for(const i of vd(n)){const u=gx(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function gx(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,u,l){const m=u.data.field(i),w=l.data.field(i);return null!==m&&null!==w?Gl(m,w):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class Zl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bu(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return fd(this.inner)}size(){return this.innerSize}}const xI=new xn(Ze.comparator);function Fi(){return xI}const mf=new xn(Ze.comparator);function fg(...n){let e=mf;for(const t of n)e=e.insert(t.key,t);return e}function Dy(n){let e=mf;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xa(){return pg()}function v0(){return pg()}function pg(){return new Zl(n=>n.toString(),(n,e)=>n.isEqual(e))}const $b=new xn(Ze.comparator),jb=new Nn(Ze.comparator);function qt(...n){let e=jb;for(const t of n)e=e.add(t);return e}const MI=new Nn(Bt);function Cy(){return MI}function gg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lf(e)?"-0":e}}function by(n){return{integerValue:""+n}}function Hb(n,e){return t0(e)?by(e):gg(n,e)}class mg{constructor(){this._=void 0}}function Gb(n,e,t){return n instanceof yf?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&dy(i)&&(i=hy(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Kl?Ty(n,e):n instanceof _f?PI(n,e):function(r,i){const u=wd(r,i),l=NI(u)+NI(r.wt);return a0(u)&&a0(r.wt)?by(l):gg(r.serializer,l)}(n,e)}function RI(n,e,t){return n instanceof Kl?Ty(n,e):n instanceof _f?PI(n,e):t}function wd(n,e){return n instanceof yg?a0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class yf extends mg{}class Kl extends mg{constructor(e){super(),this.elements=e}}function Ty(n,e){const t=OI(e);for(const r of n.elements)t.some(i=>Sa(i,r))||t.push(r);return{arrayValue:{values:t}}}class _f extends mg{constructor(e){super(),this.elements=e}}function PI(n,e){let t=OI(e);for(const r of n.elements)t=t.filter(i=>!Sa(i,r));return{arrayValue:{values:t}}}class yg extends mg{constructor(e,t){super(),this.serializer=e,this.wt=t}}function NI(n){return Jn(n.integerValue||n.doubleValue)}function OI(n){return lg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _g{constructor(e,t){this.field=e,this.transform=t}}class FI{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wg{}function LI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Eg(n.key,zn.none()):new Ed(n.key,n.data,zn.none());{const t=n.data,r=Jr.empty();let i=new Nn(cr.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new Ma(n.key,r,new Oi(i.toArray()),zn.none())}}function zb(n,e,t){n instanceof Ed?function(r,i,u){const l=r.value.clone(),m=VI(r.fieldTransforms,i,u.transformResults);l.setAll(m),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ma?function(r,i,u){if(!vg(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=VI(r.fieldTransforms,i,u.transformResults),m=i.data;m.setAll(E0(r)),m.setAll(l),i.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vf(n,e,t,r){return n instanceof Ed?function(i,u,l,m){if(!vg(i.precondition,u))return l;const w=i.value.clone(),C=UI(i.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ma?function(i,u,l,m){if(!vg(i.precondition,u))return l;const w=UI(i.fieldTransforms,m,u),C=u.data;return C.setAll(E0(i)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,vg(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function qb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=wd(r.transform,i||null);null!=u&&(null===t&&(t=Jr.empty()),t.set(r.field,u))}return t||null}function w0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sf(t,r,(i,u)=>function kI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Kl&&r instanceof Kl||t instanceof _f&&r instanceof _f?sf(t.elements,r.elements,Sa):t instanceof yg&&r instanceof yg?Sa(t.wt,r.wt):t instanceof yf&&r instanceof yf);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ed extends wg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ma extends wg{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function E0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function VI(n,e,t){const r=new Map;yt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,m=e.data.field(u.field);r.set(u.field,RI(l,m,t[i]))}return r}function UI(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,Gb(u,l,e))}return r}class Eg extends wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sy extends wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class BI{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&zb(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=v0();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(i.key)?null:m;const w=LI(l,m);null!==w&&r.set(i.key,w),l.isValidDocument()||l.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&sf(this.mutations,e.mutations,(t,r)=>w0(t,r))&&sf(this.baseMutations,e.baseMutations,(t,r)=>w0(t,r))}}class $I{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yt(e.mutations.length===r.length);let i=$b;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new $I(e,t,r,i)}}class jI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yx{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ur,hn;function Wb(n){switch(n){default:return st();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function Ig(n){if(void 0===n)return lr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Ur.OK:return ae.OK;case Ur.CANCELLED:return ae.CANCELLED;case Ur.UNKNOWN:return ae.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return ae.INTERNAL;case Ur.UNAVAILABLE:return ae.UNAVAILABLE;case Ur.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Ur.NOT_FOUND:return ae.NOT_FOUND;case Ur.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Ur.ABORTED:return ae.ABORTED;case Ur.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Ur.DATA_LOSS:return ae.DATA_LOSS;default:return st()}}(hn=Ur||(Ur={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class HI{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Dg}static getOrCreateInstance(){return null===Dg&&(Dg=new HI),Dg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Dg=null;function Cg(){return new TextEncoder}const GI=new Jh([4294967295,4294967295],0);function I0(n){const e=Cg().encode(n),t=new _b;return t.update(e),new Uint8Array(t.digest())}function Zb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Jh([t,r],0),new Jh([i,u],0)]}class bg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wf(`Invalid padding: ${t}`);if(r<0)throw new wf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new wf(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new wf(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Jh.fromNumber(this.yt)}Tt(e,t,r){let i=e.add(t.multiply(Jh.fromNumber(r)));return 1===i.compare(GI)&&(i=new Jh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=I0(e),[r,i]=Zb(t);for(let u=0;u<this.hashCount;u++){const l=this.Tt(r,i,u);if(!this.Et(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new bg(u,i,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.yt)return;const t=I0(e),[r,i]=Zb(t);for(let u=0;u<this.hashCount;u++){const l=this.Tt(r,i,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class wf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tg{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ay.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tg(Et.min(),i,new xn(Bt),Fi(),qt())}}class Ay{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ay(r,t,qt(),qt(),qt())}}class D0{constructor(e,t,r,i){this.vt=e,this.removedTargetIds=t,this.key=r,this.Pt=i}}class zI{constructor(e,t){this.targetId=e,this.bt=t}}class qI{constructor(e,t,r=vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Sg{constructor(){this.Vt=0,this.St=Qb(),this.Dt=vr.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=qt(),t=qt(),r=qt();return this.St.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new Ay(this.Dt,this.Ct,e,t,r)}$t(){this.xt=!1,this.St=Qb()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class Kb{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=Fi(),this.jt=Yb(),this.zt=new xn(Bt)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const r=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),r.Mt(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((r,i)=>{this.Zt(i)&&t(i)})}ee(e){var t;const r=e.targetId,i=e.bt.count,u=this.ne(r);if(u){const l=u.target;if(pf(l))if(0===i){const m=new Ze(l.path);this.Jt(r,m,Un.newNoDocument(m,Et.min()))}else yt(1===i);else{const m=this.se(r);if(m!==i){const w=this.ie(e,m);0!==w&&(this.te(r),this.zt=this.zt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=HI.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,T,P){var V,q,oe,Ee,Ie,dt;const _t={localCacheCount:T,existenceFilterCount:P.count},Xe=P.unchangedNames;return Xe&&(_t.bloomFilter={applied:0===C,hashCount:null!==(V=Xe?.hashCount)&&void 0!==V?V:0,bitmapLength:null!==(Ee=null===(oe=null===(q=Xe?.bits)||void 0===q?void 0:q.bitmap)||void 0===oe?void 0:oe.length)&&void 0!==Ee?Ee:0,padding:null!==(dt=null===(Ie=Xe?.bits)||void 0===Ie?void 0:Ie.padding)&&void 0!==dt?dt:0}),_t}(w,m,e.bt))}}}}ie(e,t){const{unchangedNames:r,count:i}=e.bt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,C;try{w=Ta(u).toUint8Array()}catch(T){if(T instanceof uI)return Rs("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{C=new bg(w,l,m)}catch(T){return Rs(T instanceof wf?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===C.yt?1:i!==t-this.re(e.targetId,C)?2:0}re(e,t){const r=this.Kt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const l=this.Kt.oe(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.At(m)||(this.Jt(e,u,null),i++)}),i}ue(e){const t=new Map;this.Gt.forEach((u,l)=>{const m=this.ne(l);if(m){if(u.current&&pf(m.target)){const w=new Ze(m.target.path);null!==this.Qt.get(w)||this.ce(l,w)||this.Jt(l,w,Un.newNoDocument(w,e))}u.kt&&(t.set(l,u.Ot()),u.$t())}});let r=qt();this.jt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const C=this.ne(w);return!C||"TargetPurposeLimboResolution"===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Qt.forEach((u,l)=>l.setReadTime(e));const i=new Tg(e,t,this.zt,this.Qt,r);return this.Qt=Fi(),this.jt=Yb(),this.zt=new xn(Bt),i}Ht(e,t){if(!this.Zt(e))return;const r=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,r),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,r){if(!this.Zt(e))return;const i=this.Xt(e);this.ce(e,t)?i.Ft(t,1):i.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),r&&(this.Qt=this.Qt.insert(t,r))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new Sg,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new Nn(Bt),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new Sg),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function Yb(){return new xn(Ze.comparator)}function Qb(){return new xn(Ze.comparator)}const _x={asc:"ASCENDING",desc:"DESCENDING"},Xb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jb={and:"AND",or:"OR"};class eT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function WI(n,e){return n.useProto3Json||sg(e)?e:{value:e}}function Ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ZI(n,e){return Ef(n,e.toTimestamp())}function Sr(n){return yt(!!n),Et.fromTimestamp(function(e){const t=Tu(e);return new Vn(t.seconds,t.nanos)}(n))}function Ps(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function KI(n){const e=ln.fromString(n);return yt(rD(e)),e}function Id(n,e){return Ps(n.databaseId,e.path)}function Ra(n,e){const t=KI(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(xy(t))}function YI(n,e){return Ps(n.databaseId,e)}function Ns(n){const e=KI(n);return 4===e.length?ln.emptyPath():xy(e)}function Ag(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xy(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function QI(n,e,t){return{name:Id(n,e),fields:t.value.mapValue.fields}}function XI(n,e,t){const r=Ra(n,e.name),i=Sr(e.updateTime),u=e.createTime?Sr(e.createTime):Et.min(),l=new Jr({mapValue:{fields:e.fields}}),m=Un.newFoundDocument(r,i,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function If(n,e){let t;if(e instanceof Ed)t={update:QI(n,e.key,e.value)};else if(e instanceof Eg)t={delete:Id(n,e.key)};else if(e instanceof Ma)t={update:QI(n,e.key,e.data),updateMask:vx(e.fieldMask)};else{if(!(e instanceof Sy))return st();t={verify:Id(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof yf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Kl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _f)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yg)return{fieldPath:u.field.canonicalString(),increment:l.wt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ZI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function T0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?zn.updateTime(Sr(i.updateTime)):void 0!==i.exists?zn.exists(i.exists):zn.none():zn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let m=null;"setToServerValue"in l?(yt("REQUEST_TIME"===l.setToServerValue),m=new yf):"appendMissingElements"in l?m=new Kl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new _f(l.removeAllFromArray.values||[]):"increment"in l?m=new yg(u,l.increment):st();const w=cr.fromServerFormat(l.fieldPath);return new _g(w,m)}(n,i)):[];var i;if(e.update){const i=Ra(n,e.update.name),u=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Oi((e.updateMask.fieldPaths||[]).map(C=>cr.fromServerFormat(C)));return new Ma(i,u,l,t,r)}return new Ed(i,u,t,r)}if(e.delete){const i=Ra(n,e.delete);return new Eg(i,t)}if(e.verify){const i=Ra(n,e.verify);return new Sy(i,t)}return st()}function S0(n,e){return{documents:[YI(n,e.path)]}}function A0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=YI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=YI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(w){if(0!==w.length)return nD(En.create(w,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Pa((T=C).field),direction:xu(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=WI(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function x0(n){let e=Ns(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){yt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(T){const P=My(T);return P instanceof En&&h0(P)?P.getFilters():[P]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new ff(Dd((P=T).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let m=null;t.limit&&(m=function(T){let P;return P="object"==typeof T?T.value:T,sg(P)?null:P}(t.limit));let w=null;var T;t.startAt&&(w=new md((T=t.startAt).values||[],!!T.before));let C=null;return t.endAt&&(C=function(T){return new md(T.values||[],!T.before)}(t.endAt)),m0(e,i,l,u,m,"F",w,C)}function My(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Dd(e.unaryFilter.field);return Yt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Dd(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dd(e.unaryFilter.field);return Yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Dd(e.unaryFilter.field);return Yt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?Yt.create(Dd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(t=>My(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function xu(n){return _x[n]}function Yl(n){return Xb[n]}function tD(n){return Jb[n]}function Pa(n){return{fieldPath:n.canonicalString()}}function Dd(n){return cr.fromServerFormat(n.fieldPath)}function nD(n){return n instanceof Yt?function(e){if("=="===e.op){if(fI(e.value))return{unaryFilter:{field:Pa(e.field),op:"IS_NAN"}};if(hI(e.value))return{unaryFilter:{field:Pa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fI(e.value))return{unaryFilter:{field:Pa(e.field),op:"IS_NOT_NAN"}};if(hI(e.value))return{unaryFilter:{field:Pa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(e.field),op:Yl(e.op),value:e.value}}}(n):n instanceof En?function(e){const t=e.getFilters().map(r=>nD(r));return 1===t.length?t[0]:{compositeFilter:{op:tD(e.op),filters:t}}}(n):st()}function vx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Mu{constructor(e,t,r,i,u=Et.min(),l=Et.min(),m=vr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new Mu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class iD{constructor(e){this.le=e}}function M0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:R0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Id(i=n.le,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ef(i,u.version.toTimestamp()),createTime:Ef(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ql(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Ql(e.version)}}var i,u;return r}function R0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ql(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cd(n){const e=new Vn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Xl(n,e){const t=(e.baseMutations||[]).map(u=>T0(n.le,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>T0(n.le,u)),i=Vn.fromMillis(e.localWriteTimeMs);return new BI(e.batchId,i,t,r)}function Ry(n){const e=Cd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Cd(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(yt(1===(i=n.query).documents.length),r=ki(Wl(Ns(i.documents[0])))):r=ki(x0(n.query)),new Mu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,vr.fromBase64String(n.resumeToken))}function Py(n,e){const t=Ql(e.snapshotVersion),r=Ql(e.lastLimboFreeSnapshotVersion);let i;i=pf(e.target)?S0(n.le,e.target):A0(n.le,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ql(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ny(n){const e=x0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Iy(e,e.limit,"L"):e}function Oy(n,e){return new jI(e.largestBatchId,T0(n.le,e.overlayMutation))}function P0(n,e){const t=e.path.lastSegment();return[n,Pi(e.path.popLast()),t]}function N0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ql(r.readTime),documentKey:Pi(r.documentKey.path),largestBatchId:r.largestBatchId}}class sD{getBundleMetadata(e,t){return xg(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Cd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return xg(e).put({bundleId:(r=t).id,createTime:Ql(Sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Mg(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Ny(i.bundledQuery),readTime:Cd(i.readTime)};var i})}saveNamedQuery(e,t){return Mg(e).put({name:(r=t).name,readTime:Ql(Sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xg(n){return Tr(n,"bundles")}function Mg(n){return Tr(n,"namedQueries")}class Rg{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new Rg(e,t.uid||"")}getOverlay(e,t){return Pg(e).get(P0(this.userId,t)).next(r=>r?Oy(this.serializer,r):null)}getOverlays(e,t){const r=xa();return ee.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const m=new jI(t,l);i.push(this.de(e,m))}),ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Pi(l.getCollectionPath())));const u=[];return i.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Pg(e).J("collectionPathOverlayIndex",m))}),ee.waitFor(u)}getOverlaysForCollection(e,t,r){const i=xa(),u=Pi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Pg(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const C=Oy(this.serializer,w);i.set(C.getKey(),C)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=xa();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pg(e).X({index:"collectionGroupOverlayIndex",range:m},(w,C,T)=>{const P=Oy(this.serializer,C);u.size()<i||P.largestBatchId===l?(u.set(P.getKey(),P),l=P.largestBatchId):T.done()}).next(()=>u)}de(e,t){return Pg(e).put(function(r,i,u){const[l,m,w]=P0(i,u.mutation.key);return{userId:i,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:If(r.le,u.mutation)}}(this.serializer,this.userId,t))}}function Pg(n){return Tr(n,"documentOverlays")}class bd{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Jn(e.integerValue));else if("doubleValue"in e){const r=Jn(e.doubleValue);isNaN(r)?this.ge(t,13):(this.ge(t,15),lf(r)?t.ye(0):t.ye(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe(`${r.seconds||""}`),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(Ta(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ge(t,45),t.ye(r.latitude||0),t.ye(r.longitude||0)}else"mapValue"in e?hf(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):st()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const r=e.fields||{};this.ge(t,55);for(const i of Object.keys(r))this.Ie(i,t),this.we(r[i],t)}ve(e,t){const r=e.values||[];this.ge(t,50);for(const i of r)this.we(i,t)}Ae(e,t){this.ge(t,37),Ze.fromName(e).path.forEach(r=>{this.ge(t,60),this.Pe(r,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function wx(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function rT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=wx(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}bd.be=new bd;class Ex{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Se(r.value),r=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xe(r.value),r=t.next();this.Ne()}ke(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Se(r);else if(r<2048)this.Se(960|r>>>6),this.Se(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Se(480|r>>>12),this.Se(128|63&r>>>6),this.Se(128|63&r);else{const i=t.codePointAt(0);this.Se(240|i>>>18),this.Se(128|63&i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i)}}this.De()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xe(r);else if(r<2048)this.xe(960|r>>>6),this.xe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.xe(480|r>>>12),this.xe(128|63&r>>>6),this.xe(128|63&r);else{const i=t.codePointAt(0);this.xe(240|i>>>18),this.xe(128|63&i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i)}}this.Ne()}Oe(e){const t=this.$e(e),r=rT(t);this.Fe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Be(e){const t=this.$e(e),r=rT(t);this.Fe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class oD{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class iT{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class Ng{constructor(){this.Qe=new Ex,this.je=new oD(this.Qe),this.ze=new iT(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Td{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Td(this.indexId,this.documentKey,this.arrayValue,r)}}function Sd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=sT(n.arrayValue,e.arrayValue),0!==t?t:(t=sT(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function sT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Ix{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xe=r:this.Ye.push(r)}}Ze(e){yt(e.collectionGroup===this.collectionId);const t=ZE(e);if(void 0!==t&&!this.tn(t))return!1;const r=uf(e);let i=0,u=0;for(;i<r.length&&this.tn(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Xe){const l=r[i];if(!this.en(this.Xe,l)||!this.nn(this.Je[u++],l))return!1;++i}for(;i<r.length;++i)if(u>=this.Je.length||!this.nn(this.Je[u++],r[i]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function oT(n){var e,t;if(yt(n instanceof Yt||n instanceof En),n instanceof Yt){if(n instanceof f0){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Yt.create(n.field,"==",u)))||[];return En.create(i,"or")}return n}const r=n.filters.map(i=>oT(i));return En.create(r,n.op)}function Dx(n){if(0===n.getFilters().length)return[];const e=k0(oT(n));return yt(aD(e)),O0(e)||Df(e)?[e]:e.getFilters()}function O0(n){return n instanceof Yt}function Df(n){return n instanceof En&&h0(n)}function aD(n){return O0(n)||Df(n)||function(e){if(e instanceof En&&uo(e)){for(const t of e.getFilters())if(!O0(t)&&!Df(t))return!1;return!0}return!1}(n)}function k0(n){if(yt(n instanceof Yt||n instanceof En),n instanceof Yt)return n;if(1===n.filters.length)return k0(n.filters[0]);const e=n.filters.map(r=>k0(r));let t=En.create(e,n.op);return t=Og(t),aD(t)?t:(yt(t instanceof En),yt(zl(t)),yt(t.filters.length>1),t.filters.reduce((r,i)=>ky(r,i)))}function ky(n,e){let t;return yt(n instanceof Yt||n instanceof En),yt(e instanceof Yt||e instanceof En),t=n instanceof Yt?e instanceof Yt?En.create([n,e],"and"):Jl(n,e):e instanceof Yt?Jl(e,n):function(r,i){if(yt(r.filters.length>0&&i.filters.length>0),zl(r)&&zl(i))return vI(r,i.getFilters());const u=uo(r)?r:i,l=uo(r)?i:r,m=u.filters.map(w=>ky(w,l));return En.create(m,"or")}(n,e),Og(t)}function Jl(n,e){if(zl(e))return vI(e,n.getFilters());{const t=e.filters.map(r=>ky(n,r));return En.create(t,"or")}}function Og(n){if(yt(n instanceof Yt||n instanceof En),n instanceof Yt)return n;const e=n.getFilters();if(1===e.length)return Og(e[0]);if(my(n))return n;const t=e.map(i=>Og(i)),r=[];return t.forEach(i=>{i instanceof Yt?r.push(i):i instanceof En&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:En.create(r,n.op)}class F0{constructor(){this.sn=new kg}addToCollectionParentIndex(e,t){return this.sn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(di.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(di.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class kg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nn(ln.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(ln.comparator)).toArray()}}const Fy=new Uint8Array(0);class L0{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new kg,this.on=new Zl(r=>ql(r),(r,i)=>_d(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const u={collectionId:r,parent:Pi(i)};return Ly(e).put(u)}return ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[qE(t),""],!1,!0);return Ly(e).j(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(ao(l.parent))}return r})}addFieldIndex(e,t){const r=V0(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=Vy(e);return u.next(m=>{l.put(N0(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=V0(e),i=Vy(e),u=ec(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ec(e);let i=!0;const u=new Map;return ee.forEach(this.un(t),l=>this.cn(e,l).next(m=>{i&&(i=!!m),u.set(l,m)})).next(()=>{if(i){let l=qt();const m=[];return ee.forEach(u,(w,C)=>{var T;Fe("IndexedDbIndexManager",`Using index ${T=w,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${ql(t)}`);const P=function(Xe,vt){const kt=ZE(vt);if(void 0===kt)return null;for(const Jt of vy(Xe,kt.fieldPath))switch(Jt.op){case"array-contains-any":return Jt.value.arrayValue.values||[];case"array-contains":return[Jt.value]}return null}(C,w),V=function(Xe,vt){const kt=new Map;for(const Jt of uf(vt))for(const pi of vy(Xe,Jt.fieldPath))switch(pi.op){case"==":case"in":kt.set(Jt.fieldPath.canonicalString(),pi.value);break;case"not-in":case"!=":return kt.set(Jt.fieldPath.canonicalString(),pi.value),Array.from(kt.values())}return null}(C,w),q=function(Xe,vt){const kt=[];let Jt=!0;for(const pi of uf(vt)){const lo=0===pi.kind?CI(Xe,pi.fieldPath,Xe.startAt):bI(Xe,pi.fieldPath,Xe.startAt);kt.push(lo.value),Jt&&(Jt=lo.inclusive)}return new md(kt,Jt)}(C,w),oe=function(Xe,vt){const kt=[];let Jt=!0;for(const pi of uf(vt)){const lo=0===pi.kind?bI(Xe,pi.fieldPath,Xe.endAt):CI(Xe,pi.fieldPath,Xe.endAt);kt.push(lo.value),Jt&&(Jt=lo.inclusive)}return new md(kt,Jt)}(C,w),Ee=this.an(w,C,q),Ie=this.an(w,C,oe),dt=this.hn(w,C,V),_t=this.ln(w.indexId,P,Ee,q.inclusive,Ie,oe.inclusive,dt);return ee.forEach(_t,Xe=>r.H(Xe,t.limit).next(vt=>{vt.forEach(kt=>{const Jt=Ze.fromSegments(kt.documentKey);l.has(Jt)||(l=l.add(Jt),m.push(Jt))})}))}).next(()=>m)}return ee.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:Dx(En.create(e.filters,"and")).map(r=>dg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,r,i,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),T=[];for(let P=0;P<w;++P){const V=t?this.fn(t[P/C]):Fy,q=this.dn(e,V,r[P%C],i),oe=this._n(e,V,u[P%C],l),Ee=m.map(Ie=>this.dn(e,V,Ie,!0));T.push(...this.createRange(q,oe,Ee))}return T}dn(e,t,r,i){const u=new Td(e,Ze.empty(),t,r);return i?u:u.He()}_n(e,t,r,i){const u=new Td(e,Ze.empty(),t,r);return i?u.He():u}cn(e,t){const r=new Ix(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const m of u)r.Ze(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const i=this.un(t);return ee.forEach(i,u=>this.cn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new Nn(cr.comparator),C=!1;for(const T of m.filters)for(const P of T.getFlattenedFilters())P.field.isKeyField()||("array-contains"===P.op||"array-contains-any"===P.op?C=!0:w=w.add(P.field));for(const T of m.orderBy)T.field.isKeyField()||(w=w.add(T.field));return w.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}wn(e,t){const r=new Ng;for(const i of uf(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.We(i.kind);bd.be._e(u,l)}return r.Ge()}fn(e){const t=new Ng;return bd.be._e(e,t.We(0)),t.Ge()}mn(e,t){const r=new Ng;return bd.be._e(gd(this.databaseId,t),r.We(function(i){const u=uf(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Ge()}hn(e,t,r){if(null===r)return[];let i=[];i.push(new Ng);let u=0;for(const l of uf(e)){const m=r[u++];for(const w of i)if(this.gn(t,l.fieldPath)&&lg(m))i=this.yn(i,l,m);else{const C=w.We(l.kind);bd.be._e(m,C)}}return this.pn(i)}an(e,t,r){return this.hn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ge();return t}yn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of i){const w=new Ng;w.seed(m.Ge()),bd.be._e(l,w.We(t.kind)),u.push(w)}return u}gn(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=V0(e),i=Vy(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ee.forEach(u,m=>i.get([m.indexId,this.uid]).next(w=>{l.push(function(C,T){const P=T?new rg(T.sequenceNumber,new di(Cd(T.readTime),new Ze(ao(T.documentKey)),T.largestBatchId)):rg.empty(),V=C.fields.map(([q,oe])=>new ng(cr.fromServerFormat(q),oe));return new Yv(C.indexId,C.collectionGroup,V,P)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=V0(e),u=Vy(e);return this.In(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ee.forEach(m,w=>u.put(N0(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?ee.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(m=>(r.set(i.collectionGroup,m),ee.forEach(m,w=>this.Tn(e,i,w).next(C=>{const T=this.En(u,w);return C.isEqual(T)?ee.resolve():this.An(e,u,w,C,T)}))))})}Rn(e,t,r,i){return ec(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ec(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}Tn(e,t,r){const i=ec(e);let u=new Nn(Sd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(l,m)=>{u=u.add(new Td(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}En(e,t){let r=new Nn(Sd);const i=this.wn(t,e);if(null==i)return r;const u=ZE(t);if(null!=u){const l=e.data.field(u.fieldPath);if(lg(l))for(const m of l.arrayValue.values||[])r=r.add(new Td(t.indexId,e.key,this.fn(m),i))}else r=r.add(new Td(t.indexId,e.key,Fy,i));return r}An(e,t,r,i,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,C,T,P){const V=m.getIterator(),q=w.getIterator();let oe=cf(V),Ee=cf(q);for(;oe||Ee;){let Ie=!1,dt=!1;if(oe&&Ee){const _t=C(oe,Ee);_t<0?dt=!0:_t>0&&(Ie=!0)}else null!=oe?dt=!0:Ie=!0;Ie?(T(Ee),Ee=cf(q)):dt?(P(oe),oe=cf(V)):(oe=cf(V),Ee=cf(q))}}(i,u,Sd,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.vn(e,t,r,m))}),ee.waitFor(l)}In(e){let t=1;return Vy(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Sd(l,m)).filter((l,m,w)=>!m||0!==Sd(l,w[m-1]));const i=[];i.push(e);for(const l of r){const m=Sd(l,e),w=Sd(l,t);if(0===m)i[0]=e.He();else if(m>0&&w<0)i.push(l),i.push(l.He());else if(w>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2){if(this.Pn(i[l],i[l+1]))return[];u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Fy,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Fy,[]]))}return u}Pn(e,t){return Sd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aT)}getMinOffset(e,t){return ee.mapArray(this.un(t),r=>this.cn(e,r).next(i=>i||st())).next(aT)}}function Ly(n){return Tr(n,"collectionParents")}function ec(n){return Tr(n,"indexEntries")}function V0(n){return Tr(n,"indexConfiguration")}function Vy(n){return Tr(n,"indexState")}function aT(n){yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Xv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new di(e.readTime,e.documentKey,t)}const uT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fi(e,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uD(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(T,P,V)=>(m++,V.delete()));u.push(w.next(()=>{yt(1===m)}));const C=[];for(const T of t.mutations){const P=rI(e,T.key.path,t.batchId);u.push(i.delete(P)),C.push(T.key)}return ee.waitFor(u).next(()=>C)}function Uy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}fi.DEFAULT_COLLECTION_PERCENTILE=10,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fi.DEFAULT=new fi(41943040,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fi.DISABLED=new fi(-1,0,0);class By{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.bn={}}static fe(e,t,r,i){yt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new By(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ru(e).X({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Ad(e),l=Ru(e);return l.add({}).next(m=>{yt("number"==typeof m);const w=new BI(m,t,r,i),C=function(V,q,oe){const Ee=oe.baseMutations.map(dt=>If(V.le,dt)),Ie=oe.mutations.map(dt=>If(V.le,dt));return{userId:q,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Ee,mutations:Ie}}(this.serializer,this.userId,w),T=[];let P=new Nn((V,q)=>Bt(V.canonicalString(),q.canonicalString()));for(const V of i){const q=rI(this.userId,V.key.path,m);P=P.add(V.key.path.popLast()),T.push(l.put(C)),T.push(u.put(q,bb))}return P.forEach(V=>{T.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.bn[m]=w.keys()}),ee.waitFor(T).next(()=>w)})}lookupMutationBatch(e,t){return Ru(e).get(t).next(r=>r?(yt(r.userId===this.userId),Xl(this.serializer,r)):null)}Vn(e,t){return this.bn[t]?ee.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ru(e).X({index:"userMutationsIndex",range:i},(l,m,w)=>{m.userId===this.userId&&(yt(m.batchId>=r),u=Xl(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ru(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ru(e).j("userMutationsIndex",t).next(r=>r.map(i=>Xl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=og(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Ad(e).X({range:i},(l,m,w)=>{const[C,T,P]=l,V=ao(T);if(C===this.userId&&t.path.isEqual(V))return Ru(e).get(P).next(q=>{if(!q)throw st();yt(q.userId===this.userId),u.push(Xl(this.serializer,q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Bt);const i=[];return t.forEach(u=>{const l=og(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=Ad(e).X({range:m},(C,T,P)=>{const[V,q,oe]=C,Ee=ao(q);V===this.userId&&u.path.isEqual(Ee)?r=r.add(oe):P.done()});i.push(w)}),ee.waitFor(i).next(()=>this.Sn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=og(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Nn(Bt);return Ad(e).X({range:l},(w,C,T)=>{const[P,V,q]=w,oe=ao(V);P===this.userId&&r.isPrefixOf(oe)?oe.length===i&&(m=m.add(q)):T.done()}).next(()=>this.Sn(e,m))}Sn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Ru(e).get(u).next(l=>{if(null===l)throw st();yt(l.userId===this.userId),r.push(Xl(this.serializer,l))}))}),ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return uD(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ad(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=ao(u[1]);i.push(w)}else m.done()}).next(()=>{yt(0===i.length)})})}containsKey(e,t){return lD(e,this.userId,t)}Cn(e){return U0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lD(n,e,t){const r=og(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Ad(n).X({range:u,Y:!0},(m,w,C)=>{const[T,P,V]=m;T===e&&P===i&&(l=!0),C.done()}).next(()=>l)}function Ru(n){return Tr(n,"mutations")}function Ad(n){return Tr(n,"documentMutations")}function U0(n){return Tr(n,"mutationQueues")}class xd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new xd(0)}static kn(){return new xd(-1)}}class lT{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const r=new xd(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>Et.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Mn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(r=>(r.targetCount+=1,this.Fn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Md(e).delete(t.targetId)).next(()=>this.Mn(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Md(e).X((l,m)=>{const w=Ry(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(i++,u.push(this.removeTargetData(e,w)))}).next(()=>ee.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Md(e).X((r,i)=>{const u=Ry(i);t(u)})}Mn(e){return $y(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}On(e,t){return $y(e).put("targetGlobalKey",t)}$n(e,t){return Md(e).put(Py(this.serializer,t))}Fn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ql(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Md(e).X({range:i,index:"queryTargetsIndex"},(l,m,w)=>{const C=Ry(m);_d(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Rd(e);return t.forEach(l=>{const m=Pi(l.path);i.push(u.put({targetId:r,path:m})),i.push(this.referenceDelegate.addReference(e,r,l))}),ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=Rd(e);return ee.forEach(t,u=>{const l=Pi(u.path);return ee.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Rd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Rd(e);let u=qt();return i.X({range:r,Y:!0},(l,m,w)=>{const C=ao(l[1]),T=new Ze(C);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Pi(t.path),i=IDBKeyRange.bound([r],[qE(r)],!1,!0);let u=0;return Rd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,m],w,C)=>{0!==l&&(u++,C.done())}).next(()=>u>0)}he(e,t){return Md(e).get(t).next(r=>r?Ry(r):null)}}function Md(n){return Tr(n,"targets")}function $y(n){return Tr(n,"targetGlobal")}function Rd(n){return Tr(n,"targetDocuments")}function B0([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class $0{constructor(e){this.Bn=e,this.buffer=new Nn(B0),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();B0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){jl(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield $l(r)}yield t.Gn(3e5)}))}}class cT{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(Yi.ct);const r=new $0(t);return this.Qn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.Qn.zn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Qn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(uT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uT):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let r,i,u,l,m,w,C;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),i=this.params.maximumSequenceNumbersToCollect):i=P,l=Date.now(),this.nthSequenceNumber(e,i))).next(P=>(r=P,m=Date.now(),this.removeTargets(e,r,t))).next(P=>(u=P,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(C=Date.now(),tf()<=Al.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${P} documents in `+(C-w)+`ms\nTotal Duration: ${C-T}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:P})))}}class Cx{constructor(e,t){this.db=e,this.garbageCollector=function dT(n,e){return new cT(n,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Hn(e){let t=0;return this.zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(r,i)=>t(i))}addReference(e,t,r){return jy(e,r)}removeReference(e,t,r){return jy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jy(e,t)}Yn(e,t){return function(r,i){let u=!1;return U0(r).Z(l=>lD(r,l,i).next(m=>(m&&(u=!0),ee.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Jn(e,(l,m)=>{if(m<=t){const w=this.Yn(e,l).next(C=>{if(!C)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Et.min()),Rd(e).delete([0,Pi(l.path)])))});i.push(w)}}).next(()=>ee.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jy(e,t)}Jn(e,t){const r=Rd(e);let i,u=Yi.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:C})=>{0===l?(u!==Yi.ct&&t(new Ze(ao(i)),u),u=C,i=w):u=Yi.ct}).next(()=>{u!==Yi.ct&&t(new Ze(ao(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jy(n,e){return Rd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Pi(e.path),sequenceNumber:r}));var r}class dD{constructor(){this.changes=new Zl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hT{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Cf(e).put(r)}removeEntry(e,t,r){return Cf(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],R0(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Xn(e,r)))}getEntry(e,t){let r=Un.newInvalidDocument(t);return Cf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Fg(t))},(i,u)=>{r=this.Zn(t,u)}).next(()=>r)}ts(e,t){let r={size:0,document:Un.newInvalidDocument(t)};return Cf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Fg(t))},(i,u)=>{r={document:this.Zn(t,u),size:Uy(u)}}).next(()=>r)}getEntries(e,t){let r=Fi();return this.es(e,t,(i,u)=>{const l=this.Zn(i,u);r=r.insert(i,l)}).next(()=>r)}ns(e,t){let r=Fi(),i=new xn(Ze.comparator);return this.es(e,t,(u,l)=>{const m=this.Zn(u,l);r=r.insert(u,m),i=i.insert(u,Uy(l))}).next(()=>({documents:r,ss:i}))}es(e,t,r){if(t.isEmpty())return ee.resolve();let i=new Nn(mT);t.forEach(w=>i=i.add(w));const u=IDBKeyRange.bound(Fg(i.first()),Fg(i.last())),l=i.getIterator();let m=l.getNext();return Cf(e).X({index:"documentKeyIndex",range:u},(w,C,T)=>{const P=Ze.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&mT(m,P)<0;)r(m,null),m=l.getNext();m&&m.isEqual(P)&&(r(m,C),m=l.hasNext()?l.getNext():null),m?T.G(Fg(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),R0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cf(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let C=Fi();for(const T of w){const P=this.Zn(Ze.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);P.isFoundDocument()&&(Aa(t,P)||i.has(P.key))&&(C=C.insert(P.key,P))}return C})}getAllFromCollectionGroup(e,t,r,i){let u=Fi();const l=gT(t,r),m=gT(t,di.max());return Cf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,C,T)=>{const P=this.Zn(Ze.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(P.key,P),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new bx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return pT(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}Xn(e,t){return pT(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const r=function nT(n,e){let t;if(e.document)t=XI(n.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=Cd(e.noDocument.readTime);t=Un.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ze.fromSegments(e.unknownDocument.path),i=Cd(e.unknownDocument.version);t=Un.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Vn(r[0],r[1]);return Et.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Un.newInvalidDocument(e)}}function fT(n){return new hT(n)}class bx extends dD{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new Zl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Nn((u,l)=>Bt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.os.get(u);if(t.push(this.rs.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=M0(this.rs.serializer,l);i=i.add(u.path.popLast());const C=Uy(w);r+=C-m.size,t.push(this.rs.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=M0(this.rs.serializer,l.convertToNoDocument(Et.min()));t.push(this.rs.addEntry(e,u,w))}}),i.forEach(u=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.rs.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(r=>(this.os.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:r,ss:i})=>(i.forEach((u,l)=>{this.os.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function pT(n){return Tr(n,"remoteDocumentGlobal")}function Cf(n){return Tr(n,"remoteDocumentsV14")}function Fg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gT(n,e){const t=e.documentKey.path.toArray();return[n,R0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function mT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Bt(t[u],r[u]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class Tx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yT{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&vf(r.mutation,i,Oi.empty(),Vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const i=xa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=fg();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=xa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,i){let u=Fi();const l=pg(),m=pg();return t.forEach((w,C)=>{const T=r.get(C.key);i.has(C.key)&&(void 0===T||T.mutation instanceof Ma)?u=u.insert(C.key,C):void 0!==T?(l.set(C.key,T.mutation.getFieldMask()),vf(T.mutation,C,T.mutation.getFieldMask(),Vn.now())):l.set(C.key,Oi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,T)=>l.set(C,T)),t.forEach((C,T)=>{var P;return m.set(C,new Tx(T,null!==(P=l.get(C))&&void 0!==P?P:null))}),m))}recalculateAndSaveOverlays(e,t){const r=pg();let i=new xn((l,m)=>l-m),u=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let T=r.get(w)||Oi.empty();T=m.applyToLocalView(C,T),r.set(w,T);const P=(i.get(m.batchId)||qt()).add(w);i=i.insert(m.batchId,P)})}).next(()=>{const l=[],m=i.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,T=w.value,P=v0();T.forEach(V=>{if(!u.has(V)){const q=LI(t.get(V),r.get(V));null!==q&&P.set(V,q),u=u.add(V)}}),l.push(this.documentOverlayCache.saveOverlays(e,C,P))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):wy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ee.resolve(xa());let m=-1,w=u;return l.next(C=>ee.forEach(C,(T,P)=>(m<P.largestBatchId&&(m=P.largestBatchId),u.get(T)?ee.resolve():this.remoteDocumentCache.getEntry(e,T).next(V=>{w=w.insert(T,V)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,qt())).next(T=>({batchId:m,changes:Dy(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=fg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=fg();return this.indexManager.getCollectionParents(e,i).next(l=>ee.forEach(l,m=>{const w=(C=t,T=m.child(i),new Au(T,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,T;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((T,P)=>{u=u.insert(T,P)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((m,w)=>{const C=w.getKey();null===u.get(C)&&(u=u.insert(C,Un.newInvalidDocument(C)))});let l=fg();return u.forEach((m,w)=>{const C=i.get(m);void 0!==C&&vf(C.mutation,w,Oi.empty(),Vn.now()),Aa(t,w)&&(l=l.insert(m,w))}),l})}}class Sx{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return ee.resolve(this.us.get(t))}saveBundleMetadata(e,t){var r;return this.us.set(t.id,{id:(r=t).id,version:r.version,createTime:Sr(r.createTime)}),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(r=t).name,query:Ny(r.bundledQuery),readTime:Sr(r.readTime)}),ee.resolve();var r}}class Ax{constructor(){this.overlays=new xn(Ze.comparator),this.hs=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xa();return ee.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.de(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hs.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.hs.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const i=xa(),u=t.length+1,l=new Ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&i.set(w.getKey(),w)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new xn((C,T)=>C-T);const l=this.overlays.getIterator();for(;l.hasNext();){const C=l.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let T=u.get(C.largestBatchId);null===T&&(T=xa(),u=u.insert(C.largestBatchId,T)),T.set(C.getKey(),C)}}const m=xa(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,T)=>m.set(C,T)),!(m.size()>=i)););return ee.resolve(m)}de(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.hs.get(i.largestBatchId).delete(r.key);this.hs.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new jI(t,r));let u=this.hs.get(t);void 0===u&&(u=qt(),this.hs.set(t,u)),this.hs.set(t,u.add(r.key))}}class s{constructor(){this.ls=new Nn(o.fs),this.ds=new Nn(o._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const r=new o(e,t);this.ls=this.ls.add(r),this.ds=this.ds.add(r)}ws(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gs(new o(e,t))}ys(e,t){e.forEach(r=>this.removeReference(r,t))}ps(e){const t=new Ze(new ln([])),r=new o(t,e),i=new o(t,e+1),u=[];return this.ds.forEachInRange([r,i],l=>{this.gs(l),u.push(l.key)}),u}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Ze(new ln([])),r=new o(t,e),i=new o(t,e+1);let u=qt();return this.ds.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new o(e,0),r=this.ls.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class o{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Ze.comparator(e.key,t.key)||Bt(e.Es,t.Es)}static _s(e,t){return Bt(e.Es,t.Es)||Ze.comparator(e.key,t.key)}}class a{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new Nn(o.fs)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.As;this.As++;const l=new BI(u,t,r,i);this.mutationQueue.push(l);for(const m of i)this.Rs=this.Rs.add(new o(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ps(t+1),u=i<0?0:i;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new o(t,0),i=new o(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],l=>{const m=this.vs(l.Es);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Bt);return t.forEach(i=>{const u=new o(i,0),l=new o(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.Es)})}),ee.resolve(this.bs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const l=new o(new Ze(u),0);let m=new Nn(Bt);return this.Rs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===i&&(m=m.add(w.Es)),!0)},l),ee.resolve(this.bs(m))}bs(e){const t=[];return e.forEach(r=>{const i=this.vs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){yt(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ee.forEach(t.mutations,i=>{const u=new o(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Dn(e){}containsKey(e,t){const r=new o(t,0),i=this.Rs.firstAfterOrEqual(r);return ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ee.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class c{constructor(e){this.Ss=e,this.docs=new xn(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Ss(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=Fi();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Un.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=Fi();const l=t.path,m=new Ze(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:C,value:{document:T}}=w.getNext();if(!l.isPrefixOf(C.path))break;C.path.length>l.length+1||Xv(Qv(T),r)<=0||(i.has(T.key)||Aa(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,r,i){st()}Ds(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new h(this)}getSize(e){return ee.resolve(this.size)}}class h extends dD{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.rs.addEntry(e,i)):this.rs.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class g{constructor(e){this.persistence=e,this.Cs=new Zl(t=>ql(t),_d),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.xs=0,this.Ns=new s,this.targetCount=0,this.ks=xd.Nn()}forEachTarget(e,t){return this.Cs.forEach((r,i)=>t(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.xs&&(this.xs=t),ee.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new xd(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.$n(t),ee.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Cs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Cs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),ee.waitFor(u).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Cs.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.Ns.ws(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.Ns.ys(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ns.Ts(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.Ns.containsKey(t))}}class _{constructor(e,t){this.Ms={},this.overlays={},this.Os=new Yi(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new g(this),this.indexManager=new F0,this.remoteDocumentCache=new c(r=>this.referenceDelegate.Bs(r)),this.serializer=new iD(t),this.Ls=new Sx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ax,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ms[e.toKey()];return r||(r=new a(t,this.referenceDelegate),this.Ms[e.toKey()]=r),r}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new I(this.Os.next());return this.referenceDelegate.qs(),r(i).next(u=>this.referenceDelegate.Us(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ks(e,t){return ee.or(Object.values(this.Ms).map(r=>()=>r.containsKey(e,t)))}}class I extends QE{constructor(e){super(),this.currentSequenceNumber=e}}class b{constructor(e){this.persistence=e,this.Gs=new s,this.Qs=null}static js(e){return new b(e)}get zs(){if(this.Qs)return this.Qs;throw st()}addReference(e,t,r){return this.Gs.addReference(r,t),this.zs.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Gs.removeReference(r,t),this.zs.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(i=>this.zs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.zs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.zs,r=>{const i=Ze.fromPath(r);return this.Ws(e,i).next(u=>{u||t.removeEntry(i,Et.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(r=>{r?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return ee.or([()=>ee.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class R{constructor(e){this.serializer=e}$(e,t,r,i){const u=new ig("createOrUpgrade",t);var m;r<1&&i>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nI,{unique:!0}),m.createObjectStore("documentMutations"),F(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ee.resolve();return r<3&&i>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),F(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nI,{unique:!0});const T=w.store("mutations"),P=C.map(V=>T.put(V));return ee.waitFor(P)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Js(u))),r<6&&i>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(u)))),r<7&&i>=7&&(l=l.next(()=>this.Xs(u))),r<8&&i>=8&&(l=l.next(()=>this.Zs(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ti(u))),r<11&&i>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Ob});w.createIndex("collectionPathOverlayIndex",kb,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",Fb,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:Tb});w.createIndex("documentKeyIndex",Sb),w.createIndex("collectionGroupIndex",Ab)}(e)).next(()=>this.ei(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.ni(e,u))),r<15&&i>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:sI}).createIndex("sequenceNumberIndex",Pb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Nb}).createIndex("documentKeyIndex",oI,{unique:!1})}(e))),l}Ys(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Uy(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Js(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ee.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ee.forEach(m,w=>{yt(w.userId===u.userId);const C=Xl(this.serializer,w);return uD(e,u.userId,C).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((l,m)=>{const w=new ln(l),C=[0,Pi(w)];u.push(t.get(C).next(T=>T?ee.resolve():t.put({targetId:0,path:Pi(w),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ee.waitFor(u))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:iI});const r=t.store("collectionParents"),i=new kg,u=l=>{if(i.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:Pi(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new ln(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],C)=>{const T=ao(m);return u(T.popLast())}))}ti(e){const t=e.store("targets");return t.X((r,i)=>{const u=Ry(i),l=Py(this.serializer,u);return t.put(l)})}ei(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(C=l,C.document?new Ze(ln.fromString(C.document.name).popFirst(5)):C.noDocument?Ze.fromSegments(C.noDocument.path):C.unknownDocument?Ze.fromSegments(C.unknownDocument.path):st()).path.toArray();var C;const T={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(m.put(T))}).next(()=>ee.waitFor(i))}ni(e,t){const r=t.store("mutations"),i=fT(this.serializer),u=new _(b.js,this.serializer.le);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var C;let T=null!==(C=m.get(w.userId))&&void 0!==C?C:qt();Xl(this.serializer,w).keys().forEach(P=>T=T.add(P)),m.set(w.userId,T)}),ee.forEach(m,(w,C)=>{const T=new Xn(C),P=Rg.fe(this.serializer,T),V=u.getIndexManager(T),q=By.fe(T,this.serializer,V,u.referenceDelegate);return new yT(i,q,P,V).recalculateAndSaveOverlaysForDocumentKeys(new s0(t,Yi.ct),w).next()})})}}function F(n){n.createObjectStore("targetDocuments",{keyPath:Mb}).createIndex("documentTargetsIndex",Rb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xb,{unique:!0}),n.createObjectStore("targetGlobal")}const G="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Y{constructor(e,t,r,i,u,l,m,w,C,T,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=u,this.window=l,this.document=m,this.ii=C,this.ri=T,this.oi=P,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=V=>Promise.resolve(),!Y.D())throw new Se(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Cx(this,i),this.fi=t+"main",this.serializer=new iD(w),this.di=new Wo(this.fi,this.oi,new R(this.serializer)),this.Fs=new lT(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fT(this.serializer),this.Ls=new sD,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ae.FAILED_PRECONDITION,G);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Yi(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var r=(0,pe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Le(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(jl(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return me(e).get("owner").next(t=>ee.resolve(this.Ri(t)))}vi(e){return Le(e).delete(this.clientId)}Pi(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Tr(r,"clientMetadata");return i.j().next(u=>{const l=e.Vi(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ee.forEach(m,w=>i.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Si(r.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?ee.resolve(!0):me(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Se(ae.FAILED_PRECONDITION,G);return!1}}return!(!this.networkEnabled||!this.inForeground)||Le(e).j().next(r=>void 0===this.Vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new s0(t,Yi.ct);return e.Ei(r).next(()=>e.vi(r))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(r=>this.bi(r.updateTimeMs,t)&&!this.Di(r.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>Le(e).j().next(t=>this.Vi(t,18e5).map(r=>r.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return By.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new L0(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return Rg.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.oi)?Lb:14===l?uy:13===l?r0:12===l?n0:11===l?ay:void st();var l;let m;return this.di.runTransaction(e,i,u,w=>(m=new s0(w,this.Os?this.Os.next():Yi.ct),"readwrite-primary"===t?this.Ii(m).next(C=>!!C||this.Ti(m)).next(C=>{if(!C)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new Se(ae.FAILED_PRECONDITION,YE);return r(m)}).next(C=>this.Ai(m).next(()=>C)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return me(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ae.FAILED_PRECONDITION,G)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return me(e).put("owner",t)}static D(){return Wo.D()}Ei(e){const t=me(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}bi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,zt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function me(n){return Tr(n,"owner")}function Le(n){return Tr(n,"clientMetadata")}function Ke(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ut{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Fi=i}static Bi(e,t){let r=qt(),i=qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new ut(e,t.fromCache,r,i)}}class xt{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ui(e,t).next(u=>u||this.Ki(e,t,i,r)).next(u=>u||this.Gi(e,t))}Ui(e,t){if(y0(t))return ee.resolve(null);let r=ki(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Iy(t,null,"F"),r=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=qt(...u);return this.qi.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Qi(t,m);return this.ji(t,C,l,w.readTime)?this.Ui(e,Iy(t,null,"F")):this.zi(e,C,t,w)}))})))}Ki(e,t,r,i){return y0(t)||i.isEqual(Et.min())?this.Gi(e,t):this.qi.getDocuments(e,r).next(u=>{const l=this.Qi(t,u);return this.ji(t,l,r,i)?this.Gi(e,t):(tf()<=Al.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hi(t)),this.zi(e,l,t,KE(i,-1)))})}Qi(e,t){let r=new Nn(AI(e));return t.forEach((i,u)=>{Aa(e,u)&&(r=r.add(u))}),r}ji(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Gi(e,t){return tf()<=Al.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",hi(t)),this.qi.getDocumentsMatchingQuery(e,t,di.min())}zi(e,t,r,i){return this.qi.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class xe{constructor(e,t,r,i){this.persistence=e,this.Wi=t,this.serializer=i,this.Hi=new xn(Bt),this.Ji=new Zl(u=>ql(u),_d),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(r)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yT(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function $t(n,e,t,r){return new xe(n,e,t,r)}function Bn(n,e){return er.apply(this,arguments)}function er(){return er=(0,pe.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=qt();for(const C of i){l.push(C.batchId);for(const T of C.mutations)w=w.add(T.key)}for(const C of u){m.push(C.batchId);for(const T of C.mutations)w=w.add(T.key)}return t.localDocuments.getDocuments(r,w).next(C=>({tr:C,removedBatchIds:l,addedBatchIds:m}))})})}),er.apply(this,arguments)}function Mx(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function Rx(n,e,t){let r=qt(),i=qt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Fi();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(i=i.add(m)),w.isNoDocument()&&w.version.isEqual(Et.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Fe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{er:l,nr:i}})}function SP(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hy(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Fs.getTargetData(r,e).next(u=>u?(i=u,ee.resolve(i)):t.Fs.allocateTargetId(r).next(l=>(i=new Mu(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Hi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(r.targetId,r),t.Ji.set(e,r.targetId)),r})}function Gy(n,e,t){return _T.apply(this,arguments)}function _T(){return _T=(0,pe.Z)(function*(n,e,t){const r=Ye(n),i=r.Hi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!jl(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Hi=r.Hi.remove(e),r.Ji.delete(i.target)}),_T.apply(this,arguments)}function hD(n,e,t){const r=Ye(n);let i=Et.min(),u=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,C){const T=Ye(m),P=T.Ji.get(C);return void 0!==P?ee.resolve(T.Hi.get(P)):T.Fs.getTargetData(w,C)}(r,l,ki(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Wi.getDocumentsMatchingQuery(l,e,t?i:Et.min(),t?u:qt())).next(m=>(Ox(r,SI(e),m),{documents:m,sr:u})))}function Px(n,e){const t=Ye(n),r=Ye(t.Fs),i=t.Hi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.he(u,e).next(l=>l?l.target:null))}function Nx(n,e){const t=Ye(n),r=t.Yi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Xi.getAllFromCollectionGroup(i,e,KE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Ox(t,e,i),i))}function Ox(n,e,t){let r=n.Yi.get(e)||Et.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Yi.set(e,r)}function vT(){return vT=(0,pe.Z)(function*(n,e,t,r){const i=Ye(n);let u=qt(),l=Fi();for(const C of t){const T=e.ir(C.metadata.name);C.document&&(u=u.add(T));const P=e.rr(C);P.setReadTime(e.ur(C.metadata.readTime)),l=l.insert(T,P)}const m=i.Xi.newChangeBuffer({trackRemovals:!0}),w=yield Hy(i,(C=r,ki(Wl(ln.fromString(`__bundle__/docs/${C}`)))));var C;return i.persistence.runTransaction("Apply bundle documents","readwrite",C=>Rx(C,m,l).next(T=>(m.apply(C),T)).next(T=>i.Fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>i.Fs.addMatchingKeys(C,u,w.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(C,T.er,T.nr)).next(()=>T.er)))}),vT.apply(this,arguments)}function xP(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,pe.Z)(function*(n,e,t=qt()){const r=yield Hy(n,ki(Ny(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=Sr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ls.saveNamedQuery(u,e);const m=r.withResumeToken(vr.EMPTY_BYTE_STRING,l);return i.Hi=i.Hi.insert(m.targetId,m),i.Fs.updateTargetData(u,m).next(()=>i.Fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Fs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ls.saveNamedQuery(u,e))})}),wT.apply(this,arguments)}function kx(n,e){return`firestore_clients_${n}_${e}`}function Fx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ET(n,e){return`firestore_targets_${n}_${e}`}class fD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static cr(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new Se(i.error.code,i.error.message))),l?new fD(e,t,i.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class j0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static cr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Se(r.error.code,r.error.message))),u?new j0(e,r.state,i):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Cy();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=t0(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new pD(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class IT{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new IT(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DT{constructor(){this.activeTargetIds=Cy()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CT{constructor(e,t,r,i,u){this.window=e,this.si=t,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new xn(Bt),this.started=!1,this.gr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.yr=kx(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new DT),this.Ir=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Mi();for(const i of t){if(i===e.dr)continue;const u=e.getItem(kx(e.persistenceKey,i));if(u){const l=pD.cr(i,u);l&&(e.mr=e.mr.insert(l.clientId,l))}}e.vr();const r=e.storage.getItem(e.Ar);if(r){const i=e.Pr(r);i&&e.br(i)}for(const i of e.gr)e.wr(i);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,r){this.Sr(e,t,r),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ET(this.persistenceKey,e));if(r){const i=j0.cr(e,r);i&&(t=i.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ET(this.persistenceKey,e))}updateQueryState(e,t,r){this.Nr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Dr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.yr)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ir.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.$r(i,null)}{const i=t.Fr(r.key,r.newValue);if(i)return t.$r(i.clientId,i)}}else if(t.Tr.test(r.key)){if(null!==r.newValue){const i=t.Br(r.key,r.newValue);if(i)return t.Lr(i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.qr(r.key,r.newValue);if(i)return t.Ur(i)}}else if(r.key===t.Ar){if(null!==r.newValue){const i=t.Pr(r.newValue);if(i)return t.br(i)}}else if(r.key===t.pr){const i=function(u){let l=Yi.ct;if(null!=u)try{const m=JSON.parse(u);yt("number"==typeof m),l=m}catch(m){lr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);i!==Yi.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Kr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Gr(u)))}}else t.gr.push(r)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,r){const i=new fD(this.currentUser,e,t,r),u=Fx(this.persistenceKey,this.currentUser,e);this.setItem(u,i.ar())}Dr(e){const t=Fx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,r){const i=ET(this.persistenceKey,e),u=new j0(e,t,r);this.setItem(i,u.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const r=this.Or(e);return pD.cr(r,t)}Br(e,t){const r=this.Tr.exec(e),i=Number(r[1]);return fD.cr(new Xn(void 0!==r[2]?r[2]:null),i,t)}qr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return j0.cr(i,t)}Pr(e){return IT.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),u=this.Vr(r),l=[],m=[];return u.forEach(w=>{i.has(w)||l.push(w)}),i.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.zr(l,m).then(()=>{this.mr=r})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=Cy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Lx{constructor(){this.Wr=new DT,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,r){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new DT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MP{Jr(e){}shutdown(){}}class Vx{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gD=null;function bT(){return null===gD?gD=268435456+Math.round(2147483648*Math.random()):gD++,"0x"+gD.toString(16)}const RP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PP{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const us="WebChannelConnection";class NP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,r,i,u){const l=bT(),m=this.Io(e,t);Fe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.To(w,i,u),this.Eo(e,m,w,r).then(C=>(Fe("RestConnection",`Received RPC '${e}' ${l}: `,C),C),C=>{throw Rs("RestConnection",`RPC '${e}' ${l} failed with error: `,C,"url: ",m,"request:",r),C})}Ao(e,t,r,i,u,l){return this.po(e,t,r,i,u)}To(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ef,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}Io(e,t){return`${this.wo}/v1/${t}:${RP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,r,i){const u=bT();return new Promise((l,m)=>{const w=new At;w.setWithCredentials(!0),w.listenOnce(zv.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case BE.NO_ERROR:const T=w.getResponseJson();Fe(us,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),l(T);break;case BE.TIMEOUT:Fe(us,`RPC '${e}' ${u} timed out`),m(new Se(ae.DEADLINE_EXCEEDED,"Request time out"));break;case BE.HTTP_ERROR:const P=w.getStatus();if(Fe(us,`RPC '${e}' ${u} failed with status:`,P,"response text:",w.getResponseText()),P>0){let V=w.getResponseJson();Array.isArray(V)&&(V=V[0]);const q=V?.error;if(q&&q.status&&q.message){const oe=function(Ee){const Ie=Ee.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Ie)>=0?Ie:ae.UNKNOWN}(q.status);m(new Se(oe,q.message))}else m(new Se(ae.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Se(ae.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Fe(us,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(i);Fe(us,`RPC '${e}' ${u} sending request:`,i),w.send(t,"POST",C,r,15)})}Ro(e,t,r){const i=bT(),u=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=yb(),m=Xh(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(w.xmlHttpFactory=new $E({})),this.To(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const C=u.join("");Fe(us,`Creating RPC '${e}' stream ${i}: ${C}`,w);const T=l.createWebChannel(C,w);let P=!1,V=!1;const q=new PP({io:Ee=>{V?Fe(us,`Not sending because RPC '${e}' stream ${i} is closed:`,Ee):(P||(Fe(us,`Opening RPC '${e}' stream ${i} transport.`),T.open(),P=!0),Fe(us,`RPC '${e}' stream ${i} sending:`,Ee),T.send(Ee))},ro:()=>T.close()}),oe=(Ee,Ie,dt)=>{Ee.listen(Ie,_t=>{try{dt(_t)}catch(Xe){setTimeout(()=>{throw Xe},0)}})};return oe(T,Wv.EventType.OPEN,()=>{V||Fe(us,`RPC '${e}' stream ${i} transport opened.`)}),oe(T,Wv.EventType.CLOSE,()=>{V||(V=!0,Fe(us,`RPC '${e}' stream ${i} transport closed`),q.fo())}),oe(T,Wv.EventType.ERROR,Ee=>{V||(V=!0,Rs(us,`RPC '${e}' stream ${i} transport errored:`,Ee),q.fo(new Se(ae.UNAVAILABLE,"The operation could not be completed")))}),oe(T,Wv.EventType.MESSAGE,Ee=>{var Ie;if(!V){const dt=Ee.data[0];yt(!!dt);const Xe=dt.error||(null===(Ie=dt[0])||void 0===Ie?void 0:Ie.error);if(Xe){Fe(us,`RPC '${e}' stream ${i} received error:`,Xe);const vt=Xe.status;let kt=function(pi){const lo=Ur[pi];if(void 0!==lo)return Ig(lo)}(vt),Jt=Xe.message;void 0===kt&&(kt=ae.INTERNAL,Jt="Unknown error status: "+vt+" with message "+Xe.message),V=!0,q.fo(new Se(kt,Jt)),T.close()}else Fe(us,`RPC '${e}' stream ${i} received:`,dt),q._o(dt)}}),oe(m,hx.STAT_EVENT,Ee=>{Ee.stat===qv.PROXY?Fe(us,`RPC '${e}' stream ${i} detected buffering proxy`):Ee.stat===qv.NOPROXY&&Fe(us,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{q.lo()},0),q}}function Ux(){return typeof window<"u"?window:null}function mD(){return typeof document<"u"?document:null}function H0(n){return new eT(n,!0)}class TT{constructor(e,t,r=1e3,i=1.5,u=6e4){this.si=e,this.timerId=t,this.vo=r,this.Po=i,this.bo=u,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class Bx{constructor(e,t,r,i,u,l,m,w){this.si=e,this.Mo=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new TT(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,pe.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,pe.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Wo(),r.Ho(),r.Lo.cancel(),r.$o++,4!==e?r.Lo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.Lo.Co()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Jo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.$o===t&&this.Xo(r,i)},r=>{e(()=>{const i=new Se(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Zo(i)})})}Xo(e,t){const r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{r(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(i=>{r(()=>this.Zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,pe.Z)(function*(){e.state=0,e.start()}))}Zo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OP extends Bx{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function JI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:st(),i=e.targetChange.targetIds||[],u=function(w,C){return w.useProto3Json?(yt(void 0===C||"string"==typeof C),vr.fromBase64String(C||"")):(yt(void 0===C||C instanceof Uint8Array),vr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const C=void 0===w.code?ae.UNKNOWN:Ig(w.code);return new Se(C,w.message||"")}(l);t=new qI(r,i,u,m||null)}else if("documentChange"in e){const r=e.documentChange,i=Ra(n,r.document.name),u=Sr(r.document.updateTime),l=r.document.createTime?Sr(r.document.createTime):Et.min(),m=new Jr({mapValue:{fields:r.document.fields}}),w=Un.newFoundDocument(i,u,l,m);t=new D0(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,i=Ra(n,r.document),u=r.readTime?Sr(r.readTime):Et.min(),l=Un.newNoDocument(i,u);t=new D0([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ra(n,r.document);t=new D0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:i=0,unchangedNames:u}=r,l=new yx(i,u);t=new zI(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Et.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?Sr(u.readTime):Et.min()}(e);return this.listener.eu(t,r)}nu(e){const t={};t.database=Ag(this.serializer),t.addTarget=function(i,u){let l;const m=u.target;if(l=pf(m)?{documents:S0(i,m)}:{query:A0(i,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=C0(i,u.resumeToken);const w=WI(i,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(Et.min())>0){l.readTime=Ef(i,u.snapshotVersion.toTimestamp());const w=WI(i,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function tT(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.zo(t)}su(e){const t={};t.database=Ag(this.serializer),t.removeTarget=e,this.zo(t)}}class kP extends Bx{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function eD(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,i){let u=Sr(r.updateTime?r.updateTime:i);return u.isEqual(Et.min())&&(u=Sr(i)),new FI(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.uu(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Ag(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>If(this.serializer,r))};this.zo(t)}}class FP extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.hu=!1}lu(){if(this.hu)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.po(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Se(ae.UNKNOWN,i.toString())})}Ao(e,t,r,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.Ao(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(ae.UNKNOWN,u.toString())})}terminate(){this.hu=!0}}class VP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(lr(t),this.wu=!1):Fe("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class UP{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=u,this.vu.Jr(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;bf(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(C){const T=Ye(C);T.Au.add(4),yield zy(T),T.Pu.set("Unknown"),T.Au.delete(4),yield G0(T)}),function(C){return w.apply(this,arguments)})(l))}))}),this.Pu=new VP(r,i)}}function G0(n){return AT.apply(this,arguments)}function AT(){return AT=(0,pe.Z)(function*(n){if(bf(n))for(const e of n.Ru)yield e(!0)}),AT.apply(this,arguments)}function zy(n){return xT.apply(this,arguments)}function xT(){return xT=(0,pe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),xT.apply(this,arguments)}function yD(n,e){const t=Ye(n);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),PT(t)?RT(t):Wy(t).Uo()&&MT(t,e))}function z0(n,e){const t=Ye(n),r=Wy(t);t.Eu.delete(e),r.Uo()&&$x(t,e),0===t.Eu.size&&(r.Uo()?r.Qo():bf(t)&&t.Pu.set("Unknown"))}function MT(n,e){if(n.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wy(n).nu(e)}function $x(n,e){n.bu.Lt(e),Wy(n).su(e)}function RT(n){n.bu=new Kb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),he:e=>n.Eu.get(e)||null,oe:()=>n.datastore.serializer.databaseId}),Wy(n).start(),n.Pu.mu()}function PT(n){return bf(n)&&!Wy(n).qo()&&n.Eu.size>0}function bf(n){return 0===Ye(n).Au.size}function jx(n){n.bu=void 0}function BP(n){return NT.apply(this,arguments)}function NT(){return NT=(0,pe.Z)(function*(n){n.Eu.forEach((e,t)=>{MT(n,e)})}),NT.apply(this,arguments)}function $P(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,pe.Z)(function*(n,e){jx(n),PT(n)?(n.Pu.pu(e),RT(n)):n.Pu.set("Unknown")}),OT.apply(this,arguments)}function jP(n,e,t){return kT.apply(this,arguments)}function kT(){return kT=(0,pe.Z)(function*(n,e,t){if(n.Pu.set("Online"),e instanceof qI&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(i,u){const l=u.cause;for(const m of u.targetIds)i.Eu.has(m)&&(yield i.remoteSyncer.rejectListen(m,l),i.Eu.delete(m),i.bu.removeTarget(m))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _D(n,r)}else if(e instanceof D0?n.bu.Wt(e):e instanceof zI?n.bu.ee(e):n.bu.Yt(e),!t.isEqual(Et.min()))try{const r=yield Mx(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.bu.ue(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=i.Eu.get(w);C&&i.Eu.set(w,C.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const C=i.Eu.get(m);if(!C)return;i.Eu.set(m,C.withResumeToken(vr.EMPTY_BYTE_STRING,C.snapshotVersion)),$x(i,m);const T=new Mu(C.target,m,w,C.sequenceNumber);MT(i,T)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield _D(n,r)}var r}),kT.apply(this,arguments)}function _D(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,pe.Z)(function*(n,e,t){if(!jl(e))throw e;n.Au.add(1),yield zy(n),n.Pu.set("Offline"),t||(t=()=>Mx(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Au.delete(1),yield G0(n)}))}),FT.apply(this,arguments)}function Hx(n,e){return e().catch(t=>_D(n,t,e))}function qy(n){return LT.apply(this,arguments)}function LT(){return LT=(0,pe.Z)(function*(n){const e=Ye(n),t=Tf(e);let r=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;HP(e);)try{const i=yield SP(e.localStore,r);if(null===i){0===e.Tu.length&&t.Qo();break}r=i.batchId,GP(e,i)}catch(i){yield _D(e,i)}Gx(e)&&zx(e)}),LT.apply(this,arguments)}function HP(n){return bf(n)&&n.Tu.length<10}function GP(n,e){n.Tu.push(e);const t=Tf(n);t.Uo()&&t.ru&&t.ou(e.mutations)}function Gx(n){return bf(n)&&!Tf(n).qo()&&n.Tu.length>0}function zx(n){Tf(n).start()}function zP(n){return VT.apply(this,arguments)}function VT(){return VT=(0,pe.Z)(function*(n){Tf(n).au()}),VT.apply(this,arguments)}function qP(n){return UT.apply(this,arguments)}function UT(){return UT=(0,pe.Z)(function*(n){const e=Tf(n);for(const t of n.Tu)e.ou(t.mutations)}),UT.apply(this,arguments)}function WP(n,e,t){return BT.apply(this,arguments)}function BT(){return BT=(0,pe.Z)(function*(n,e,t){const r=n.Tu.shift(),i=$I.from(r,e,t);yield Hx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qy(n)}),BT.apply(this,arguments)}function ZP(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,pe.Z)(function*(n,e){var t;e&&Tf(n).ru&&(yield(t=(0,pe.Z)(function*(r,i){if(Wb(u=i.code)&&u!==ae.ABORTED){const l=r.Tu.shift();Tf(r).Go(),yield Hx(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield qy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),Gx(n)&&zx(n)}),$T.apply(this,arguments)}function qx(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,pe.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=bf(t);t.Au.add(3),yield zy(t),r&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield G0(t)}),jT.apply(this,arguments)}function HT(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,pe.Z)(function*(n,e){const t=Ye(n);e?(t.Au.delete(2),yield G0(t)):e||(t.Au.add(2),yield zy(t),t.Pu.set("Unknown"))}),GT.apply(this,arguments)}function Wy(n){return n.Vu||(n.Vu=function(e,t,r){const i=Ye(e);return i.lu(),new OP(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:BP.bind(null,n),co:$P.bind(null,n),eu:jP.bind(null,n)}),n.Ru.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Vu.Go(),PT(n)?RT(n):n.Pu.set("Unknown")):(yield n.Vu.stop(),jx(n))});return function(t){return e.apply(this,arguments)}}())),n.Vu}function Tf(n){return n.Su||(n.Su=function(e,t,r){const i=Ye(e);return i.lu(),new kP(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:zP.bind(null,n),co:ZP.bind(null,n),cu:qP.bind(null,n),uu:WP.bind(null,n)}),n.Ru.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Su.Go(),yield qy(n)):(yield n.Su.stop(),n.Tu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Tu.length} pending writes`),n.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Su}class zT{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,m=new zT(e,t,l,i,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(n,e){if(lr("AsyncQueue",`${e}: ${n}`),jl(n))return new Se(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Ky{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=fg(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new Ky(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ky)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ky;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Wx{constructor(){this.Du=new xn(Ze.comparator)}track(e){const t=e.doc.key,r=this.Du.get(t);r?0!==e.type&&3===r.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==r.type?this.Du=this.Du.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Du=this.Du.remove(t):1===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):st():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yy{constructor(e,t,r,i,u,l,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Yy(e,t,Ky.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class KP{constructor(){this.xu=void 0,this.listeners=[]}}class YP{constructor(){this.queries=new Zl(e=>TI(e),gf),this.onlineState="Unknown",this.Nu=new Set}}function qT(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,pe.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new KP),i)try{u.xu=yield t.onListen(r)}catch(l){const m=Zy(l,`Initialization of query '${hi(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.ku(t.onlineState),u.xu&&e.Mu(u.xu)&&YT(t)}),WT.apply(this,arguments)}function ZT(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,pe.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),KT.apply(this,arguments)}function QP(n,e){const t=Ye(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const m of l.listeners)m.Mu(i)&&(r=!0);l.xu=i}}r&&YT(t)}function XP(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function YT(n){n.Nu.forEach(e=>{e.next()})}class QT{constructor(e,t,r){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}Mu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=Yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class JP{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class Zx{constructor(e){this.serializer=e}ir(e){return Ra(this.serializer,e)}rr(e){return e.metadata.exists?XI(this.serializer,e.document,!1):Un.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Sr(e)}}class eN{constructor(e,t,r){this.Qu=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kx(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const r=ln.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,r=new Zx(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.ir(i.metadata.name);for(const l of i.metadata.queries){const m=(t.get(l)||qt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function AP(n,e,t,r){return vT.apply(this,arguments)}(e.localStore,new Zx(e.serializer),e.documents,e.Qu.id),r=e.zu(e.documents);for(const i of e.queries)yield xP(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function Kx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Yx{constructor(e){this.key=e}}class Qx{constructor(e){this.key=e}}class Xx{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=qt(),this.mutatedKeys=qt(),this.Zu=AI(e),this.tc=new Ky(this.Zu)}get ec(){return this.Ju}nc(e,t){const r=t?t.sc:new Wx,i=t?t.tc:this.tc;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,m=!1;const w="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,C="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,P)=>{const V=i.get(T),q=Aa(this.query,P)?P:null,oe=!!V&&this.mutatedKeys.has(V.key),Ee=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Ie=!1;V&&q?V.data.isEqual(q.data)?oe!==Ee&&(r.track({type:3,doc:q}),Ie=!0):this.ic(V,q)||(r.track({type:2,doc:q}),Ie=!0,(w&&this.Zu(q,w)>0||C&&this.Zu(q,C)<0)&&(m=!0)):!V&&q?(r.track({type:0,doc:q}),Ie=!0):V&&!q&&(r.track({type:1,doc:V}),Ie=!0,(w||C)&&(m=!0)),Ie&&(q?(l=l.add(q),u=Ee?u.add(T):u.delete(T)):(l=l.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tc:l,sc:r,ji:m,mutatedKeys:u}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const u=e.sc.Cu();u.sort((C,T)=>function(P,V){const q=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return q(P)-q(V)}(C.type,T.type)||this.Zu(C.doc,T.doc)),this.rc(r);const l=t?this.oc():[],m=0===this.Xu.size&&this.current?1:0,w=m!==this.Yu;return this.Yu=m,0!==u.length||w?{snapshot:new Yy(this.query,e.tc,i,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),uc:l}:{uc:l}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Wx,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=qt(),this.tc.forEach(r=>{this.cc(r.key)&&(this.Xu=this.Xu.add(r.key))});const t=[];return e.forEach(r=>{this.Xu.has(r)||t.push(new Qx(r))}),this.Xu.forEach(r=>{e.has(r)||t.push(new Yx(r))}),t}ac(e){this.Ju=e.sr,this.Xu=qt();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return Yy.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class tN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nN{constructor(e){this.key=e,this.lc=!1}}class rN{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.fc={},this.dc=new Zl(m=>TI(m),gf),this._c=new Map,this.wc=new Set,this.mc=new xn(Ze.comparator),this.gc=new Map,this.yc=new s,this.Ic={},this.Tc=new Map,this.Ec=xd.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function iN(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,pe.Z)(function*(n,e){const t=ES(n);let r,i;const u=t.dc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.hc();else{const l=yield Hy(t.localStore,ki(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield JT(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&yD(t.remoteStore,l)}return i}),XT.apply(this,arguments)}function JT(n,e,t,r,i){return eS.apply(this,arguments)}function eS(){return eS=(0,pe.Z)(function*(n,e,t,r,i){n.Rc=(P,V,q)=>{return(oe=(0,pe.Z)(function*(Ee,Ie,dt,_t){let Xe=Ie.view.nc(dt);Xe.ji&&(Xe=yield hD(Ee.localStore,Ie.query,!1).then(({documents:Jt})=>Ie.view.nc(Jt,Xe)));const vt=_t&&_t.targetChanges.get(Ie.targetId),kt=Ie.view.applyChanges(Xe,Ee.isPrimaryClient,vt);return cS(Ee,Ie.targetId,kt.uc),kt.snapshot}),function(Ee,Ie,dt,_t){return oe.apply(this,arguments)})(n,P,V,q);var oe};const u=yield hD(n.localStore,e,!0),l=new Xx(e,u.sr),m=l.nc(u.documents),w=Ay.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),C=l.applyChanges(m,n.isPrimaryClient,w);cS(n,t,C.uc);const T=new tN(e,t,l);return n.dc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),eS.apply(this,arguments)}function sN(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,pe.Z)(function*(n,e){const t=Ye(n),r=t.dc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!gf(u,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),z0(t.remoteStore,r.targetId),Qy(t,r.targetId)}).catch($l))):(Qy(t,r.targetId),yield Gy(t.localStore,r.targetId,!0))}),tS.apply(this,arguments)}function nS(){return nS=(0,pe.Z)(function*(n,e,t){const r=IS(n);try{const i=yield function(u,l){const m=Ye(u),w=Vn.now(),C=l.reduce((V,q)=>V.add(q.key),qt());let T,P;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let q=Fi(),oe=qt();return m.Xi.getEntries(V,C).next(Ee=>{q=Ee,q.forEach((Ie,dt)=>{dt.isValidDocument()||(oe=oe.add(Ie))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,q)).next(Ee=>{T=Ee;const Ie=[];for(const dt of l){const _t=qb(dt,T.get(dt.key).overlayedDocument);null!=_t&&Ie.push(new Ma(dt.key,_t,c0(_t.value.mapValue),zn.exists(!0)))}return m.mutationQueue.addMutationBatch(V,w,Ie,l)}).next(Ee=>{P=Ee;const Ie=Ee.applyToLocalDocumentSet(T,oe);return m.documentOverlayCache.saveOverlays(V,Ee.batchId,Ie)})}).then(()=>({batchId:P.batchId,changes:Dy(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,m){let w=u.Ic[u.currentUser.toKey()];w||(w=new xn(Bt)),w=w.insert(l,m),u.Ic[u.currentUser.toKey()]=w}(r,i.batchId,t),yield Pd(r,i.changes),yield qy(r.remoteStore)}catch(i){const u=Zy(i,"Failed to persist write");t.reject(u)}}),nS.apply(this,arguments)}function Jx(n,e){return rS.apply(this,arguments)}function rS(){return rS=(0,pe.Z)(function*(n,e){const t=Ye(n);try{const r=yield function TP(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Xi.newChangeBuffer({trackRemovals:!0});i=t.Hi;const m=[];e.targetChanges.forEach((T,P)=>{const V=i.get(P);if(!V)return;m.push(t.Fs.removeMatchingKeys(u,T.removedDocuments,P).next(()=>t.Fs.addMatchingKeys(u,T.addedDocuments,P)));let q=V.withSequenceNumber(u.currentSequenceNumber);var oe,Ee,Ie;null!==e.targetMismatches.get(P)?q=q.withResumeToken(vr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,r)),i=i.insert(P,q),Ee=q,Ie=T,(0===(oe=V).resumeToken.approximateByteSize()||Ee.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&m.push(t.Fs.updateTargetData(u,q))});let w=Fi(),C=qt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(Rx(u,l,e.documentUpdates).next(T=>{w=T.er,C=T.nr})),!r.isEqual(Et.min())){const T=t.Fs.getLastRemoteSnapshotVersion(u).next(P=>t.Fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return ee.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Hi=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.gc.get(u);l&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.lc=!0:i.modifiedDocuments.size>0?yt(l.lc):i.removedDocuments.size>0&&(yt(l.lc),l.lc=!1))}),yield Pd(t,r,e)}catch(r){yield $l(r)}}),rS.apply(this,arguments)}function eM(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.dc.forEach((u,l)=>{const m=l.view.ku(e);m.snapshot&&i.push(m.snapshot)}),function(u,l){const m=Ye(u);m.onlineState=l;let w=!1;m.queries.forEach((C,T)=>{for(const P of T.listeners)P.ku(l)&&(w=!0)}),w&&YT(m)}(r.eventManager,e),i.length&&r.fc.eu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aN(n,e,t){return iS.apply(this,arguments)}function iS(){return iS=(0,pe.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.gc.get(e),u=i&&i.key;if(u){let l=new xn(Ze.comparator);l=l.insert(u,Un.newNoDocument(u,Et.min()));const m=qt().add(u),w=new Tg(Et.min(),new Map,new xn(Bt),l,m);yield Jx(r,w),r.mc=r.mc.remove(u),r.gc.delete(e),dS(r)}else yield Gy(r.localStore,e,!1).then(()=>Qy(r,e,t)).catch($l)}),iS.apply(this,arguments)}function uN(n,e){return sS.apply(this,arguments)}function sS(){return sS=(0,pe.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield function xx(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Xi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,C){const T=w.batch,P=T.keys();let V=ee.resolve();return P.forEach(q=>{V=V.next(()=>C.getEntry(m,q)).next(oe=>{const Ee=w.docVersions.get(q);yt(null!==Ee),oe.version.compareTo(Ee)<0&&(T.applyToRemoteDocument(oe,w),oe.isValidDocument()&&(oe.setReadTime(w.commitVersion),C.addEntry(oe)))})}),V.next(()=>l.mutationQueue.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=qt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);lS(t,r,null),uS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pd(t,i)}catch(i){yield $l(i)}}),sS.apply(this,arguments)}function lN(n,e,t){return oS.apply(this,arguments)}function oS(){return oS=(0,pe.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(u,l){const m=Ye(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,l).next(T=>(yt(null!==T),C=T.keys(),m.mutationQueue.removeMutationBatch(w,T))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);lS(r,e,t),uS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pd(r,i)}catch(i){yield $l(i)}}),oS.apply(this,arguments)}function aS(){return aS=(0,pe.Z)(function*(n,e){const t=Ye(n);bf(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ye(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Tc.get(r)||[];i.push(e),t.Tc.set(r,i)}catch(r){const i=Zy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),aS.apply(this,arguments)}function uS(n,e){(n.Tc.get(e)||[]).forEach(t=>{t.resolve()}),n.Tc.delete(e)}function lS(n,e,t){const r=Ye(n);let i=r.Ic[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Ic[r.currentUser.toKey()]=i}}function Qy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.dc.delete(r),t&&n.fc.vc(r,t);n._c.delete(e),n.isPrimaryClient&&n.yc.ps(e).forEach(r=>{n.yc.containsKey(r)||tM(n,r)})}function tM(n,e){n.wc.delete(e.path.canonicalString());const t=n.mc.get(e);null!==t&&(z0(n.remoteStore,t),n.mc=n.mc.remove(e),n.gc.delete(t),dS(n))}function cS(n,e,t){for(const r of t)r instanceof Yx?(n.yc.addReference(r.key,e),dN(n,r)):r instanceof Qx?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.yc.removeReference(r.key,e),n.yc.containsKey(r.key)||tM(n,r.key)):st()}function dN(n,e){const t=e.key,r=t.path.canonicalString();n.mc.get(t)||n.wc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.wc.add(r),dS(n))}function dS(n){for(;n.wc.size>0&&n.mc.size<n.maxConcurrentLimboResolutions;){const e=n.wc.values().next().value;n.wc.delete(e);const t=new Ze(ln.fromString(e)),r=n.Ec.next();n.gc.set(r,new nN(t)),n.mc=n.mc.insert(t,r),yD(n.remoteStore,new Mu(ki(Wl(t.path)),r,"TargetPurposeLimboResolution",Yi.ct))}}function Pd(n,e,t){return hS.apply(this,arguments)}function hS(){return hS=(0,pe.Z)(function*(n,e,t){const r=Ye(n),i=[],u=[],l=[];var m;r.dc.isEmpty()||(r.dc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){i.push(C);const T=ut.Bi(w.targetId,C);u.push(T)}}))}),yield Promise.all(l),r.fc.eu(i),yield(m=(0,pe.Z)(function*(w,C){const T=Ye(w);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>ee.forEach(C,V=>ee.forEach(V.$i,q=>T.persistence.referenceDelegate.addReference(P,V.targetId,q)).next(()=>ee.forEach(V.Fi,q=>T.persistence.referenceDelegate.removeReference(P,V.targetId,q)))))}catch(P){if(!jl(P))throw P;Fe("LocalStore","Failed to update sequence numbers: "+P)}for(const P of C){const V=P.targetId;if(!P.fromCache){const q=T.Hi.get(V),Ee=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);T.Hi=T.Hi.insert(V,Ee)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),hS.apply(this,arguments)}function hN(n,e){return fS.apply(this,arguments)}function fS(){return fS=(0,pe.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield Bn(t.localStore,e);t.currentUser=e,(i=t).Tc.forEach(l=>{l.forEach(m=>{m.reject(new Se(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Tc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pd(t,r.tr)}var i}),fS.apply(this,arguments)}function fN(n,e){const t=Ye(n),r=t.gc.get(e);if(r&&r.lc)return qt().add(r.key);{let i=qt();const u=t._c.get(e);if(!u)return i;for(const l of u){const m=t.dc.get(l);i=i.unionWith(m.view.ec)}return i}}function pN(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,pe.Z)(function*(n,e){const t=Ye(n),r=yield hD(t.localStore,e.query,!0),i=e.view.ac(r);return t.isPrimaryClient&&cS(t,e.targetId,i.uc),i}),pS.apply(this,arguments)}function gN(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,pe.Z)(function*(n,e){const t=Ye(n);return Nx(t.localStore,e).then(r=>Pd(t,r))}),gS.apply(this,arguments)}function mN(n,e,t,r){return mS.apply(this,arguments)}function mS(){return mS=(0,pe.Z)(function*(n,e,t,r){const i=Ye(n),u=yield function(l,m){const w=Ye(l),C=Ye(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",T=>C.Vn(T,m).next(P=>P?w.localDocuments.getDocuments(T,P):ee.resolve(null)))}(i.localStore,e);var m;null!==u?("pending"===t?yield qy(i.remoteStore):"acknowledged"===t||"rejected"===t?(lS(i,e,r||null),uS(i,e),m=e,Ye(Ye(i.localStore).mutationQueue).Dn(m)):st(),yield Pd(i,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),mS.apply(this,arguments)}function yS(){return yS=(0,pe.Z)(function*(n,e){const t=Ye(n);if(ES(t),IS(t),!0===e&&!0!==t.Ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield nM(t,r.toArray());t.Ac=!0,yield HT(t.remoteStore,!0);for(const u of i)yD(t.remoteStore,u)}else if(!1===e&&!1!==t.Ac){const r=[];let i=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Qy(t,l),Gy(t.localStore,l,!0))),z0(t.remoteStore,l)}),yield i,yield nM(t,r),function(u){const l=Ye(u);l.gc.forEach((m,w)=>{z0(l.remoteStore,w)}),l.yc.Is(),l.gc=new Map,l.mc=new xn(Ze.comparator)}(t),t.Ac=!1,yield HT(t.remoteStore,!1)}}),yS.apply(this,arguments)}function nM(n,e,t){return _S.apply(this,arguments)}function _S(){return _S=(0,pe.Z)(function*(n,e,t){const r=Ye(n),i=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield Hy(r.localStore,ki(w[0]));for(const C of w){const T=r.dc.get(C),P=yield pN(r,T);P.snapshot&&u.push(P.snapshot)}}else{const C=yield Px(r.localStore,l);m=yield Hy(r.localStore,C),yield JT(r,rM(C),l,!1,m.resumeToken)}i.push(m)}return r.fc.eu(u),i}),_S.apply(this,arguments)}function rM(n){return m0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _N(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Mi()}function vN(n,e,t,r){return vS.apply(this,arguments)}function vS(){return vS=(0,pe.Z)(function*(n,e,t,r){const i=Ye(n);if(i.Ac)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Nx(i.localStore,SI(u[0])),m=Tg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,vr.EMPTY_BYTE_STRING);yield Pd(i,l,m);break}case"rejected":yield Gy(i.localStore,e,!0),Qy(i,e,r);break;default:st()}}),vS.apply(this,arguments)}function wN(n,e,t){return wS.apply(this,arguments)}function wS(){return wS=(0,pe.Z)(function*(n,e,t){const r=ES(n);if(r.Ac){for(const i of e){if(r._c.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const u=yield Px(r.localStore,i),l=yield Hy(r.localStore,u);yield JT(r,rM(u),l.targetId,!1,l.resumeToken),yD(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield Gy(r.localStore,i,!1).then(()=>{z0(r.remoteStore,i),Qy(r,i)}).catch($l))}}),wS.apply(this,arguments)}function ES(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aN.bind(null,e),e.fc.eu=QP.bind(null,e.eventManager),e.fc.vc=XP.bind(null,e.eventManager),e}function IS(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lN.bind(null,e),e}class q0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.serializer=H0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $t(this.persistence,new xt,e.initialUser,this.serializer)}createPersistence(e){return new _(b.js,this.serializer)}createSharedClientState(e){return new Lx}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class DS extends q0{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield IS(r.bc.syncEngine),yield qy(r.bc.remoteStore),yield r.persistence.pi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return $t(this.persistence,new xt,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new cD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Db(t,this.persistence);return new eI(e.asyncQueue,r)}createPersistence(e){const t=Ke(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fi.withCacheSize(this.cacheSizeBytes):fi.DEFAULT;return new Y(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ux(),mD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Lx}}class iM extends DS{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const i=r.bc.syncEngine;r.sharedClientState instanceof CT&&(r.sharedClientState.syncEngine={Qr:mN.bind(null,i),jr:vN.bind(null,i),zr:wN.bind(null,i),Mi:_N.bind(null,i),Gr:gN.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.pi(function(){var u=(0,pe.Z)(function*(l){yield function yN(n,e){return yS.apply(this,arguments)}(r.bc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Ux();if(!CT.D(t))throw new Se(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ke(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Xy{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>eM(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=hN.bind(null,r.syncEngine),yield HT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new YP}createDatastore(e){const t=H0(e.databaseInfo.databaseId),r=new NP(e.databaseInfo);return new FP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=m=>eM(this.syncEngine,m,0),l=Vx.D()?new Vx:new MP,new UP(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,m,w,C){const T=new rN(r,i,u,l,m,w);return C&&(T.Ac=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=Ye(t);Fe("RemoteStore","RemoteStore shutting down."),r.Au.add(5),yield zy(r),r.vu.shutdown(),r.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function sM(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class DN{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(r=>{r&&r.Gu()?this.metadata.resolve(r.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Ku)}`))},r=>this.metadata.reject(r))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const r=e.Cc.decode(t),i=Number(r);isNaN(i)&&e.kc(`length string (${r}) is not valid number`);const u=yield e.Mc(i);return new JP(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,pe.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Mc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const r=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class CN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,pe.Z)(function*(u,l){const m=Ye(u),w=Ag(m.serializer)+"/documents",C={documents:l.map(q=>Id(m.serializer,q))},T=yield m.Ao("BatchGetDocuments",w,C,l.length),P=new Map;T.forEach(q=>{const oe=function b0(n,e){return"found"in e?function(t,r){yt(!!r.found);const i=Ra(t,r.found.name),u=Sr(r.found.updateTime),l=r.found.createTime?Sr(r.found.createTime):Et.min(),m=new Jr({mapValue:{fields:r.found.fields}});return Un.newFoundDocument(i,u,l,m)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const i=Ra(t,r.missing),u=Sr(r.readTime);return Un.newNoDocument(i,u)}(n,e):st()}(m.serializer,q);P.set(oe.key.toString(),oe)});const V=[];return l.forEach(q=>{const oe=P.get(q.toString());yt(!!oe),V.push(oe)}),V}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Eg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ze.fromPath(i);e.mutations.push(new Sy(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(i,u){const l=Ye(i),m=Ag(l.serializer)+"/documents",w={writes:u.map(C=>If(l.serializer,C))};yield l.po("Commit",m,w)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?zn.exists(!1):zn.updateTime(t):zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Se(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zn.updateTime(t)}return zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bN{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Fc=r.maxAttempts,this.Lo=new TT(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,pe.Z)(function*(){const t=new CN(e.datastore),r=e.Lc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.qc(u)}))}).catch(i=>{e.qc(i)})}))}Lc(e){try{const t=this.updateFunction(e);return!sg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Wb(t)}return!1}}class TN{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xn.UNAUTHENTICATED,this.clientId=rf.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,pe.Z)(function*(m){Fe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function wD(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,pe.Z)(function*(u){r.isEqual(u)||(yield Bn(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),CS.apply(this,arguments)}function bS(n,e){return TS.apply(this,arguments)}function TS(){return TS=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield SS(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>qx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>qx(e.remoteStore,u)),n._onlineComponents=e}),TS.apply(this,arguments)}function oM(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function SS(n){return AS.apply(this,arguments)}function AS(){return AS=(0,pe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!oM(t))throw t;Rs("Error using user provided cache. Falling back to memory cache: "+t),yield wD(n,new q0)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield wD(n,new q0);return n._offlineComponents}),AS.apply(this,arguments)}function ED(n){return xS.apply(this,arguments)}function xS(){return xS=(0,pe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield bS(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield bS(n,new Xy))),n._onlineComponents}),xS.apply(this,arguments)}function aM(n){return SS(n).then(e=>e.persistence)}function ID(n){return SS(n).then(e=>e.localStore)}function uM(n){return ED(n).then(e=>e.remoteStore)}function MS(n){return ED(n).then(e=>e.syncEngine)}function Jy(n){return RS.apply(this,arguments)}function RS(){return RS=(0,pe.Z)(function*(n){const e=yield ED(n),t=e.eventManager;return t.onListen=iN.bind(null,e.syncEngine),t.onUnlisten=sN.bind(null,e.syncEngine),t}),RS.apply(this,arguments)}function cM(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,u,l,m,w){const C=new vD({next:P=>{u.enqueueAndForget(()=>ZT(i,T));const V=P.docs.has(l);!V&&P.fromCache?w.reject(new Se(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&P.fromCache&&m&&"server"===m.source?w.reject(new Se(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),T=new QT(Wl(l.path),C,{includeMetadataChanges:!0,Uu:!0});return qT(i,T)}(yield Jy(n),n.asyncQueue,e,t,r)})),r.promise}function dM(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,u,l,m,w){const C=new vD({next:P=>{u.enqueueAndForget(()=>ZT(i,T)),P.fromCache&&"server"===m.source?w.reject(new Se(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),T=new QT(l,C,{includeMetadataChanges:!0,Uu:!0});return qT(i,T)}(yield Jy(n),n.asyncQueue,e,t,r)})),r.promise}const hM=new Map;function PS(n,e,t){if(!t)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fM(n,e,t,r){if(!0===e&&!0===r)throw new Se(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pM(n){if(!Ze.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gM(n){if(Ze.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function DD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=DD(n);throw new Se(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mM(n,e){if(e<=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class yM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class W0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Se(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vb;switch(t.type){case"firstParty":return new GE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Se(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hM.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),hM.delete(e),t.terminate())}(this),Promise.resolve()}}class tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class tc extends Qi{constructor(e,t,r){super(e,t,Wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new Ze(e))}withConverter(e){return new tc(this.firestore,e,this._path)}}function vM(n,e,...t){if(n=(0,zt.m9)(n),PS("collection","path",e),n instanceof W0){const r=ln.fromString(e,...t);return gM(r),new tc(n,null,r)}{if(!(n instanceof tr||n instanceof tc))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return gM(r),new tc(n.firestore,null,r)}}function CD(n,e,...t){if(n=(0,zt.m9)(n),1===arguments.length&&(e=rf.A()),PS("doc","path",e),n instanceof W0){const r=ln.fromString(e,...t);return pM(r),new tr(n,null,new Ze(r))}{if(!(n instanceof tr||n instanceof tc))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return pM(r),new tr(n.firestore,n instanceof tc?n.converter:null,new Ze(r))}}function wM(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),(n instanceof tr||n instanceof tc)&&(e instanceof tr||e instanceof tc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function NS(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),n instanceof Qi&&e instanceof Qi&&n.firestore===e.firestore&&gf(n._query,e._query)&&n.converter===e.converter}class FN{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new TT(this,"async_queue_retry"),this.Yc=()=>{const t=mD();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=mD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=mD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new Vr;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!jl(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(r=>{throw this.zc=r,this.Wc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Wc=!1,r))));return this.Kc=t,t}enqueueAfterDelay(e,t,r){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const i=zT.createAndSchedule(this,e,t,r,u=>this.ea(u));return this.jc.push(i),i}Xc(){this.zc&&st()}verifyOperationInProgress(){}na(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function OS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class LN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends W0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new FN,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||EM(this),this._firestoreClient.terminate()}}function Br(n){return n._firestoreClient||EM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function EM(n){var e,t,r;const i=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Vb(n._databaseId,m,n._persistenceKey,(C=i).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var m,C;n._firestoreClient=new TN(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function IM(n,e,t){const r=new Vr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield wD(n,t),yield bS(n,e),r.resolve()}catch(i){const u=i;if(!oM(u))throw u;Rs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function DM(n){if(n._initialized||n._terminated)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(vr.fromBase64String(e))}catch(t){throw new Se(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nc(vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lg{constructor(e){this._methodName=e}}class bD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const ZN=/^__.*__$/;class KN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ed(e,this.data,t,this.fieldTransforms)}}class CM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class TD{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.oa(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new TD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:r,ha:!1});return i.la(e),i}fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:r,ha:!1});return i.oa(),i}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return xD(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(bM(this.ua)&&ZN.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class YN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||H0(e)}ga(e,t,r,i=!1){return new TD({ua:e,methodName:t,ma:r,path:cr.emptyPath(),ha:!1,wa:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vg(n){const e=n._freezeSettings(),t=H0(n._databaseId);return new YN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SD(n,e,t,r,i,u={}){const l=n.ga(u.merge||u.mergeFields?2:0,e,t,i);VS("Data must be an object, but it was:",l,r);const m=AM(r,l);let w,C;if(u.merge)w=new Oi(l.fieldMask),C=l.fieldTransforms;else if(u.mergeFields){const T=[];for(const P of u.mergeFields){const V=Y0(e,P,t);if(!l.contains(V))throw new Se(ae.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);MM(T,V)||T.push(V)}w=new Oi(T),C=l.fieldTransforms.filter(P=>w.covers(P.field))}else w=null,C=l.fieldTransforms;return new KN(new Jr(m),w,C)}class K0 extends Lg{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof K0}}function TM(n,e,t){return new TD({ua:3,ma:e.settings.ma,methodName:n._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kS extends Lg{_toFieldTransform(e){return new _g(e.path,new yf)}isEqual(e){return e instanceof kS}}class QN extends Lg{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=TM(this,e,!0),r=this.ya.map(u=>Ug(u,t)),i=new Kl(r);return new _g(e.path,i)}isEqual(e){return this===e}}class XN extends Lg{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=TM(this,e,!0),r=this.ya.map(u=>Ug(u,t)),i=new _f(r);return new _g(e.path,i)}isEqual(e){return this===e}}class JN extends Lg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new yg(e.serializer,Hb(e.serializer,this.pa));return new _g(e.path,t)}isEqual(e){return this===e}}function FS(n,e,t,r){const i=n.ga(1,e,t);VS("Data must be an object, but it was:",i,r);const u=[],l=Jr.empty();bu(r,(w,C)=>{const T=AD(e,w,t);C=(0,zt.m9)(C);const P=i.fa(T);if(C instanceof K0)u.push(T);else{const V=Ug(C,P);null!=V&&(u.push(T),l.set(T,V))}});const m=new Oi(u);return new CM(l,m,i.fieldTransforms)}function LS(n,e,t,r,i,u){const l=n.ga(1,e,t),m=[Y0(e,r,t)],w=[i];if(u.length%2!=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(Y0(e,u[V])),w.push(u[V+1]);const C=[],T=Jr.empty();for(let V=m.length-1;V>=0;--V)if(!MM(C,m[V])){const q=m[V];let oe=w[V];oe=(0,zt.m9)(oe);const Ee=l.fa(q);if(oe instanceof K0)C.push(q);else{const Ie=Ug(oe,Ee);null!=Ie&&(C.push(q),T.set(q,Ie))}}const P=new Oi(C);return new CM(T,P,l.fieldTransforms)}function SM(n,e,t,r=!1){return Ug(t,n.ga(r?4:3,e))}function Ug(n,e){if(xM(n=(0,zt.m9)(n)))return VS("Unsupported field value:",e,n),AM(n,e);if(n instanceof Lg)return function(t,r){if(!bM(r.ua))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let m=Ug(l,r.da(u));null==m&&(m={nullValue:"NULL_VALUE"}),i.push(m),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Hb(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Vn.fromDate(t);return{timestampValue:Ef(r.serializer,i)}}if(t instanceof Vn){const i=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ef(r.serializer,i)}}if(t instanceof bD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nc)return{bytesValue:C0(r.serializer,t._byteString)};if(t instanceof tr){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ps(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${DD(t)}`)}(n,e)}function AM(n,e){const t={};return fd(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bu(n,(r,i)=>{const u=Ug(i,e.aa(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function xM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof bD||n instanceof nc||n instanceof tr||n instanceof Lg)}function VS(n,e,t){if(!xM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=DD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Y0(n,e,t){if((e=(0,zt.m9)(e))instanceof Nd)return e._internalPath;if("string"==typeof e)return AD(n,e);throw xD("Field path arguments must be of type string or ",n,!1,void 0,t)}const eO=new RegExp("[~\\*/\\[\\]]");function AD(n,e,t){if(e.search(eO)>=0)throw xD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nd(...e.split("."))._internalPath}catch{throw xD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xD(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${i}`),w+=")"),new Se(ae.INVALID_ARGUMENT,m+n+w)}function MM(n,e){return n.some(t=>t.isEqual(e))}class Q0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tO extends Q0{data(){return super.data()}}function MD(n,e){return"string"==typeof e?AD(n,e):e instanceof Nd?e._internalPath:e._delegate._internalPath}function RM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class US{}class X0 extends US{}function Sf(n,e,...t){let r=[];e instanceof US&&r.push(e),r=r.concat(t),function(i){const u=i.filter(m=>m instanceof e_).length,l=i.filter(m=>m instanceof J0).length;if(u>1||u>0&&l>0)throw new Se(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class J0 extends X0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new J0(e,t,r)}_apply(e){const t=this._parse(e);return kM(e._query,t),new Qi(e.firestore,e.converter,Ey(e._query,t))}_parse(e){const t=Vg(e.firestore);return function(i,u,l,m,w,C,T){let P;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){OM(T,C);const V=[];for(const q of T)V.push(NM(m,i,q));P={arrayValue:{values:V}}}else P=NM(m,i,T)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||OM(T,C),P=SM(l,"where",T,"in"===C||"not-in"===C);return Yt.create(w,C,P)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class e_ extends US{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new e_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:En.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const l=i.getFlattenedFilters();for(const m of l)kM(u,m),u=Ey(u,m)}(e._query,t),new Qi(e.firestore,e.converter,Ey(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class BS extends X0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new BS(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ff(i,u);return function(m,w){if(null===_0(m)){const C=hg(m);null!==C&&FM(0,C,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Qi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Au(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class RD extends X0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new RD(e,t,r)}_apply(e){return new Qi(e.firestore,e.converter,Iy(e._query,this._limit,this._limitType))}}class PD extends X0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new PD(e,t,r)}_apply(e){const t=PM(e,this.type,this._docOrFields,this._inclusive);return new Qi(e.firestore,e.converter,(i=t,new Au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class ND extends X0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ND(e,t,r)}_apply(e){const t=PM(e,this.type,this._docOrFields,this._inclusive);return new Qi(e.firestore,e.converter,(i=t,new Au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function PM(n,e,t,r){if(t[0]=(0,zt.m9)(t[0]),t[0]instanceof Q0)return function(i,u,l,m,w){if(!m)throw new Se(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const T of vd(i))if(T.field.isKeyField())C.push(gd(u,m.key));else{const P=m.data.field(T.field);if(dy(P))throw new Se(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const V=T.field.canonicalString();throw new Se(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(P)}return new md(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Vg(n.firestore);return function(u,l,m,w,C,T){const P=u.explicitOrderBy;if(C.length>P.length)throw new Se(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let q=0;q<C.length;q++){const oe=C[q];if(P[q].field.isKeyField()){if("string"!=typeof oe)throw new Se(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof oe}`);if(!wy(u)&&-1!==oe.indexOf("/"))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${oe}' contains a slash.`);const Ee=u.path.child(ln.fromString(oe));if(!Ze.isDocumentKey(Ee))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ee}' is not because it contains an odd number of segments.`);const Ie=new Ze(Ee);V.push(gd(l,Ie))}else{const Ee=SM(m,w,oe);V.push(Ee)}}return new md(V,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NM(n,e,t){if("string"==typeof(t=(0,zt.m9)(t))){if(""===t)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wy(e)&&-1!==t.indexOf("/"))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!Ze.isDocumentKey(r))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gd(n,new Ze(r))}if(t instanceof tr)return gd(n,t._key);throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${DD(t)}.`)}function OM(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kM(n,e){if(e.isInequality()){const r=hg(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=_0(n);null!==u&&FM(0,i,u)}const t=function(r,i){for(const u of r)for(const l of u.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Se(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function FM(n,e,t){if(!t.isEqual(e))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class $S{convertValue(e,t="none"){switch(Hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bu(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new bD(Jn(e.latitude),Jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ag(e));default:return null}}convertTimestamp(e){const t=Tu(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);yt(rD(r));const i=new Su(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return i.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function OD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class cO extends $S{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}class Bg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Od extends Q0{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ew(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(MD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ew extends Od{data(e={}){return super.data(e)}}class Af{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ew(this._firestore,this._userDataWriter,r.key,r,new Bg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new ew(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const m=new ew(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),C=u.indexOf(l.doc.key)),{type:hO(l.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function VM(n,e){return n instanceof Od&&e instanceof Od?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Af&&e instanceof Af&&n._firestore===e._firestore&&NS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class xf extends $S{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function UM(n,e,t){n=cn(n,tr);const r=cn(n.firestore,nr),i=OD(n.converter,e,t);return t_(r,[SD(Vg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,zn.none())])}function BM(n,e,t,...r){n=cn(n,tr);const i=cn(n.firestore,nr),u=Vg(i);let l;return l="string"==typeof(e=(0,zt.m9)(e))||e instanceof Nd?LS(u,"updateDoc",n._key,e,t,r):FS(u,"updateDoc",n._key,e),t_(i,[l.toMutation(n._key,zn.exists(!0))])}function $M(n,...e){var t,r,i;n=(0,zt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||OS(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(OS(e[l])){const P=e[l];e[l]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[l+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[l+2]=null===(i=P.complete)||void 0===i?void 0:i.bind(P)}let w,C,T;if(n instanceof tr)C=cn(n.firestore,nr),T=Wl(n._key.path),w={next:P=>{e[l]&&e[l](jS(C,n,P))},error:e[l+1],complete:e[l+2]};else{const P=cn(n,Qi);C=cn(P.firestore,nr),T=P._query;const V=new xf(C);w={next:q=>{e[l]&&e[l](new Af(C,V,P,q))},error:e[l+1],complete:e[l+2]},RM(n._query)}return function(P,V,q,oe){const Ee=new vD(oe),Ie=new QT(V,Ee,q);return P.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return qT(yield Jy(P),Ie)})),()=>{Ee.Sc(),P.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return ZT(yield Jy(P),Ie)}))}}(Br(C),T,m,w)}function t_(n,e){return function(t,r){const i=new Vr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function oN(n,e,t){return nS.apply(this,arguments)}(yield MS(t),r,i)})),i.promise}(Br(n),e)}function jS(n,e,t){const r=t.docs.get(e._key),i=new xf(n);return new Od(n,i,e._key,r,new Bg(t.hasPendingWrites,t.fromCache),e.converter)}const MO={maxAttempts:5};class jM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vg(e)}set(e,t,r){this._verifyNotCommitted();const i=Mf(e,this._firestore),u=OD(i.converter,t,r),l=SD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,zn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Mf(e,this._firestore);let l;return l="string"==typeof(t=(0,zt.m9)(t))||t instanceof Nd?LS(this._dataReader,"WriteBatch.update",u._key,t,r,i):FS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mf(e,this._firestore);return this._mutations=this._mutations.concat(new Eg(t._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mf(n,e){if((n=(0,zt.m9)(n)).firestore!==e)throw new Se(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class RO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vg(e)}get(e){const t=Mf(e,this._firestore),r=new cO(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new Q0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Q0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Mf(e,this._firestore),u=OD(i.converter,t,r),l=SD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=Mf(e,this._firestore);let l;return l="string"==typeof(t=(0,zt.m9)(t))||t instanceof Nd?LS(this._dataReader,"Transaction.update",u._key,t,r,i):FS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Mf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mf(e,this._firestore),r=new xf(this._firestore);return super.get(e).then(i=>new Od(this._firestore,r,t._key,i._document,new Bg(!1,!1),t.converter))}}!function(n,e=!0){ef=Ts.SDK_VERSION,(0,Ts._registerComponent)(new kh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new nr(new Eb(t.getProvider("auth-internal")),new zE(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Se(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(m.options.projectId,w)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Ts.registerVersion)(jE,"3.11.0",n),(0,Ts.registerVersion)(jE,"3.11.0","esm2017")}();function HS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function GM(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function zM(){if(!function lI(){return typeof atob<"u"}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}class tw{constructor(e){this._delegate=e}static fromBase64String(e){return zM(),new tw(nc.fromBase64String(e))}static fromUint8Array(e){return GM(),new tw(nc.fromUint8Array(e))}toBase64(){return zM(),this._delegate.toBase64()}toUint8Array(){return GM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function GS(n){return function BO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class $O{enableIndexedDbPersistence(e,t){return function UN(n,e){DM(n=cn(n,nr));const t=Br(n);if(t._uninitializedComponentsProvider)throw new Se(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Rs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Xy;return IM(t,i,new DS(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function BN(n){DM(n=cn(n,nr));const e=Br(n);if(e._uninitializedComponentsProvider)throw new Se(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Rs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Xy;return IM(e,r,new iM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $N(n){if(n._initialized&&!n._terminated)throw new Se(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!Wo.D())return Promise.resolve();const i=r+"main";yield Wo.delete(i)}),function(r){return t.apply(this,arguments)})(Ke(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class qM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Su||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _M(n,e,t,r={}){var i;const u=(n=cn(n,W0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Rs("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Xn.MOCK_USER;else{l=(0,zt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Se(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Xn(w)}n._authCredentials=new wb(new nf(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function HN(n){return function SN(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield aM(n),t=yield uM(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.Au.delete(0),G0(i)}(t)}))}(Br(n=cn(n,nr)))}(this._delegate)}disableNetwork(){return function GN(n){return function AN(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield aM(n),t=yield uM(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(i){const u=Ye(i);u.Au.add(0),yield zy(u),u.Pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Br(n=cn(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function jN(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function cN(n,e){return aS.apply(this,arguments)}(yield MS(e),t)})),t.promise}(Br(n=cn(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function EO(n,e){return function RN(n,e){const t=new vD(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Jy(n),i=t,Ye(r).Nu.add(i),void i.next();var r,i})),()=>{t.Sc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Jy(n),i=t,void Ye(r).Nu.delete(i);var r,i}))}}(Br(n=cn(n,nr)),OS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new n_(this,vM(this._delegate,e))}catch(t){throw Os(t,"collection()","Firestore.collection()")}}doc(e){try{return new Na(this,CD(this._delegate,e))}catch(t){throw Os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ks(this,function kN(n,e){if(n=cn(n,W0),PS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(n,null,(t=e,new Au(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function PO(n,e,t){n=cn(n,nr);const r=Object.assign(Object.assign({},MO),t);return function(i){if(i.maxAttempts<1)throw new Se(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const m=new Vr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const w=yield function lM(n){return ED(n).then(e=>e.datastore)}(i);new bN(i.asyncQueue,w,l,u,m).run()})),m.promise}(Br(n),i=>e(new RO(n,i)),r)}(this._delegate,t=>e(new WM(this,t)))}batch(){return Br(this._delegate),new ZM(new jM(this._delegate,e=>t_(this._delegate,e)))}loadBundle(e){return function zN(n,e){const t=Br(n=cn(n,nr)),r=new LN;return function PN(n,e,t,r){const i=function(u,l){let m;return m="string"==typeof u?Cg().encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return sM(w,C);if(w instanceof ArrayBuffer)return sM(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new DN(w,l);var w}(t,H0(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function EN(n,e,t){const r=Ye(n);var i;(i=(0,pe.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(V,q){const oe=Ye(V),Ee=Sr(q.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Ie=>oe.Ls.getBundleMetadata(Ie,q.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(Ee)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=w).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(Kx(w));const C=new eN(w,u.localStore,l.serializer);let T=yield l.Pc();for(;T;){const V=yield C.ju(T);V&&m._updateProgress(V),T=yield l.Pc()}const P=yield C.complete();return yield Pd(u,P.Hu,void 0),yield function(V,q){const oe=Ye(V);return oe.persistence.runTransaction("Save bundle","readwrite",Ee=>oe.Ls.saveBundleMetadata(Ee,q))}(u.localStore,w),m._completeWith(P.progress),Promise.resolve(P.Wu)}catch(w){return Rs("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var V}),function(u,l,m){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield MS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function qN(n,e){return function NN(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ls.getNamedQuery(u,r))}(yield ID(n),e)}))}(Br(n=cn(n,nr)),e).then(t=>t?new Qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ks(this,t):null)}}class kD extends $S{constructor(e){super(),this.firestore=e}convertBytes(e){return new tw(new nc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Na.forKey(t,this.firestore,null)}}class WM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kD(e)}get(e){const t=jg(e);return this._delegate.get(t).then(r=>new nw(this._firestore,new Od(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=jg(e);return r?(HS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=jg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=jg(e);return this._delegate.delete(t),this}}class ZM{constructor(e){this._delegate=e}set(e,t,r){const i=jg(e);return r?(HS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=jg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=jg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $g{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ew(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$g.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new $g(e,new kD(e),t),i.set(t,u)),u}}$g.INSTANCES=new WeakMap;class Na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Na(t,new tr(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new Na(t,new tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new n_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new n_(this.firestore,vM(this._delegate,e))}catch(t){throw Os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,zt.m9)(e))instanceof tr&&wM(this._delegate,e)}set(e,t){t=HS("DocumentReference.set",t);try{return t?UM(this._delegate,e,t):UM(this._delegate,e)}catch(r){throw Os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?BM(this._delegate,e):BM(this._delegate,e,t,...r)}catch(i){throw Os(i,"updateDoc()","DocumentReference.update()")}}delete(){return function vO(n){return t_(cn(n.firestore,nr),[new Eg(n._key,zn.none())])}(this._delegate)}onSnapshot(...e){const t=KM(e),r=YM(e,i=>new nw(this.firestore,new Od(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $M(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function pO(n){n=cn(n,tr);const e=cn(n.firestore,nr),t=Br(e),r=new xf(e);return function xN(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(i,u,l){try{const m=yield function(w,C){const T=Ye(w);return T.persistence.runTransaction("read document","readonly",P=>T.localDocuments.getDocument(P,C))}(i,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Se(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Zy(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(i,u,l){return r.apply(this,arguments)})(yield ID(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Od(e,r,n._key,i,new Bg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function gO(n){n=cn(n,tr);const e=cn(n.firestore,nr);return cM(Br(e),n._key,{source:"server"}).then(t=>jS(e,n,t))}(this._delegate):function fO(n){n=cn(n,tr);const e=cn(n.firestore,nr);return cM(Br(e),n._key).then(t=>jS(e,n,t))}(this._delegate),t.then(r=>new nw(this.firestore,new Od(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Na(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}function Os(n,e,t){return n.message=n.message.replace(e,t),n}function KM(n){for(const e of n)if("object"==typeof e&&!GS(e))return e;return{}}function YM(n,e){var t,r;let i;return i=GS(n[0])?n[0]:GS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class nw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return VM(this._delegate,e._delegate)}}class rw extends nw{data(e){const t=this._delegate.data(e);return function HE(n,e){n||st()}(void 0!==t),t}}class ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kD(e)}where(e,t,r){try{return new ks(this.firestore,Sf(this._delegate,function nO(n,e,t){const r=e,i=MD("where",n);return J0._create(i,r,t)}(e,t,r)))}catch(i){throw Os(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ks(this.firestore,Sf(this._delegate,function rO(n,e="asc"){const t=e,r=MD("orderBy",n);return BS._create(r,t)}(e,t)))}catch(r){throw Os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ks(this.firestore,Sf(this._delegate,function iO(n){return mM("limit",n),RD._create("limit",n,"F")}(e)))}catch(t){throw Os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ks(this.firestore,Sf(this._delegate,function sO(n){return mM("limitToLast",n),RD._create("limitToLast",n,"L")}(e)))}catch(t){throw Os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ks(this.firestore,Sf(this._delegate,function oO(...n){return PD._create("startAt",n,!0)}(...e)))}catch(t){throw Os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ks(this.firestore,Sf(this._delegate,function aO(...n){return PD._create("startAfter",n,!1)}(...e)))}catch(t){throw Os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ks(this.firestore,Sf(this._delegate,function uO(...n){return ND._create("endBefore",n,!1)}(...e)))}catch(t){throw Os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ks(this.firestore,Sf(this._delegate,function lO(...n){return ND._create("endAt",n,!0)}(...e)))}catch(t){throw Os(t,"endAt()","Query.endAt()")}}isEqual(e){return NS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function yO(n){n=cn(n,Qi);const e=cn(n.firestore,nr),t=Br(e),r=new xf(e);return function MN(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(i,u,l){try{const m=yield hD(i,u,!0),w=new Xx(u,m.sr),C=w.nc(m.documents),T=w.applyChanges(C,!1);l.resolve(T.snapshot)}catch(m){const w=Zy(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(i,u,l){return r.apply(this,arguments)})(yield ID(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Af(e,r,n,i))}(this._delegate):"server"===e?.source?function _O(n){n=cn(n,Qi);const e=cn(n.firestore,nr),t=Br(e),r=new xf(e);return dM(t,n._query,{source:"server"}).then(i=>new Af(e,r,n,i))}(this._delegate):function mO(n){n=cn(n,Qi);const e=cn(n.firestore,nr),t=Br(e),r=new xf(e);return RM(n._query),dM(t,n._query).then(i=>new Af(e,r,n,i))}(this._delegate),t.then(r=>new zS(this.firestore,new Af(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=KM(e),r=YM(e,i=>new zS(this.firestore,new Af(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $M(this._delegate,t,r)}withConverter(e){return new ks(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}class HO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new HO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new rw(this._firestore,r))})}isEqual(e){return VM(this._delegate,e._delegate)}}class n_ extends ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Na(this.firestore,e):null}doc(e){try{return new Na(this.firestore,void 0===e?CD(this._delegate):CD(this._delegate,e))}catch(t){throw Os(t,"doc()","CollectionReference.doc()")}}add(e){return function wO(n,e){const t=cn(n.firestore,nr),r=CD(n),i=OD(n.converter,e);return t_(t,[SD(Vg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Na(this.firestore,t))}isEqual(e){return wM(this._delegate,e._delegate)}withConverter(e){return new n_(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}function jg(n){return cn(n,tr)}class qS{constructor(...e){this._delegate=new Nd(...e)}static documentId(){return new qS(cr.keyField().canonicalString())}isEqual(e){return(e=(0,zt.m9)(e))instanceof Nd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function OO(){return new kS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hg(e)}static delete(){const e=function NO(){return new K0("deleteField")}();return e._methodName="FieldValue.delete",new Hg(e)}static arrayUnion(...e){const t=function kO(...n){return new QN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hg(t)}static arrayRemove(...e){const t=function FO(...n){return new XN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hg(t)}static increment(e){const t=function LO(n){return new JN("increment",n)}(e);return t._methodName="FieldValue.increment",new Hg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const GO={Firestore:qM,GeoPoint:bD,Timestamp:Vn,Blob:tw,Transaction:WM,WriteBatch:ZM,DocumentReference:Na,DocumentSnapshot:nw,Query:ks,QueryDocumentSnapshot:rw,QuerySnapshot:zS,CollectionReference:n_,FieldPath:qS,FieldValue:Hg,setLogLevel:function jO(n){!function ur(n){qo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function qO(n){(function zO(n,e){n.INTERNAL.registerComponent(new kh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},GO)))})(n,(e,t)=>new qM(e,t,new $O)),n.registerVersion("@firebase/firestore-compat","0.3.8")}(Tm.Z);var WO=k(6451),FD=k(5363),ZO=k(6063);class KO extends kr.x{constructor(e=1/0,t=1/0,r=ZO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var YO=k(3099);function QM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,YO.B)({connector:()=>new KO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function XM(n,e){return(0,au.m)(e)?Fn(()=>n,e):Fn(()=>n)}var WS=k(9468);k(259);const KS=new Map,eR={activated:!1,tokenObservers:[]},tk={initialized:!1,enabled:!1};function Ar(n){return KS.get(n)||Object.assign({},eR)}function VD(){return tk}const YS="https://content-firebaseappcheck.googleapis.com/v1",sk="exchangeDebugToken",tR={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ak{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new zt.BH,yield function uk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new zt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Xi=new zt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function JS(){return JS=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const P=yield i.getHeartbeatsHeader();P&&(r["X-Firebase-Client"]=P)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(P){throw Xi.create("fetch-network-error",{originalErrorMessage:P?.message})}if(200!==l.status)throw Xi.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(P){throw Xi.create("fetch-parse-error",{originalErrorMessage:P?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),T=Date.now();return{token:m.token,expireTimeMillis:T+C,issuedAtTimeMillis:T}}),JS.apply(this,arguments)}const hk="firebase-app-check-database",fk=1,iw="firebase-app-check-store";let jD=null;function eA(){return eA=(0,pe.Z)(function*(n,e){const r=(yield function iR(){return jD||(jD=new Promise((n,e)=>{try{const t=indexedDB.open(hk,fk);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Xi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(iw,{keyPath:"compositeKey"})}}catch(t){e(Xi.create("storage-open",{originalErrorMessage:t?.message}))}}),jD)}()).transaction(iw,"readwrite"),u=r.objectStore(iw).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var C;m(Xi.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),eA.apply(this,arguments)}const sw=new Al.Yd("@firebase/app-check");function rA(n,e){return(0,zt.hl)()?function gk(n,e){return function sR(n,e){return eA.apply(this,arguments)}(function aR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{sw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aA(){return aA=(0,pe.Z)(function*(){const n=VD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),aA.apply(this,arguments)}const Ek={error:"UNKNOWN_ERROR"};function Ik(n){return zt.US.encodeString(JSON.stringify(n),!1)}function HD(n){return uA.apply(this,arguments)}function uA(){return uA=(0,pe.Z)(function*(n,e=!1){const t=n.app;!function QS(n){if(!Ar(n).activated)throw Xi.create("use-before-activation",{appName:n.name})}(t);const r=Ar(t);let u,i=r.token;if(i&&!r_(i)&&(r.token=void 0,i=void 0),!i){const w=yield r.cachedTokenPromise;w&&(r_(w)?i=w:yield rA(t,void 0))}if(!e&&i&&r_(i))return{token:i.token};let m,l=!1;if(function sA(){return VD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function $D(n,e){return JS.apply(this,arguments)}(function nR(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${YS}/projects/${t}/apps/${r}:${sk}?key=${i}`,body:{debug_token:e}}}(t,yield function oA(){return aA.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield rA(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Ar(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?sw.warn(w.message):sw.error(w),u=w}return i?u?m=r_(i)?{token:i.token,internalError:u}:cR(u):(m={token:i.token},r.token=i,yield rA(t,i)):m=cR(u),l&&function lR(n,e){const t=Ar(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),uA.apply(this,arguments)}function dA(n,e){const t=Ar(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function uR(n){const{app:e}=n,t=Ar(e);let r=t.tokenRefresher;r||(r=function Ck(n){const{app:e}=n;return new ak((0,pe.Z)(function*(){let r;if(r=Ar(e).token?yield HD(n,!0):yield HD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ar(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},tR.RETRIAL_MIN_WAIT,tR.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function r_(n){return n.expireTimeMillis-Date.now()>0}function cR(n){return{token:Ik(Ek),error:n}}class bk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ar(this.app);for(const t of e)dA(this.app,t.next);return Promise.resolve()}}const _R="app-check-internal";!function Uk(){(0,Ts._registerComponent)(new kh.wA("app-check",n=>function Tk(n,e){return new bk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_R).initialize()})),(0,Ts._registerComponent)(new kh.wA(_R,n=>function Sk(n){return{getToken:e=>HD(n,e),addTokenListener:e=>function cA(n,e,t,r){const{app:i}=n,u=Ar(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&r_(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),uR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>uR(n))}(n,"INTERNAL",e),removeTokenListener:e=>dA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ts.registerVersion)("@firebase/app-check","0.7.0")}();class zD{constructor(){return(0,An.vb)("app-check")}}typeof window<"u"&&window;var wR=k(9260);const ER=new d.OlP("angularfire2.auth.use-emulator"),IR=new d.OlP("angularfire2.auth.settings"),DR=new d.OlP("angularfire2.auth.tenant-id"),CR=new d.OlP("angularfire2.auth.langugage-code"),bR=new d.OlP("angularfire2.auth.use-device-language"),TR=new d.OlP("angularfire.auth.persistence"),SR=(n,e,t,r,i,u,l,m)=>(0,li.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=i,u&&w.useDeviceLanguage(),l)for(const[C,T]of Object.entries(l))w.settings[C]=T;return m&&w.setPersistence(m),w},[t,r,i,u,l,m]);let AR=(()=>{class n{constructor(t,r,i,u,l,m,w,C,T,P,V,q){const oe=new kr.x,Ee=ot(void 0).pipe((0,FD.Q)(l.outsideAngular),Fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,3042)))),(0,wt.U)(()=>(0,li.on)(t,u,r)),(0,wt.U)(Ie=>SR(Ie,u,m,C,T,P,w,V)),QM({bufferSize:1,refCount:!1}));if(ps(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ot(null);else{Ee.pipe(zi()).subscribe();const dt=Ee.pipe(Fn(vt=>vt.getRedirectResult().then(kt=>kt,()=>null)),An.iC,QM({bufferSize:1,refCount:!1})),_t=Ee.pipe(Fn(vt=>new ai.y(kt=>({unsubscribe:u.runOutsideAngular(()=>vt.onAuthStateChanged(Jt=>kt.next(Jt),Jt=>kt.error(Jt),()=>kt.complete()))})))),Xe=Ee.pipe(Fn(vt=>new ai.y(kt=>({unsubscribe:u.runOutsideAngular(()=>vt.onIdTokenChanged(Jt=>kt.next(Jt),Jt=>kt.error(Jt),()=>kt.complete()))}))));this.authState=dt.pipe(XM(_t),(0,WS.R)(l.outsideAngular),(0,FD.Q)(l.insideAngular)),this.user=dt.pipe(XM(Xe),(0,WS.R)(l.outsideAngular),(0,FD.Q)(l.insideAngular)),this.idToken=this.user.pipe(Fn(vt=>vt?(0,nn.D)(vt.getIdToken()):ot(null))),this.idTokenResult=this.user.pipe(Fn(vt=>vt?(0,nn.D)(vt.getIdTokenResult()):ot(null))),this.credential=(0,WO.T)(dt,oe,this.authState.pipe(ui(vt=>!vt))).pipe((0,wt.U)(vt=>vt?.user?vt:null),(0,WS.R)(l.outsideAngular),(0,FD.Q)(l.insideAngular))}return(0,li.pX)(this,Ee,u,{spy:{apply:(Ie,dt,_t)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&_t.then(Xe=>oe.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(li.Dh),d.LFG(li.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(An.HU),d.LFG(ER,8),d.LFG(IR,8),d.LFG(DR,8),d.LFG(CR,8),d.LFG(bR,8),d.LFG(TR,8),d.LFG(zD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function xR(n,e){return function zk(n,e=Cm.z){return new ai.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function mA(n,e){return xR(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function qD(n,e){return mA(n,e).pipe(Oo(void 0),Ap(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=i.find(T=>T.doc.ref.isEqual(l.ref)),C=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function MR(n,e,t){return qD(n,t).pipe(gl((r,i)=>function Wk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Zk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return yA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return yA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function bm(n,e=Zs.y){return n=n??Zw,(0,Cr.e)((t,r)=>{let i,u=!0;t.subscribe((0,mr.x)(r,l=>{const m=e(l);(u||!n(i,m))&&(u=!1,i=m,r.next(l))}))})}(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function yA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function RR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class PR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Oo(void 0),Ap(),ui(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),An.iC)}auditTrail(e){return this.stateChanges(e).pipe(gl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RR(e);return MR(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return mA(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),An.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(An.iC)}add(e){return this.ref.add(e)}doc(e){return new NR(this.ref.doc(e),this.afs)}}class NR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=FR(r,t);return new PR(i,u,this.afs)}snapshotChanges(){return function qk(n,e){return xR(n,e).pipe(Oo(void 0),Ap(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(An.iC)}}class Kk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qD(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ui(t=>t.length>0),An.iC):qD(this.query,this.afs.schedulers.outsideAngular).pipe(An.iC)}auditTrail(e){return this.stateChanges(e).pipe(gl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RR(e);return MR(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return mA(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),An.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(An.iC)}}const OR=new d.OlP("angularfire2.enableFirestorePersistence"),kR=new d.OlP("angularfire2.firestore.persistenceSettings"),Yk=new d.OlP("angularfire2.firestore.settings"),Qk=new d.OlP("angularfire2.firestore.use-emulator");function FR(n,e=(t=>t)){return{query:e(n),ref:n}}let _A=(()=>{class n{constructor(t,r,i,u,l,m,w,C,T,P,V,q,oe,Ee,Ie,dt,_t){this.schedulers=w;const Xe=(0,li.on)(t,m,r),vt=T;P&&SR(Xe,m,V,oe,Ee,Ie,q,dt),[this.firestore,this.persistenceEnabled$]=(0,li.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const kt=m.runOutsideAngular(()=>Xe.firestore());if(u&&kt.settings(u),vt&&kt.useEmulator(...vt),i&&!ps(l)){const Jt=()=>{try{return(0,nn.D)(kt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(pi){return typeof console<"u"&&console.warn(pi),ot(!1)}};return[kt,m.runOutsideAngular(Jt)]}return[kt,ot(!1)]},[u,vt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=FR(i,r),m=this.schedulers.ngZone.run(()=>u);return new PR(m,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new Kk(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(li.Dh),d.LFG(li.xv,8),d.LFG(OR,8),d.LFG(Yk,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(An.HU),d.LFG(kR,8),d.LFG(Qk,8),d.LFG(AR,8),d.LFG(ER,8),d.LFG(IR,8),d.LFG(DR,8),d.LFG(CR,8),d.LFG(bR,8),d.LFG(TR,8),d.LFG(zD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Xk=(()=>{class n{constructor(){wR.Z.registerVersion("angularfire",An.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:OR,useValue:!0},{provide:kR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[_A]}),n})();const LR="firebasestorage.googleapis.com",VR="storageBucket";class wr extends zt.ZR{constructor(e,t,r=0){super(vA(e),`Firebase Storage: ${t} (${vA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var qn=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(qn||(qn={})),qn))();function vA(n){return"storage/"+n}function wA(){return new wr(qn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function UR(){return new wr(qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BR(){return new wr(qn.CANCELED,"User canceled the upload/download.")}function $R(){return new wr(qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function i_(n){return new wr(qn.INVALID_ARGUMENT,n)}function jR(){return new wr(qn.APP_DELETED,"The Firebase app was deleted.")}function HR(n){return new wr(qn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ow(n,e){return new wr(qn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function aw(n){throw new wr(qn.INTERNAL_ERROR,"Internal error: "+n)}class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch{return new ls(e,"")}if(""===r.path)return r;throw function lF(n){return new wr(qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+i+"(/(.*))?$","i");function C(vt){vt.path_=decodeURIComponent(vt.path)}const P=t.replace(/[.]/g,"\\."),Xe=[{regex:m,indices:{bucket:1,path:3},postModify:function u(vt){"/"===vt.path.charAt(vt.path.length-1)&&(vt.path_=vt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${P}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${t===LR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let vt=0;vt<Xe.length;vt++){const kt=Xe[vt],Jt=kt.regex.exec(e);if(Jt){let lo=Jt[kt.indices.path];lo||(lo=""),r=new ls(Jt[kt.indices.bucket],lo),kt.postModify(r);break}}if(null==r)throw function uF(n){return new wr(qn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class pF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function WD(n){return"string"==typeof n||n instanceof String}function GR(n){return EA()&&n instanceof Blob}function EA(){return typeof Blob<"u"&&!(0,zt.UG)()}function IA(n,e,t,r){if(r<e)throw i_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw i_(`Invalid value for '${n}'. Expected ${t} or less.`)}function kd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function zR(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Rf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Rf||(Rf={})),Rf))();function qR(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class wF{constructor(e,t,r,i,u,l,m,w,C,T,P,V=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=w,this.timeout_=C,this.progressCallback_=T,this.connectionFactory_=P,this.retry=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,oe)=>{this.resolve_=q,this.reject_=oe,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,l=this.reject_,m=i.connection;if(i.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function yF(n){return void 0!==n}(w)?u():u(w)}catch(w){l(w)}else if(null!==m){const w=wA();w.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,w):w)}else l(i.canceled?this.appDelete_?jR():BR():UR())};this.canceled_?t(0,new ZD(!1,null,!0)):this.backoffId_=function gF(n,e,t){let r=1,i=null,u=null,l=!1,m=0;function w(){return 2===m}let C=!1;function T(...Ie){C||(C=!0,e.apply(null,Ie))}function P(Ie){i=setTimeout(()=>{i=null,n(q,w())},Ie)}function V(){u&&clearTimeout(u)}function q(Ie,...dt){if(C)return void V();if(Ie)return V(),void T.call(null,Ie,...dt);if(w()||l)return V(),void T.call(null,Ie,...dt);let Xe;r<64&&(r*=2),1===m?(m=2,Xe=0):Xe=1e3*(r+Math.random()),P(Xe)}let oe=!1;function Ee(Ie){oe||(oe=!0,V(),!C&&(null!==i?(Ie||(m=2),clearTimeout(i),P(0)):Ie||(m=1)))}return P(0),u=setTimeout(()=>{l=!0,Ee(!0)},t),Ee}((r,i)=>{if(i)return void r(!1,new ZD(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===Rf.NO_ERROR,w=u.getStatus();if(!m||qR(w,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===Rf.ABORT;return void r(!1,new ZD(!1,null,T))}const C=-1!==this.successCodes_.indexOf(w);r(!0,new ZD(C,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function mF(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ZD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function SF(...n){const e=function TF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(EA())return new Blob(n);throw new wr(qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class DA{constructor(e,t){this.data=e,this.contentType=t||null}}function CA(n,e){switch(n){case Zo.RAW:return new DA(WR(e));case Zo.BASE64:case Zo.BASE64URL:return new DA(ZR(n,e));case Zo.DATA_URL:return new DA(function RF(n){const e=new KR(n);return e.base64?ZR(Zo.BASE64,e.rest):function MF(n){let e;try{e=decodeURIComponent(n)}catch{throw ow(Zo.DATA_URL,"Malformed data URL.")}return WR(e)}(e.rest)}(e),function PF(n){return new KR(n).contentType}(e))}throw wA()}function WR(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ZR(n,e){switch(n){case Zo.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw ow(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Zo.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw ow(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function xF(n){if(typeof atob>"u")throw function fF(n){return new wr(qn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:ow(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class KR{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ow(Zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function NF(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class rc{constructor(e,t){let r=0,i="";GR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(GR(this.data_)){const i=function AF(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new rc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new rc(r,!0)}}static getBlob(...e){if(EA()){const t=e.map(r=>r instanceof rc?r.data_:r);return new rc(SF.apply(null,t))}{const t=e.map(l=>WD(l)?CA(Zo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)i[u++]=l[m]}),new rc(i,!0)}}uploadData(){return this.data_}}function bA(n){let e;try{e=JSON.parse(n)}catch{return null}return function vF(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function YR(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function FF(n,e){return e}class Fs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||FF}}let KD=null;function uw(){if(KD)return KD;const n=[];n.push(new Fs("bucket")),n.push(new Fs("generation")),n.push(new Fs("metageneration")),n.push(new Fs("name","fullPath",!0));const t=new Fs("name");t.xform=function e(u,l){return function LF(n){return!WD(n)||n.length<2?n:YR(n)}(l)},n.push(t);const i=new Fs("size");return i.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Fs("timeCreated")),n.push(new Fs("updated")),n.push(new Fs("md5Hash",null,!0)),n.push(new Fs("cacheControl",null,!0)),n.push(new Fs("contentDisposition",null,!0)),n.push(new Fs("contentEncoding",null,!0)),n.push(new Fs("contentLanguage",null,!0)),n.push(new Fs("contentType",null,!0)),n.push(new Fs("metadata","customMetadata",!0)),KD=n,KD}function QR(n,e,t){const r=bA(e);return null===r?null:function UF(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function VF(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ls(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function TA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const XR="prefixes",JR="items";class ic{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function sc(n){if(!n)throw wA()}function YD(n,e){return function t(r,i){const u=QR(n,i,e);return sc(null!==u),u}}function s_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function oF(){return new wr(qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function sF(){return new wr(qn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function iF(n){return new wr(qn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function aF(n){return new wr(qn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function lw(n){const e=s_(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function rF(n){return new wr(qn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function e1(n,e,t){const i=kd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new ic(i,"GET",YD(n,t),l);return m.errorHandler=lw(e),m}function zF(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const m=kd(e.bucketOnlyServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,T=new ic(m,"GET",function HF(n,e){return function t(r,i){const u=function jF(n,e,t){const r=bA(t);return null===r?null:function $F(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[XR])for(const i of t[XR]){const u=i.replace(/\/$/,""),l=n._makeStorageReference(new ls(e,u));r.prefixes.push(l)}if(t[JR])for(const i of t[JR]){const u=n._makeStorageReference(new ls(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return sc(null!==u),u}}(n,e.bucket),C);return T.urlParams=u,T.errorHandler=s_(e),T}function n1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function KF(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class QD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function SA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{sc(!1)}return sc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const JF={STATE_CHANGED:"state_changed"},Ls={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function AA(n){switch(n){case"running":case"pausing":case"canceling":return Ls.RUNNING;case"paused":return Ls.PAUSED;case"success":return Ls.SUCCESS;case"canceled":return Ls.CANCELED;default:return Ls.ERROR}}class eL{constructor(e,t,r){if(function _F(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function o_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let s1=null;class tL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw aw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw aw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw aw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw aw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw aw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class nL extends tL{initXhr(){this.xhr_.responseType="text"}}function Pu(){return s1?s1():new nL}class o1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=uw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(qn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(qR(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=UR()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(qn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function YF(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l=n1(e,r,i),m={name:l.fullPath},w=kd(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},P=TA(l,t),oe=new ic(w,"POST",function q(Ee){let Ie;SA(Ee);try{Ie=Ee.getResponseHeader("X-Goog-Upload-URL")}catch{sc(!1)}return sc(WD(Ie)),Ie},n.maxUploadRetryTime);return oe.urlParams=m,oe.headers=T,oe.body=P,oe.errorHandler=s_(e),oe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function QF(n,e,t,r){const w=new ic(t,"POST",function u(C){const T=SA(C,["active","final"]);let P=null;try{P=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch{sc(!1)}P||sc(!1);const V=Number(P);return sc(!isNaN(V)),new QD(V,r.size(),"final"===T)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=s_(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Pu,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new QD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let l;try{l=function XF(n,e,t,r,i,u,l,m){const w=new QD(0,0);if(l?(w.current=l.current,w.total=l.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function dF(){return new wr(qn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const C=w.total-w.current;let T=C;i>0&&(T=Math.min(T,i));const P=w.current;let q="";q=0===T?"finalize":C===T?"upload, finalize":"upload";const oe={"X-Goog-Upload-Command":q,"X-Goog-Upload-Offset":`${w.current}`},Ee=r.slice(P,P+T);if(null===Ee)throw $R();const Xe=new ic(t,"POST",function Ie(vt,kt){const Jt=SA(vt,["active","final"]),pi=w.current+T,lo=r.size();let XA;return XA="final"===Jt?YD(e,u)(vt,kt):null,new QD(pi,lo,"final"===Jt,XA)},e.maxUploadRetryTime);return Xe.headers=oe,Xe.body=Ee.uploadData(),Xe.progressCallback=m||null,Xe.errorHandler=s_(n),Xe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(l,Pu,i,u,!1);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=e1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Pu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function r1(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let Xe="";for(let vt=0;vt<2;vt++)Xe+=Math.random().toString().slice(2);return Xe}();l["Content-Type"]="multipart/related; boundary="+w;const C=n1(e,r,i),T=TA(C,t),q=rc.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+w+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===q)throw $R();const oe={name:C.fullPath},Ee=kd(u,n.host,n._protocol),dt=n.maxUploadRetryTime,_t=new ic(Ee,"POST",YD(n,t),dt);return _t.urlParams=oe,_t.headers=l,_t.body=q.uploadData(),_t.errorHandler=s_(e),_t}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=BR(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=AA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new eL(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(AA(this._state)){case Ls.SUCCESS:o_(this._resolve.bind(null,this.snapshot))();break;case Ls.CANCELED:case Ls.ERROR:o_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(AA(this._state)){case Ls.RUNNING:case Ls.PAUSED:e.next&&o_(e.next.bind(e,this.snapshot))();break;case Ls.SUCCESS:e.complete&&o_(e.complete.bind(e))();break;default:e.error&&o_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gg{constructor(e,t){this._service=e,this._location=t instanceof ls?t:ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gg(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YR(this._location.path)}get storage(){return this._service}get parent(){const e=function OF(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ls(this._location.bucket,e);return new Gg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw HR(e)}}function u1(n,e,t){return xA.apply(this,arguments)}function xA(){return xA=(0,pe.Z)(function*(n,e,t){const i=yield l1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield u1(n,e,i.nextPageToken))}),xA.apply(this,arguments)}function l1(n,e){null!=e&&"number"==typeof e.maxResults&&IA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=zF(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Pu)}function pL(n){n._throwIfRoot("getDownloadURL");const e=function qF(n,e,t){const i=kd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new ic(i,"GET",function GF(n,e){return function t(r,i){const u=QR(n,i,e);return sc(null!==u),function BF(n,e,t,r){const i=bA(e);if(null===i||!WD(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(C=>{const P=n.fullPath;return kd("/b/"+l(n.bucket)+"/o/"+l(P),t,r)+zR({alt:"media",token:C})})[0]}(u,i,n.host,n._protocol)}}(n,t),l);return m.errorHandler=lw(e),m}(n.storage,n._location,uw());return n.storage.makeRequestWithTokens(e,Pu).then(t=>{if(null===t)throw function hF(){return new wr(qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function c1(n,e){const t=function kF(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ls(n._location.bucket,t);return new Gg(n.storage,r)}function d1(n,e){if(n instanceof MA){const t=n;if(null==t._bucket)throw function cF(){return new wr(qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VR+"' property when initializing the app?")}();const r=new Gg(t,t._bucket);return null!=e?d1(r,e):r}return void 0!==e?c1(n,e):n}function _L(n,e){if(e&&function mL(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof MA)return function yL(n,e){return new Gg(n,e)}(n,e);throw i_("To use ref(service, url), the first argument must be a Storage instance.")}return d1(n,e)}function h1(n,e){const t=e?.[VR];return null==t?null:ls.makeFromBucketSpec(t,n)}class MA{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=LR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ls.makeFromBucketSpec(i,this._host):h1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ls.makeFromBucketSpec(this._url,e):h1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gg(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new pF(jR());{const l=function bF(n,e,t,r,i,u,l=!0){const m=zR(n.urlParams),w=n.url+m,C=Object.assign({},n.headers);return function DF(n,e){e&&(n["X-Firebase-GMPID"]=e)}(C,e),function EF(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(C,t),function IF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(C,u),function CF(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(C,r),new wF(w,n.method,C,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const f1="@firebase/storage";function m1(n,e){return _L(n=(0,zt.m9)(n),e)}function AL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new MA(t,r,i,e,Ts.SDK_VERSION)}!function xL(){(0,Ts._registerComponent)(new kh.wA("storage",AL,"PUBLIC").setMultipleInstances(!0)),(0,Ts.registerVersion)(f1,"0.11.2",""),(0,Ts.registerVersion)(f1,"0.11.2","esm2017")}();class XD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class _1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new XD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new XD(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?l=>t(new XD(l,this,this._ref)):{next:t.next?l=>t.next(new XD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class v1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Fd(e,this._service))}get items(){return this._delegate.items.map(e=>new Fd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Fd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function SL(n,e){return c1(n,e)}(this._delegate,e);return new Fd(t,this.storage)}get root(){return new Fd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Fd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new _1(function wL(n,e,t){return function lL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new o1(n,new rc(e),t)}(n=(0,zt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Zo.RAW,r){this._throwIfRoot("putString");const i=CA(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new _1(new o1(this._delegate,new rc(i.data,!0),u),this)}listAll(){return function CL(n){return function dL(n){const e={prefixes:[],items:[]};return u1(n,e).then(()=>e)}(n=(0,zt.m9)(n))}(this._delegate).then(e=>new v1(e,this.storage))}list(e){return function DL(n,e){return l1(n=(0,zt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new v1(t,this.storage))}getMetadata(){return function EL(n){return function hL(n){n._throwIfRoot("getMetadata");const e=e1(n.storage,n._location,uw());return n.storage.makeRequestWithTokens(e,Pu)}(n=(0,zt.m9)(n))}(this._delegate)}updateMetadata(e){return function IL(n,e){return function fL(n,e){n._throwIfRoot("updateMetadata");const t=function WF(n,e,t,r){const u=kd(e.fullServerUrl(),n.host,n._protocol),m=TA(t,r),C=n.maxOperationRetryTime,T=new ic(u,"PATCH",YD(n,r),C);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=m,T.errorHandler=lw(e),T}(n.storage,n._location,e,uw());return n.storage.makeRequestWithTokens(t,Pu)}(n=(0,zt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function bL(n){return pL(n=(0,zt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function TL(n){return function gL(n){n._throwIfRoot("deleteObject");const e=function ZF(n,e){const r=kd(e.fullServerUrl(),n.host,n._protocol),m=new ic(r,"DELETE",function l(w,C){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=lw(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Pu)}(n=(0,zt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw HR(e)}}class w1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(E1(e))throw i_("ref() expected a child path but got a URL, use refFromURL instead.");return new Fd(m1(this._delegate,e),this)}refFromURL(e){if(!E1(e))throw i_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ls.makeFromUrl(e,this._delegate.host)}catch{throw i_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fd(m1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function y1(n,e,t,r={}){!function vL(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,zt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function E1(n){return/^[A-Za-z]+:\/\//.test(n)}function NL(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new w1(t,r)}function I1(n){const e=function kL(n){return new ai.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function Jk(n,e=Cm.z){return(0,Cr.e)((t,r)=>{let i=null,u=null,l=null;const m=()=>{if(i){i.unsubscribe(),i=null;const C=u;u=null,r.next(C)}};function w(){const C=l+n,T=e.now();if(T<C)return i=this.schedule(void 0,C-T),void r.add(i);m()}t.subscribe((0,mr.x)(r,C=>{u=C,l=e.now(),i||(i=e.schedule(w,n),r.add(i))},()=>{m(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,wt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function JD(n){return{getDownloadURL:()=>ot(void 0).pipe(An.fc,Fn(()=>n.getDownloadURL()),An.iC),getMetadata:()=>ot(void 0).pipe(An.fc,Fn(()=>n.getMetadata()),An.iC),delete:()=>(0,nn.D)(n.delete()),child:e=>JD(n.child(e)),updateMetadata:e=>(0,nn.D)(n.updateMetadata(e)),put:(e,t)=>I1(n.put(e,t)),putString:(e,t,r)=>I1(n.putString(e,t,r)),list:e=>(0,nn.D)(n.list(e)),listAll:()=>(0,nn.D)(n.listAll())}}!function OL(n){const e={TaskState:Ls,TaskEvent:JF,StringFormat:Zo,Storage:w1,Reference:Fd};n.INTERNAL.registerComponent(new kh.wA("storage-compat",NL,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Tm.Z);const FL=new d.OlP("angularfire2.storageBucket"),LL=new d.OlP("angularfire2.storage.maxUploadRetryTime"),VL=new d.OlP("angularfire2.storage.maxOperationRetryTime"),UL=new d.OlP("angularfire2.storage.use-emulator");let RA=(()=>{class n{constructor(t,r,i,u,l,m,w,C,T,P){const V=(0,li.on)(t,l,r);this.storage=(0,li.cc)(`${V.name}.storage.${i}`,"AngularFireStorage",V.name,()=>{const q=l.runOutsideAngular(()=>V.storage(i||void 0)),oe=T;return oe&&q.useEmulator(...oe),w&&q.setMaxUploadRetryTime(w),C&&q.setMaxOperationRetryTime(C),q},[w,C])}ref(t){return JD(this.storage.ref(t))}refFromURL(t){return JD(this.storage.refFromURL(t))}upload(t,r,i){return JD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(li.Dh),d.LFG(li.xv,8),d.LFG(FL,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(An.HU),d.LFG(LL,8),d.LFG(VL,8),d.LFG(UL,8),d.LFG(zD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),$L=(()=>{class n{constructor(){wR.Z.registerVersion("angularfire",An.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[RA],imports:[BL]}),n})(),eC=(()=>{class n{constructor(t,r){this.firestore=t,this.storage=r,this.animalCollection=t.collection("animals"),this.animals$=this.animalCollection.snapshotChanges().pipe((0,wt.U)(i=>i.map(u=>{const l=u.payload.doc.data();return{id:u.payload.doc.id,...l}})))}getAnimals(){return this.animals$}getAnimalById(t){return this.firestore.doc(`animals/${t}`).valueChanges({idField:t})}createAnimal(t,r){const i=this.storage.ref("animals/"+t.name);i.put(r).snapshotChanges().pipe(ga(()=>{i.getDownloadURL().subscribe(l=>{t.imageUrl=l,this.animalCollection.add(t)})})).subscribe()}getFavorites(){return this.animalCollection.valueChanges({idField:"id"}).pipe((0,wt.U)(t=>t.filter(r=>r.favorite)))}deleteAnimal(t){this.animalCollection.doc(t.id).delete()}favoriteAnimal(t){t.favorite=!t.favorite,this.animalCollection.doc(t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_A),d.LFG(RA))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),zg=(()=>{class n extends D1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const oc=new d.OlP("NgValueAccessor"),HL={provide:oc,useExisting:(0,d.Gpc)(()=>tC),multi:!0};let tC=(()=>{class n extends zg{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target.checked)})("blur",function(){return r.onTouched()})},features:[d._Bn([HL]),d.qOj]}),n})();const GL={provide:oc,useExisting:(0,d.Gpc)(()=>cw),multi:!0},qL=new d.OlP("CompositionEventMode");let cw=(()=>{class n extends D1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function zL(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(qL,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([GL]),d.qOj]}),n})();const WL=!1,cs=new d.OlP("NgValidators"),Nf=new d.OlP("NgAsyncValidators");function N1(n){return null!=n}function O1(n){const e=(0,d.QGY)(n)?(0,nn.D)(n):n;if(WL&&!(0,d.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new d.vHH(-1101,t)}return e}function k1(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function F1(n,e){return e.map(t=>t(n))}function L1(n){return n.map(e=>function KL(n){return!n.validate}(e)?e:t=>e.validate(t))}function PA(n){return null!=n?function V1(n){if(!n)return null;const e=n.filter(N1);return 0==e.length?null:function(t){return k1(F1(t,e))}}(L1(n)):null}function NA(n){return null!=n?function U1(n){if(!n)return null;const e=n.filter(N1);return 0==e.length?null:function(t){return function jL(...n){const e=(0,oi.jO)(n),{args:t,keys:r}=su(n),i=new ai.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,C=l;for(let T=0;T<l;T++){let P=!1;(0,fa.Xf)(t[T]).subscribe((0,mr.x)(u,V=>{P||(P=!0,C--),m[T]=V},()=>w--,void 0,()=>{(!w||!P)&&(C||u.next(r?Ys(r,m):m),u.complete())}))}});return e?i.pipe(Ks(e)):i}(F1(t,e).map(O1)).pipe((0,wt.U)(k1))}}(L1(n)):null}function B1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function OA(n){return n?Array.isArray(n)?n:[n]:[]}function rC(n,e){return Array.isArray(n)?n.includes(e):n===e}function H1(n,e){const t=OA(e);return OA(n).forEach(i=>{rC(t,i)||t.push(i)}),t}function G1(n,e){return OA(e).filter(t=>!rC(n,t))}class z1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=NA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vs extends z1{get formDirective(){return null}get path(){return null}}class Of extends z1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class q1{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dw=(()=>{class n extends q1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Of,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})();const hw="VALID",sC="INVALID",a_="PENDING",fw="DISABLED";function oC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Y1{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hw}get invalid(){return this.status===sC}get pending(){return this.status==a_}get disabled(){return this.status===fw}get enabled(){return this.status!==fw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(H1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(H1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(G1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(G1(e,this._rawAsyncValidators))}hasValidator(e){return rC(this._rawValidators,e)}hasAsyncValidator(e){return rC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=a_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hw||this.status===a_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fw:hw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=a_,this._hasOwnPendingAsyncValidator=!0;const t=O1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?fw:this.errors?sC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(a_)?a_:this._anyControlsHaveStatus(sC)?sC:hw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function r2(n){return Array.isArray(n)?PA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function i2(n){return Array.isArray(n)?NA(n):n||null}(this._rawAsyncValidators)}}const u_=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>aC}),aC="always";function pw(n,e,t=aC){(function $A(n,e){const t=function $1(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(B1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function j1(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(B1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();cC(e._rawValidators,i),cC(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function a2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Q1(n,e)})}(n,e),function l2(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function u2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Q1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function o2(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function cC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Q1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function eP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nP=class extends Y1{constructor(e=null,t,r){super(function VA(n){return(oC(n)?n.validators:n)||null}(t),function UA(n,e){return(oC(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},y2={provide:Of,useExisting:(0,d.Gpc)(()=>l_)},sP=(()=>Promise.resolve())();let l_=(()=>{class n extends Of{constructor(t,r,i,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new nP,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function GA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===cw?t=u:function h2(n){return Object.getPrototypeOf(n.constructor)===zg}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function HA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);sP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function uC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Vs,9),d.Y36(cs,10),d.Y36(Nf,10),d.Y36(oc,10),d.Y36(d.sBO,8),d.Y36(u_,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([y2]),d.qOj,d.TTD]}),n})(),aP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),j2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[aP]}),n})(),G2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:u_,useValue:t.callSetDisabledState??aC}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[j2]}),n})(),bP=(()=>{class n{transform(t,r){return r?t.filter(i=>i.favorite):t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=d.Yjl({name:"filterFavorites",type:n,pure:!0}),n})();function z2(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",13),d._UZ(1,"path",14),d.qZA())}function q2(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",15),d._UZ(1,"path",16),d.qZA())}function W2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"td"),d._UZ(2,"img",7),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td")(6,"button",8),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.favoriteAnimal(u))}),d._uU(7,"Toggle\xa0\xa0"),d.YNc(8,z2,2,0,"svg",9),d.YNc(9,q2,2,0,"svg",10),d.qZA()(),d.TgZ(10,"td")(11,"button",11),d._uU(12,"Select"),d.qZA(),d.TgZ(13,"button",12),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.deleteAnimal(u))}),d._uU(14,"Delete"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.MGl("alt","",t.description," "),d.Q6J("src",t.imageUrl,d.LSH),d.xp6(2),d.Oqu(t.name),d.xp6(4),d.Q6J("ngIf",t.favorite),d.xp6(1),d.Q6J("ngIf",!t.favorite),d.xp6(2),d.MGl("routerLink","/animals/",t.id,"")}}let Z2=(()=>{class n{constructor(t,r){this.animalService=t,this.router=r,this.animals=[],this.showFavorites=!1}ngOnInit(){this.getAnimals()}getAnimals(){this.animalService.getAnimals().subscribe(t=>this.animals=t)}deleteAnimal(t){t.id&&(this.animalService.deleteAnimal(t),this.router.navigate(["animals"]))}favoriteAnimal(t){t.id&&this.animalService.favoriteAnimal(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(eC),d.Y36(Zr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-animal-list"]],decls:27,vars:5,consts:[[1,"container","m-4"],["routerLink","/favorites",1,"btn","btn-primary","me-2"],["routerLink","/plants",1,"btn","btn-primary","me-2"],["routerLink","/animal",1,"btn","btn-success"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"table"],[4,"ngFor","ngForOf"],[2,"width","80px",3,"src","alt"],["type","button",1,"btn","btn-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-heart-fill","viewBox","0 0 16 16",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-heart","viewBox","0 0 16 16",4,"ngIf"],[1,"btn","btn-info","me-2",3,"routerLink"],[1,"btn","btn-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-heart-fill"],["fill-rule","evenodd","d","M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-heart"],["d","m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2"),d._uU(2,"Animals"),d.qZA(),d.TgZ(3,"button",1),d._uU(4,"Go to Favorites"),d.qZA(),d.TgZ(5,"button",2),d._uU(6,"Go to Plants"),d.qZA(),d.TgZ(7,"button",3),d._uU(8,"Create Animal"),d.qZA(),d._UZ(9,"hr"),d.TgZ(10,"label")(11,"input",4),d.NdJ("ngModelChange",function(u){return r.showFavorites=u}),d.qZA(),d._uU(12," Show only favorites "),d.qZA(),d.TgZ(13,"table",5)(14,"thead")(15,"tr")(16,"th"),d._uU(17,"Picture"),d.qZA(),d.TgZ(18,"th"),d._uU(19,"Name"),d.qZA(),d.TgZ(20,"th"),d._uU(21,"Favorite"),d.qZA(),d.TgZ(22,"th"),d._uU(23,"Actions"),d.qZA()()(),d.TgZ(24,"tbody"),d.YNc(25,W2,15,6,"tr",6),d.ALo(26,"filterFavorites"),d.qZA()()()),2&t&&(d.xp6(11),d.Q6J("ngModel",r.showFavorites),d.xp6(14),d.Q6J("ngForOf",d.xi3(26,2,r.animals,r.showFavorites)))},dependencies:[$s,Bi,wa,tC,dw,l_,bP]}),n})();function K2(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",8),d._UZ(1,"path",9),d.qZA())}function Y2(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",10),d._UZ(1,"path",11),d.qZA())}function Q2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1)(1,"h2"),d._uU(2,"Animal Detail"),d.qZA(),d.TgZ(3,"div")(4,"strong"),d._uU(5,"Name:"),d.qZA(),d._uU(6),d.qZA(),d.TgZ(7,"div")(8,"strong"),d._uU(9,"Description:"),d.qZA(),d._uU(10),d.qZA(),d._UZ(11,"br")(12,"img",2)(13,"br"),d.TgZ(14,"button",3),d._uU(15,"Go to Animals"),d.qZA(),d.TgZ(16,"button",4),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.favoriteAnimal())}),d._uU(17,"Toggle\xa0\xa0"),d.YNc(18,K2,2,0,"svg",5),d.YNc(19,Y2,2,0,"svg",6),d.qZA(),d.TgZ(20,"button",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.deleteAnimal())}),d._uU(21,"Delete"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(6),d.hij(" ",t.animal.name,""),d.xp6(4),d.hij(" ",t.animal.description,""),d.xp6(2),d.s9C("src",t.animal.imageUrl,d.LSH),d.MGl("alt","",t.animal.name," image"),d.xp6(6),d.Q6J("ngIf",t.animal.favorite),d.xp6(1),d.Q6J("ngIf",!t.animal.favorite)}}let X2=(()=>{class n{constructor(t,r){this.route=t,this.animalService=r}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&this.animalService.getAnimalById(t).subscribe(r=>{this.animal=r})}deleteAnimal(){this.animal&&this.animalService.deleteAnimal(this.animal)}favoriteAnimal(){this.animal&&this.animalService.favoriteAnimal(this.animal)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ar),d.Y36(eC))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-animal-detail"]],decls:1,vars:1,consts:[["class","container m-4",4,"ngIf"],[1,"container","m-4"],[1,"mb-2",2,"max-width","660px",3,"src","alt"],["routerLink","/animals",1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-heart-fill","viewBox","0 0 16 16",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-heart","viewBox","0 0 16 16",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-heart-fill"],["fill-rule","evenodd","d","M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-heart"],["d","m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"]],template:function(t,r){1&t&&d.YNc(0,Q2,22,6,"div",0),2&t&&d.Q6J("ngIf",r.animal)},dependencies:[Bi,wa]}),n})(),J2=(()=>{class n{constructor(t,r){this.animalService=t,this.router=r,this.newAnimal={name:"",description:"",favorite:!1}}createAnimal(){this.imageFile&&(this.animalService.createAnimal(this.newAnimal,this.imageFile),this.router.navigate(["animals"]))}onFileSelected(t){this.imageFile=t.target.files[0]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(eC),d.Y36(Zr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-animal-create"]],decls:19,vars:2,consts:[[1,"container","col-6","m-4"],[1,"form-group"],["for","name"],["type","text","id","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","mt-2"],["for","description"],["id","description","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","mt-2","mb-4"],["for","image"],["type","file","id","image",1,"form-control-file",3,"change"],[1,"btn","btn-success","me-2",3,"click"],["routerLink","/animals",1,"btn","btn-primary"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2"),d._uU(2,"Create Animal"),d.qZA(),d.TgZ(3,"div",1)(4,"label",2),d._uU(5,"Name: "),d.qZA(),d.TgZ(6,"input",3),d.NdJ("ngModelChange",function(u){return r.newAnimal.name=u}),d.qZA()(),d.TgZ(7,"div",4)(8,"label",5),d._uU(9,"Description: "),d.qZA(),d.TgZ(10,"textarea",6),d.NdJ("ngModelChange",function(u){return r.newAnimal.description=u}),d.qZA()(),d.TgZ(11,"div",7)(12,"label",8),d._uU(13,"Image:\xa0"),d.qZA(),d.TgZ(14,"input",9),d.NdJ("change",function(u){return r.onFileSelected(u)}),d.qZA()(),d.TgZ(15,"button",10),d.NdJ("click",function(){return r.createAnimal()}),d._uU(16,"Save"),d.qZA(),d.TgZ(17,"button",11),d._uU(18,"Go to Animals"),d.qZA()()),2&t&&(d.xp6(6),d.Q6J("ngModel",r.newAnimal.name),d.xp6(4),d.Q6J("ngModel",r.newAnimal.description))},dependencies:[wa,cw,dw,l_]}),n})(),hC=(()=>{class n{constructor(t,r){this.firestore=t,this.storage=r,this.plantCollection=t.collection("plants"),this.plants$=this.plantCollection.snapshotChanges().pipe((0,wt.U)(i=>i.map(u=>{const l=u.payload.doc.data();return{id:u.payload.doc.id,...l}})))}getPlants(){return this.plants$}createPlant(t,r){const i=this.storage.ref("plants/"+t.name);i.put(r).snapshotChanges().pipe(ga(()=>{i.getDownloadURL().subscribe(l=>{t.imageUrl=l,this.plantCollection.add(t)})})).subscribe()}deletePlant(t){this.plantCollection.doc(t.id).delete()}getPlantById(t){return this.firestore.doc(`plants/${t}`).valueChanges({idField:t})}getFavorites(){return this.plantCollection.valueChanges({idField:"id"}).pipe((0,wt.U)(t=>t.filter(r=>r.favorite)))}favoritePlant(t){t.favorite=!t.favorite,this.plantCollection.doc(t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_A),d.LFG(RA))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eV(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",13),d._UZ(1,"path",14),d.qZA())}function tV(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",15),d._UZ(1,"path",16),d.qZA())}function nV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"td"),d._UZ(2,"img",7),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td")(6,"button",8),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.favoritePlant(u))}),d._uU(7,"Toggle\xa0\xa0"),d.YNc(8,eV,2,0,"svg",9),d.YNc(9,tV,2,0,"svg",10),d.qZA()(),d.TgZ(10,"td")(11,"button",11),d._uU(12,"Select"),d.qZA(),d.TgZ(13,"button",12),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.deletePlant(u))}),d._uU(14,"Delete"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.MGl("alt","",t.description," "),d.Q6J("src",t.imageUrl,d.LSH),d.xp6(2),d.Oqu(t.name),d.xp6(4),d.Q6J("ngIf",t.favorite),d.xp6(1),d.Q6J("ngIf",!t.favorite),d.xp6(2),d.MGl("routerLink","/plants/",t.id,"")}}let rV=(()=>{class n{constructor(t,r){this.plantService=t,this.router=r,this.plants=[],this.showFavorites=!1}ngOnInit(){this.getPlants()}getPlants(){this.plantService.getPlants().subscribe(t=>this.plants=t)}deletePlant(t){t.id&&(this.plantService.deletePlant(t),this.router.navigate(["plants"]))}favoritePlant(t){t.id&&this.plantService.favoritePlant(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hC),d.Y36(Zr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-plant-list"]],decls:27,vars:5,consts:[[1,"container","m-4"],["routerLink","/favorites",1,"btn","btn-primary","me-2"],["routerLink","/animals",1,"btn","btn-primary","me-2"],["routerLink","/plant",1,"btn","btn-success"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"table"],[4,"ngFor","ngForOf"],[2,"width","80px",3,"src","alt"],["type","button",1,"btn","btn-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-heart-fill","viewBox","0 0 16 16",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-heart","viewBox","0 0 16 16",4,"ngIf"],[1,"btn","btn-info","me-2",3,"routerLink"],[1,"btn","btn-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-heart-fill"],["fill-rule","evenodd","d","M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-heart"],["d","m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2"),d._uU(2,"Plants"),d.qZA(),d.TgZ(3,"button",1),d._uU(4,"Go to Favorites"),d.qZA(),d.TgZ(5,"button",2),d._uU(6,"Go to Animals"),d.qZA(),d.TgZ(7,"button",3),d._uU(8,"Create Plant"),d.qZA(),d._UZ(9,"hr"),d.TgZ(10,"label")(11,"input",4),d.NdJ("ngModelChange",function(u){return r.showFavorites=u}),d.qZA(),d._uU(12," Show only favorites "),d.qZA(),d.TgZ(13,"table",5)(14,"thead")(15,"tr")(16,"th"),d._uU(17,"Picture"),d.qZA(),d.TgZ(18,"th"),d._uU(19,"Name"),d.qZA(),d.TgZ(20,"th"),d._uU(21,"Favorite"),d.qZA(),d.TgZ(22,"th"),d._uU(23,"Actions"),d.qZA()()(),d.TgZ(24,"tbody"),d.YNc(25,nV,15,6,"tr",6),d.ALo(26,"filterFavorites"),d.qZA()()()),2&t&&(d.xp6(11),d.Q6J("ngModel",r.showFavorites),d.xp6(14),d.Q6J("ngForOf",d.xi3(26,2,r.plants,r.showFavorites)))},dependencies:[$s,Bi,wa,tC,dw,l_,bP]}),n})(),iV=(()=>{class n{constructor(t,r){this.plantService=t,this.router=r,this.newPlant={name:"",description:"",favorite:!1}}createPlant(){this.imageFile&&(this.plantService.createPlant(this.newPlant,this.imageFile),this.router.navigate(["plants"]))}onFileSelected(t){this.imageFile=t.target.files[0]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hC),d.Y36(Zr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-plant-create"]],decls:19,vars:2,consts:[[1,"container","col-6","m-4"],[1,"form-group","mt-2"],["for","name"],["type","text","id","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["id","description","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","mt-2","mb-4"],["for","image"],["type","file","id","image",1,"form-control-file",3,"change"],[1,"btn","btn-success","me-2",3,"click"],["routerLink","/plants",1,"btn","btn-primary"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2"),d._uU(2,"Create Plant"),d.qZA(),d.TgZ(3,"div",1)(4,"label",2),d._uU(5,"Name: "),d.qZA(),d.TgZ(6,"input",3),d.NdJ("ngModelChange",function(u){return r.newPlant.name=u}),d.qZA()(),d.TgZ(7,"div",1)(8,"label",4),d._uU(9,"Description: "),d.qZA(),d.TgZ(10,"textarea",5),d.NdJ("ngModelChange",function(u){return r.newPlant.description=u}),d.qZA()(),d.TgZ(11,"div",6)(12,"label",7),d._uU(13,"Image:\xa0"),d.qZA(),d.TgZ(14,"input",8),d.NdJ("change",function(u){return r.onFileSelected(u)}),d.qZA()(),d.TgZ(15,"button",9),d.NdJ("click",function(){return r.createPlant()}),d._uU(16,"Save"),d.qZA(),d.TgZ(17,"button",10),d._uU(18,"Go to Plants"),d.qZA()()),2&t&&(d.xp6(6),d.Q6J("ngModel",r.newPlant.name),d.xp6(4),d.Q6J("ngModel",r.newPlant.description))},dependencies:[wa,cw,dw,l_]}),n})();function sV(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",8),d._UZ(1,"path",9),d.qZA())}function oV(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",10),d._UZ(1,"path",11),d.qZA())}function aV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1)(1,"h2"),d._uU(2,"Plant Detail"),d.qZA(),d.TgZ(3,"div")(4,"strong"),d._uU(5,"Name:"),d.qZA(),d._uU(6),d.qZA(),d.TgZ(7,"div")(8,"strong"),d._uU(9,"Description:"),d.qZA(),d._uU(10),d.qZA(),d._UZ(11,"br")(12,"img",2)(13,"br"),d.TgZ(14,"button",3),d._uU(15,"Go to Plants"),d.qZA(),d.TgZ(16,"button",4),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.favoritePlant())}),d._uU(17,"Toggle\xa0\xa0"),d.YNc(18,sV,2,0,"svg",5),d.YNc(19,oV,2,0,"svg",6),d.qZA(),d.TgZ(20,"button",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.deletePlant())}),d._uU(21,"Delete"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(6),d.hij(" ",t.plant.name,""),d.xp6(4),d.hij(" ",t.plant.description,""),d.xp6(2),d.s9C("src",t.plant.imageUrl,d.LSH),d.MGl("alt","",t.plant.name," image"),d.xp6(6),d.Q6J("ngIf",t.plant.favorite),d.xp6(1),d.Q6J("ngIf",!t.plant.favorite)}}let uV=(()=>{class n{constructor(t,r){this.route=t,this.plantService=r}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&this.plantService.getPlantById(t).subscribe(r=>{this.plant=r})}deletePlant(){this.plant&&this.plantService.deletePlant(this.plant)}favoritePlant(){this.plant&&this.plantService.favoritePlant(this.plant)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ar),d.Y36(hC))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-plant-detail"]],decls:1,vars:1,consts:[["class","container col-6 m-4",4,"ngIf"],[1,"container","col-6","m-4"],[1,"mb-2",2,"max-width","660px",3,"src","alt"],["routerLink","/plants",1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-heart-fill","viewBox","0 0 16 16",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-heart","viewBox","0 0 16 16",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-heart-fill"],["fill-rule","evenodd","d","M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-heart"],["d","m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"]],template:function(t,r){1&t&&d.YNc(0,aV,22,6,"div",0),2&t&&d.Q6J("ngIf",r.plant)},dependencies:[Bi,wa]}),n})();function lV(n,e){if(1&n&&(d.TgZ(0,"div",6)(1,"div",7)(2,"div")(3,"strong"),d._uU(4,"Name:"),d.qZA(),d._uU(5),d.qZA(),d.TgZ(6,"div")(7,"strong"),d._uU(8,"Description:"),d.qZA(),d._uU(9),d.qZA(),d._UZ(10,"br")(11,"img",8),d.qZA()()),2&n){const t=e.$implicit;d.xp6(5),d.hij(" ",t.name,""),d.xp6(4),d.hij(" ",t.description,""),d.xp6(2),d.s9C("src",t.imageUrl,d.LSH),d.MGl("alt","",t.name," image")}}function cV(n,e){if(1&n&&(d.TgZ(0,"div",6)(1,"div",7)(2,"div")(3,"strong"),d._uU(4,"Name:"),d.qZA(),d._uU(5),d.qZA(),d.TgZ(6,"div")(7,"strong"),d._uU(8,"Description:"),d.qZA(),d._uU(9),d.qZA(),d._UZ(10,"br")(11,"img",8),d.qZA()()),2&n){const t=e.$implicit;d.xp6(5),d.hij(" ",t.name,""),d.xp6(4),d.hij(" ",t.description,""),d.xp6(2),d.s9C("src",t.imageUrl,d.LSH),d.MGl("alt","",t.name," image")}}const dV=[{path:"",redirectTo:"/favorites",pathMatch:"full"},{path:"animals/:id",component:X2},{path:"animal",component:J2},{path:"animals",component:Z2},{path:"plants/:id",component:uV},{path:"plant",component:iV},{path:"plants",component:rV},{path:"favorites",component:(()=>{class n{constructor(t,r){this.animalService=t,this.plantService=r,this.animals=[],this.plants=[]}ngOnInit(){this.animalService.getFavorites().subscribe(t=>this.animals=t),this.plantService.getFavorites().subscribe(t=>this.plants=t)}favoritePlant(t){}deletePlant(t){}favoriteAnimal(t){}deleteAnimal(t){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(eC),d.Y36(hC))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-favorites"]],decls:18,vars:2,consts:[[1,"container","m-4"],["routerLink","/plants",1,"btn","btn-primary","me-2"],["routerLink","/animals",1,"btn","btn-primary","me-2"],[1,"row"],[1,"col-6"],["class","card mt-2",4,"ngFor","ngForOf"],[1,"card","mt-2"],[1,"card-body"],[1,"mb-2",2,"width","100%",3,"src","alt"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2"),d._uU(2,"Favorites"),d.qZA(),d.TgZ(3,"button",1),d._uU(4,"Go to Plants "),d.qZA(),d.TgZ(5,"button",2),d._uU(6,"Go to Animals "),d.qZA(),d._UZ(7,"hr"),d.TgZ(8,"div",3)(9,"div",4)(10,"h4"),d._uU(11,"Animals"),d.qZA(),d.YNc(12,lV,12,4,"div",5),d.qZA(),d._UZ(13,"br"),d.TgZ(14,"div",4)(15,"h4"),d._uU(16,"Plants"),d.qZA(),d.YNc(17,cV,12,4,"div",5),d.qZA()()()),2&t&&(d.xp6(12),d.Q6J("ngForOf",r.animals),d.xp6(5),d.Q6J("ngForOf",r.plants))},dependencies:[$s,wa]}),n})()}];let hV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[qC.forRoot(dV),qC]}),n})(),fV=(()=>{class n{constructor(){this.title="angular-favoritos-plantas-animales"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[K]}),n})();const pV={apiKey:"AIzaSyDMg3i_HPHF6ZGVLYFgupLT4Y5jipK-1Tg",authDomain:"favoritos-plantas-animales.firebaseapp.com",projectId:"favoritos-plantas-animales",storageBucket:"favoritos-plantas-animales.appspot.com",messagingSenderId:"820281706374",appId:"1:820281706374:web:93abe25e9e16539be50e07"};let gV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[fV]}),n.\u0275inj=d.cJS({imports:[da,hV,li.hO.initializeApp(pV),Xk,$L,G2]}),n})();Dc().bootstrapModule(gV).catch(n=>console.error(n))},9751:(It,be,k)=>{k.d(be,{y:()=>_e});var d=k(2961),Q=k(727),O=k(8822),se=k(9635),re=k(2416),ie=k(576),ge=k(2806);let _e=(()=>{class W{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const We=new W;return We.source=this,We.operator=Ce,We}subscribe(Ce,We,ht){const he=function $(W){return W&&W instanceof d.Lv||function j(W){return W&&(0,ie.m)(W.next)&&(0,ie.m)(W.error)&&(0,ie.m)(W.complete)}(W)&&(0,Q.Nn)(W)}(Ce)?Ce:new d.Hp(Ce,We,ht);return(0,ge.x)(()=>{const{operator:Me,source:Re}=this;he.add(Me?Me.call(he,Re):Re?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(We){Ce.error(We)}}forEach(Ce,We){return new(We=ce(We))((ht,he)=>{const Me=new d.Hp({next:Re=>{try{Ce(Re)}catch(Ve){he(Ve),Me.unsubscribe()}},error:he,complete:ht});this.subscribe(Me)})}_subscribe(Ce){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Ce)}[O.L](){return this}pipe(...Ce){return(0,se.U)(Ce)(this)}toPromise(Ce){return new(Ce=ce(Ce))((We,ht)=>{let he;this.subscribe(Me=>he=Me,Me=>ht(Me),()=>We(he))})}}return W.create=je=>new W(je),W})();function ce(W){var je;return null!==(je=W??re.v.Promise)&&void 0!==je?je:Promise}},7579:(It,be,k)=>{k.d(be,{x:()=>ge});var d=k(9751),Q=k(727);const se=(0,k(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),ie=k(2806);let ge=(()=>{class ce extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const W=new _e(this,this);return W.operator=$,W}_throwIfClosed(){if(this.closed)throw new se}next($){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next($)}})}error($){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:W}=this;for(;W.length;)W.shift().error($)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:W,isStopped:je,observers:Ce}=this;return W||je?Q.Lc:(this.currentObservers=null,Ce.push($),new Q.w0(()=>{this.currentObservers=null,(0,re.P)(Ce,$)}))}_checkFinalizedStatuses($){const{hasError:W,thrownError:je,isStopped:Ce}=this;W?$.error(je):Ce&&$.complete()}asObservable(){const $=new d.y;return $.source=this,$}}return ce.create=(j,$)=>new _e(j,$),ce})();class _e extends ge{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===W||W.call($,j)}error(j){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===W||W.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,W;return null!==(W=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==W?W:Q.Lc}}},2961:(It,be,k)=>{k.d(be,{Hp:()=>ht,Lv:()=>W});var d=k(576),Q=k(727),O=k(2416),se=k(7849);function re(){}const ie=ce("C",void 0,void 0);function ce(Pe,ve,we){return{kind:Pe,value:ve,error:we}}var j=k(3410),$=k(2806);class W extends Q.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,Q.Nn)(ve)&&ve.add(this)):this.destination=Ve}static create(ve,we,He){return new ht(ve,we,He)}next(ve){this.isStopped?Re(function _e(Pe){return ce("N",Pe,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Re(function ge(Pe){return ce("E",void 0,Pe)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Re(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Ce(Pe,ve){return je.call(Pe,ve)}class We{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:we}=this;if(we.next)try{we.next(ve)}catch(He){he(He)}}error(ve){const{partialObserver:we}=this;if(we.error)try{we.error(ve)}catch(He){he(He)}else he(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(we){he(we)}}}class ht extends W{constructor(ve,we,He){let Oe;if(super(),(0,d.m)(ve)||!ve)Oe={next:ve??void 0,error:we??void 0,complete:He??void 0};else{let rt;this&&O.v.useDeprecatedNextContext?(rt=Object.create(ve),rt.unsubscribe=()=>this.unsubscribe(),Oe={next:ve.next&&Ce(ve.next,rt),error:ve.error&&Ce(ve.error,rt),complete:ve.complete&&Ce(ve.complete,rt)}):Oe=ve}this.destination=new We(Oe)}}function he(Pe){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Pe):(0,se.h)(Pe)}function Re(Pe,ve){const{onStoppedNotification:we}=O.v;we&&j.z.setTimeout(()=>we(Pe,ve))}const Ve={closed:!0,next:re,error:function Me(Pe){throw Pe},complete:re}},727:(It,be,k)=>{k.d(be,{Lc:()=>ie,w0:()=>re,Nn:()=>ge});var d=k(576);const O=(0,k(3888).d)(ce=>function($){ce(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((W,je)=>`${je+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var se=k(8737);class re{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ce of $)Ce.remove(this);else $.remove(this);const{initialTeardown:W}=this;if((0,d.m)(W))try{W()}catch(Ce){j=Ce instanceof O?Ce.errors:[Ce]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Ce of je)try{_e(Ce)}catch(We){j=j??[],We instanceof O?j=[...j,...We.errors]:j.push(We)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)_e(j);else{if(j instanceof re){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,se.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,se.P)($,j),j instanceof re&&j._removeParent(this)}}re.EMPTY=(()=>{const ce=new re;return ce.closed=!0,ce})();const ie=re.EMPTY;function ge(ce){return ce instanceof re||ce&&"closed"in ce&&(0,d.m)(ce.remove)&&(0,d.m)(ce.add)&&(0,d.m)(ce.unsubscribe)}function _e(ce){(0,d.m)(ce)?ce():ce.unsubscribe()}},2416:(It,be,k)=>{k.d(be,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(It,be,k)=>{k.d(be,{E:()=>Q});const Q=new(k(9751).y)(re=>re.complete())},8996:(It,be,k)=>{k.d(be,{D:()=>ve});var d=k(8421),Q=k(5363),O=k(9468),ie=k(9751),_e=k(2202),ce=k(576),j=k(9672);function W(we,He){if(!we)throw new Error("Iterable cannot be null");return new ie.y(Oe=>{(0,j.f)(Oe,He,()=>{const rt=we[Symbol.asyncIterator]();(0,j.f)(Oe,He,()=>{rt.next().then(ne=>{ne.done?Oe.complete():Oe.next(ne.value)})},0,!0)})})}var je=k(3670),Ce=k(8239),We=k(1144),ht=k(6495),he=k(2206),Me=k(4532),Re=k(3260);function ve(we,He){return He?function Pe(we,He){if(null!=we){if((0,je.c)(we))return function se(we,He){return(0,d.Xf)(we).pipe((0,O.R)(He),(0,Q.Q)(He))}(we,He);if((0,We.z)(we))return function ge(we,He){return new ie.y(Oe=>{let rt=0;return He.schedule(function(){rt===we.length?Oe.complete():(Oe.next(we[rt++]),Oe.closed||this.schedule())})})}(we,He);if((0,Ce.t)(we))return function re(we,He){return(0,d.Xf)(we).pipe((0,O.R)(He),(0,Q.Q)(He))}(we,He);if((0,he.D)(we))return W(we,He);if((0,ht.T)(we))return function $(we,He){return new ie.y(Oe=>{let rt;return(0,j.f)(Oe,He,()=>{rt=we[_e.h](),(0,j.f)(Oe,He,()=>{let ne,Tt;try{({value:ne,done:Tt}=rt.next())}catch(et){return void Oe.error(et)}Tt?Oe.complete():Oe.next(ne)},0,!0)}),()=>(0,ce.m)(rt?.return)&&rt.return()})}(we,He);if((0,Re.L)(we))return function Ve(we,He){return W((0,Re.Q)(we),He)}(we,He)}throw(0,Me.z)(we)}(we,He):(0,d.Xf)(we)}},8421:(It,be,k)=>{k.d(be,{Xf:()=>je});var d=k(655),Q=k(1144),O=k(8239),se=k(9751),re=k(3670),ie=k(2206),ge=k(4532),_e=k(6495),ce=k(3260),j=k(576),$=k(7849),W=k(8822);function je(Pe){if(Pe instanceof se.y)return Pe;if(null!=Pe){if((0,re.c)(Pe))return function Ce(Pe){return new se.y(ve=>{const we=Pe[W.L]();if((0,j.m)(we.subscribe))return we.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,Q.z)(Pe))return function We(Pe){return new se.y(ve=>{for(let we=0;we<Pe.length&&!ve.closed;we++)ve.next(Pe[we]);ve.complete()})}(Pe);if((0,O.t)(Pe))return function ht(Pe){return new se.y(ve=>{Pe.then(we=>{ve.closed||(ve.next(we),ve.complete())},we=>ve.error(we)).then(null,$.h)})}(Pe);if((0,ie.D)(Pe))return Me(Pe);if((0,_e.T)(Pe))return function he(Pe){return new se.y(ve=>{for(const we of Pe)if(ve.next(we),ve.closed)return;ve.complete()})}(Pe);if((0,ce.L)(Pe))return function Re(Pe){return Me((0,ce.Q)(Pe))}(Pe)}throw(0,ge.z)(Pe)}function Me(Pe){return new se.y(ve=>{(function Ve(Pe,ve){var we,He,Oe,rt;return(0,d.mG)(this,void 0,void 0,function*(){try{for(we=(0,d.KL)(Pe);!(He=yield we.next()).done;)if(ve.next(He.value),ve.closed)return}catch(ne){Oe={error:ne}}finally{try{He&&!He.done&&(rt=we.return)&&(yield rt.call(we))}finally{if(Oe)throw Oe.error}}ve.complete()})})(Pe,ve).catch(we=>ve.error(we))})}},6451:(It,be,k)=>{k.d(be,{T:()=>ie});var d=k(8189),Q=k(8421),O=k(515),se=k(7669),re=k(8996);function ie(...ge){const _e=(0,se.yG)(ge),ce=(0,se._6)(ge,1/0),j=ge;return j.length?1===j.length?(0,Q.Xf)(j[0]):(0,d.J)(ce)((0,re.D)(j,_e)):O.E}},5403:(It,be,k)=>{k.d(be,{x:()=>Q});var d=k(2961);function Q(se,re,ie,ge,_e){return new O(se,re,ie,ge,_e)}class O extends d.Lv{constructor(re,ie,ge,_e,ce,j){super(re),this.onFinalize=ce,this.shouldUnsubscribe=j,this._next=ie?function($){try{ie($)}catch(W){re.error(W)}}:super._next,this._error=_e?function($){try{_e($)}catch(W){re.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch($){re.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(It,be,k)=>{k.d(be,{U:()=>O});var d=k(4482),Q=k(5403);function O(se,re){return(0,d.e)((ie,ge)=>{let _e=0;ie.subscribe((0,Q.x)(ge,ce=>{ge.next(se.call(re,ce,_e++))}))})}},8189:(It,be,k)=>{k.d(be,{J:()=>O});var d=k(5577),Q=k(4671);function O(se=1/0){return(0,d.z)(Q.y,se)}},5577:(It,be,k)=>{k.d(be,{z:()=>_e});var d=k(4004),Q=k(8421),O=k(4482),se=k(9672),re=k(5403),ge=k(576);function _e(ce,j,$=1/0){return(0,ge.m)(j)?_e((W,je)=>(0,d.U)((Ce,We)=>j(W,Ce,je,We))((0,Q.Xf)(ce(W,je))),$):("number"==typeof j&&($=j),(0,O.e)((W,je)=>function ie(ce,j,$,W,je,Ce,We,ht){const he=[];let Me=0,Re=0,Ve=!1;const Pe=()=>{Ve&&!he.length&&!Me&&j.complete()},ve=He=>Me<W?we(He):he.push(He),we=He=>{Ce&&j.next(He),Me++;let Oe=!1;(0,Q.Xf)($(He,Re++)).subscribe((0,re.x)(j,rt=>{je?.(rt),Ce?ve(rt):j.next(rt)},()=>{Oe=!0},void 0,()=>{if(Oe)try{for(Me--;he.length&&Me<W;){const rt=he.shift();We?(0,se.f)(j,We,()=>we(rt)):we(rt)}Pe()}catch(rt){j.error(rt)}}))};return ce.subscribe((0,re.x)(j,ve,()=>{Ve=!0,Pe()})),()=>{ht?.()}}(W,je,ce,$)))}},5363:(It,be,k)=>{k.d(be,{Q:()=>se});var d=k(9672),Q=k(4482),O=k(5403);function se(re,ie=0){return(0,Q.e)((ge,_e)=>{ge.subscribe((0,O.x)(_e,ce=>(0,d.f)(_e,re,()=>_e.next(ce),ie),()=>(0,d.f)(_e,re,()=>_e.complete(),ie),ce=>(0,d.f)(_e,re,()=>_e.error(ce),ie)))})}},3099:(It,be,k)=>{k.d(be,{B:()=>re});var d=k(8421),Q=k(7579),O=k(2961),se=k(4482);function re(ge={}){const{connector:_e=(()=>new Q.x),resetOnError:ce=!0,resetOnComplete:j=!0,resetOnRefCountZero:$=!0}=ge;return W=>{let je,Ce,We,ht=0,he=!1,Me=!1;const Re=()=>{Ce?.unsubscribe(),Ce=void 0},Ve=()=>{Re(),je=We=void 0,he=Me=!1},Pe=()=>{const ve=je;Ve(),ve?.unsubscribe()};return(0,se.e)((ve,we)=>{ht++,!Me&&!he&&Re();const He=We=We??_e();we.add(()=>{ht--,0===ht&&!Me&&!he&&(Ce=ie(Pe,$))}),He.subscribe(we),!je&&ht>0&&(je=new O.Hp({next:Oe=>He.next(Oe),error:Oe=>{Me=!0,Re(),Ce=ie(Ve,ce,Oe),He.error(Oe)},complete:()=>{he=!0,Re(),Ce=ie(Ve,j),He.complete()}}),(0,d.Xf)(ve).subscribe(je))})(W)}}function ie(ge,_e,...ce){if(!0===_e)return void ge();if(!1===_e)return;const j=new O.Hp({next:()=>{j.unsubscribe(),ge()}});return(0,d.Xf)(_e(...ce)).subscribe(j)}},9468:(It,be,k)=>{k.d(be,{R:()=>Q});var d=k(4482);function Q(O,se=0){return(0,d.e)((re,ie)=>{ie.add(O.schedule(()=>re.subscribe(ie),se))})}},8505:(It,be,k)=>{k.d(be,{b:()=>re});var d=k(576),Q=k(4482),O=k(5403),se=k(4671);function re(ie,ge,_e){const ce=(0,d.m)(ie)||ge||_e?{next:ie,error:ge,complete:_e}:ie;return ce?(0,Q.e)((j,$)=>{var W;null===(W=ce.subscribe)||void 0===W||W.call(ce);let je=!0;j.subscribe((0,O.x)($,Ce=>{var We;null===(We=ce.next)||void 0===We||We.call(ce,Ce),$.next(Ce)},()=>{var Ce;je=!1,null===(Ce=ce.complete)||void 0===Ce||Ce.call(ce),$.complete()},Ce=>{var We;je=!1,null===(We=ce.error)||void 0===We||We.call(ce,Ce),$.error(Ce)},()=>{var Ce,We;je&&(null===(Ce=ce.unsubscribe)||void 0===Ce||Ce.call(ce)),null===(We=ce.finalize)||void 0===We||We.call(ce)}))}):se.y}},4408:(It,be,k)=>{k.d(be,{o:()=>re});var d=k(727);class Q extends d.w0{constructor(ge,_e){super()}schedule(ge,_e=0){return this}}const O={setInterval(ie,ge,..._e){const{delegate:ce}=O;return ce?.setInterval?ce.setInterval(ie,ge,..._e):setInterval(ie,ge,..._e)},clearInterval(ie){const{delegate:ge}=O;return(ge?.clearInterval||clearInterval)(ie)},delegate:void 0};var se=k(8737);class re extends Q{constructor(ge,_e){super(ge,_e),this.scheduler=ge,this.work=_e,this.pending=!1}schedule(ge,_e=0){var ce;if(this.closed)return this;this.state=ge;const j=this.id,$=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId($,j,_e)),this.pending=!0,this.delay=_e,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId($,this.id,_e),this}requestAsyncId(ge,_e,ce=0){return O.setInterval(ge.flush.bind(ge,this),ce)}recycleAsyncId(ge,_e,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return _e;null!=_e&&O.clearInterval(_e)}execute(ge,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ge,_e);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,_e){let j,ce=!1;try{this.work(ge)}catch($){ce=!0,j=$||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ge,scheduler:_e}=this,{actions:ce}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ce,this),null!=ge&&(this.id=this.recycleAsyncId(_e,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(It,be,k)=>{k.d(be,{v:()=>O});var d=k(6063);class Q{constructor(re,ie=Q.now){this.schedulerActionCtor=re,this.now=ie}schedule(re,ie=0,ge){return new this.schedulerActionCtor(this,re).schedule(ge,ie)}}Q.now=d.l.now;class O extends Q{constructor(re,ie=Q.now){super(re,ie),this.actions=[],this._active=!1}flush(re){const{actions:ie}=this;if(this._active)return void ie.push(re);let ge;this._active=!0;do{if(ge=re.execute(re.state,re.delay))break}while(re=ie.shift());if(this._active=!1,ge){for(;re=ie.shift();)re.unsubscribe();throw ge}}}},4986:(It,be,k)=>{k.d(be,{z:()=>O});var d=k(4408);const O=new(k(7565).v)(d.o)},6063:(It,be,k)=>{k.d(be,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(It,be,k)=>{k.d(be,{z:()=>d});const d={setTimeout(Q,O,...se){const{delegate:re}=d;return re?.setTimeout?re.setTimeout(Q,O,...se):setTimeout(Q,O,...se)},clearTimeout(Q){const{delegate:O}=d;return(O?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(It,be,k)=>{k.d(be,{h:()=>Q});const Q=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(It,be,k)=>{k.d(be,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(It,be,k)=>{k.d(be,{_6:()=>ie,jO:()=>se,yG:()=>re});var d=k(576);function O(ge){return ge[ge.length-1]}function se(ge){return(0,d.m)(O(ge))?ge.pop():void 0}function re(ge){return function Q(ge){return ge&&(0,d.m)(ge.schedule)}(O(ge))?ge.pop():void 0}function ie(ge,_e){return"number"==typeof O(ge)?ge.pop():_e}},8737:(It,be,k)=>{function d(Q,O){if(Q){const se=Q.indexOf(O);0<=se&&Q.splice(se,1)}}k.d(be,{P:()=>d})},3888:(It,be,k)=>{function d(Q){const se=Q(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(be,{d:()=>d})},2806:(It,be,k)=>{k.d(be,{O:()=>se,x:()=>O});var d=k(2416);let Q=null;function O(re){if(d.v.useDeprecatedSynchronousErrorHandling){const ie=!Q;if(ie&&(Q={errorThrown:!1,error:null}),re(),ie){const{errorThrown:ge,error:_e}=Q;if(Q=null,ge)throw _e}}else re()}function se(re){d.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=re)}},9672:(It,be,k)=>{function d(Q,O,se,re=0,ie=!1){const ge=O.schedule(function(){se(),ie?Q.add(this.schedule(null,re)):this.unsubscribe()},re);if(Q.add(ge),!ie)return ge}k.d(be,{f:()=>d})},4671:(It,be,k)=>{function d(Q){return Q}k.d(be,{y:()=>d})},1144:(It,be,k)=>{k.d(be,{z:()=>d});const d=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(It,be,k)=>{k.d(be,{D:()=>Q});var d=k(576);function Q(O){return Symbol.asyncIterator&&(0,d.m)(O?.[Symbol.asyncIterator])}},576:(It,be,k)=>{function d(Q){return"function"==typeof Q}k.d(be,{m:()=>d})},3670:(It,be,k)=>{k.d(be,{c:()=>O});var d=k(8822),Q=k(576);function O(se){return(0,Q.m)(se[d.L])}},6495:(It,be,k)=>{k.d(be,{T:()=>O});var d=k(2202),Q=k(576);function O(se){return(0,Q.m)(se?.[d.h])}},8239:(It,be,k)=>{k.d(be,{t:()=>Q});var d=k(576);function Q(O){return(0,d.m)(O?.then)}},3260:(It,be,k)=>{k.d(be,{L:()=>se,Q:()=>O});var d=k(655),Q=k(576);function O(re){return(0,d.FC)(this,arguments,function*(){const ge=re.getReader();try{for(;;){const{value:_e,done:ce}=yield(0,d.qq)(ge.read());if(ce)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(_e)}}finally{ge.releaseLock()}})}function se(re){return(0,Q.m)(re?.getReader)}},4482:(It,be,k)=>{k.d(be,{A:()=>Q,e:()=>O});var d=k(576);function Q(se){return(0,d.m)(se?.lift)}function O(se){return re=>{if(Q(re))return re.lift(function(ie){try{return se(ie,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(It,be,k)=>{k.d(be,{U:()=>O,z:()=>Q});var d=k(4671);function Q(...se){return O(se)}function O(se){return 0===se.length?d.y:1===se.length?se[0]:function(ie){return se.reduce((ge,_e)=>_e(ge),ie)}}},7849:(It,be,k)=>{k.d(be,{h:()=>O});var d=k(2416),Q=k(3410);function O(se){Q.z.setTimeout(()=>{const{onUnhandledError:re}=d.v;if(!re)throw se;re(se)})}},4532:(It,be,k)=>{function d(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(be,{z:()=>d})},655:(It,be,k)=>{function se(de,fe){var De={};for(var Te in de)Object.prototype.hasOwnProperty.call(de,Te)&&fe.indexOf(Te)<0&&(De[Te]=de[Te]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(Te=Object.getOwnPropertySymbols(de);Ge<Te.length;Ge++)fe.indexOf(Te[Ge])<0&&Object.prototype.propertyIsEnumerable.call(de,Te[Ge])&&(De[Te[Ge]]=de[Te[Ge]])}return De}function W(de,fe,De,Te){return new(De||(De=Promise))(function(Ue,ft){function ct(Wt){try{Qe(Te.next(Wt))}catch(bt){ft(bt)}}function Ot(Wt){try{Qe(Te.throw(Wt))}catch(bt){ft(bt)}}function Qe(Wt){Wt.done?Ue(Wt.value):function Ge(Ue){return Ue instanceof De?Ue:new De(function(ft){ft(Ue)})}(Wt.value).then(ct,Ot)}Qe((Te=Te.apply(de,fe||[])).next())})}function Pe(de){return this instanceof Pe?(this.v=de,this):new Pe(de)}function ve(de,fe,De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,Te=De.apply(de,fe||[]),Ue=[];return Ge={},ft("next"),ft("throw"),ft("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function ft(on){Te[on]&&(Ge[on]=function(_n){return new Promise(function(Cn,xr){Ue.push([on,_n,Cn,xr])>1||ct(on,_n)})})}function ct(on,_n){try{!function Ot(on){on.value instanceof Pe?Promise.resolve(on.value.v).then(Qe,Wt):bt(Ue[0][2],on)}(Te[on](_n))}catch(Cn){bt(Ue[0][3],Cn)}}function Qe(on){ct("next",on)}function Wt(on){ct("throw",on)}function bt(on,_n){on(_n),Ue.shift(),Ue.length&&ct(Ue[0][0],Ue[0][1])}}function He(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,fe=de[Symbol.asyncIterator];return fe?fe.call(de):(de=function ht(de){var fe="function"==typeof Symbol&&Symbol.iterator,De=fe&&de[fe],Te=0;if(De)return De.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Te>=de.length&&(de=void 0),{value:de&&de[Te++],done:!de}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),De={},Te("next"),Te("throw"),Te("return"),De[Symbol.asyncIterator]=function(){return this},De);function Te(Ue){De[Ue]=de[Ue]&&function(ft){return new Promise(function(ct,Ot){!function Ge(Ue,ft,ct,Ot){Promise.resolve(Ot).then(function(Qe){Ue({value:Qe,done:ct})},ft)}(ct,Ot,(ft=de[Ue](ft)).done,ft.value)})}}}k.d(be,{FC:()=>ve,KL:()=>He,_T:()=>se,mG:()=>W,qq:()=>Pe})},4650:(It,be,k)=>{k.d(be,{$8M:()=>ca,$WT:()=>hr,$Z:()=>zw,AFp:()=>GI,ALo:()=>c0,AaK:()=>_e,CHM:()=>Ha,CRH:()=>wy,CZH:()=>Cg,CqO:()=>bv,D6c:()=>hT,EJc:()=>Kb,EpF:()=>$m,F4k:()=>Cv,FYo:()=>$_,FiY:()=>ou,GfV:()=>bw,Gpc:()=>$,JOm:()=>Dt,KtG:()=>Ga,LFG:()=>un,LSH:()=>Yc,Lbi:()=>Tg,Lck:()=>ly,MGl:()=>zm,MMx:()=>Oi,NdJ:()=>Tv,O4$:()=>Ka,OlP:()=>Xt,Oqu:()=>Jm,P3R:()=>Dh,PXZ:()=>Mu,Q6J:()=>sd,QGY:()=>jm,Qsj:()=>wC,R0b:()=>Ns,RDi:()=>am,Rgc:()=>yd,SBq:()=>xh,Sil:()=>Jb,Suo:()=>hg,TTD:()=>dc,TgZ:()=>Hh,X6Q:()=>bd,XFs:()=>gt,Xpm:()=>Ui,Xts:()=>R_,Y36:()=>Oh,YKP:()=>xn,YNc:()=>Bm,Yjl:()=>Gt,Yz7:()=>bt,Z0I:()=>xr,ZZ4:()=>$y,_Bn:()=>bu,_UZ:()=>ad,_Vd:()=>Ah,_c5:()=>jy,_uU:()=>PE,aQg:()=>$0,c2e:()=>zI,cJS:()=>_n,cg1:()=>zv,dDg:()=>A0,dqk:()=>rn,eFA:()=>Ql,eJc:()=>Fi,ekj:()=>Km,eoX:()=>x0,f3M:()=>On,g9A:()=>wf,h0i:()=>fd,hGG:()=>dD,hij:()=>Ul,iGM:()=>y0,ifc:()=>ye,ip1:()=>Dg,jDz:()=>lI,kL8:()=>qv,lG2:()=>Ct,lqb:()=>Jc,lri:()=>eD,n5z:()=>ol,oAB:()=>J,oxw:()=>Hm,q4F:()=>Tw,qLn:()=>Ep,qOj:()=>km,qZA:()=>od,rWj:()=>S0,s9C:()=>Gm,sBO:()=>iT,s_b:()=>_y,soG:()=>Sg,tb:()=>Dd,tp0:()=>wt,uIk:()=>td,vHH:()=>he,vpe:()=>uo,wAp:()=>At,xi3:()=>d0,xp6:()=>Lw,z2F:()=>xg,zSh:()=>Sl,zs3:()=>Rh});var d=k(7579),Q=k(727),O=k(9751),se=k(6451),re=k(3099);function ie(s){for(let o in s)if(s[o]===ie)return o;throw Error("Could not find renamed property on target object.")}function ge(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function _e(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(_e).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=ie({__forward_ref__:ie});function $(s){return s.__forward_ref__=$,s.toString=function(){return _e(this())},s}function W(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===$}function Ce(s){return s&&!!s.\u0275providers}const ht="https://g.co/ng/security#xss";class he extends Error{constructor(o,a){super(Me(o,a)),this.code=o}}function Me(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Re(s){return"string"==typeof s?s:null==s?"":String(s)}function He(s,o){throw new he(-201,!1)}function ft(s,o){null==s&&function ct(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function bt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function _n(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cn(s){return $r(s,gi)||$r(s,co)}function xr(s){return null!==Cn(s)}function $r(s,o){return s.hasOwnProperty(o)?s[o]:null}function Us(s){return s&&(s.hasOwnProperty(Ko)||s.hasOwnProperty(Rr))?s[Ko]:null}const gi=ie({\u0275prov:ie}),Ko=ie({\u0275inj:ie}),co=ie({ngInjectableDef:ie}),Rr=ie({ngInjectorDef:ie});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let ei;function Er(s){const o=ei;return ei=s,o}function jr(s,o,a){const c=Cn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&gt.Optional?null:void 0!==o?o:void He(_e(s))}const rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),mi={},ti="__NG_DI_FLAG__",dr="ngTempTokenPath",Hr="ngTokenPath",Mn=/\n/gm,ni="\u0275",pn="__source";let Bs;function Qt(s){const o=Bs;return Bs=s,o}function es(s,o=gt.Default){if(void 0===Bs)throw new he(-203,!1);return null===Bs?jr(s,void 0,o):Bs.get(s,o&gt.Optional?null:void 0,o)}function un(s,o=gt.Default){return(function ac(){return ei}()||es)(W(s),o)}function On(s,o=gt.Default){return un(s,Wn(o))}function Wn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Li(s){const o=[];for(let a=0;a<s.length;a++){const c=W(s[a]);if(Array.isArray(c)){if(0===c.length)throw new he(900,!1);let h,g=gt.Default;for(let _=0;_<c.length;_++){const I=c[_],b=Vi(I);"number"==typeof b?-1===b?h=I.token:g|=b:h=I}o.push(un(h,g))}else o.push(un(c))}return o}function In(s,o){return s[ti]=o,s.prototype[ti]=o,s}function Vi(s){return s[ti]}function L(s){return{toString:s}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),ye=(()=>{return(s=ye||(ye={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ye;var s})();const X={},ke=[],St=ie({\u0275cmp:ie}),en=ie({\u0275dir:ie}),$n=ie({\u0275pipe:ie}),bn=ie({\u0275mod:ie}),dn=ie({\u0275fac:ie}),Kt=ie({__NG_ELEMENT_ID__:ie});let Pr=0;function Ui(s){return L(()=>{const o=Nu(s),a={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||ye.Emulated,id:"c"+Pr++,styles:s.styles||ke,_:null,schemas:s.schemas||null,tView:null};kf(a);const c=s.dependencies;return a.directiveDefs=Yo(c,!1),a.pipeDefs=Yo(c,!0),a})}function Oa(s){return mt(s)||sn(s)}function ue(s){return null!==s}function J(s){return L(()=>({type:s.type,bootstrap:s.bootstrap||ke,declarations:s.declarations||ke,imports:s.imports||ke,exports:s.exports||ke,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function pt(s,o){if(null==s)return X;const a={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=c,o&&(o[h]=g)}return a}function Ct(s){return L(()=>{const o=Nu(s);return kf(o),o})}function Gt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function mt(s){return s[St]||null}function sn(s){return s[en]||null}function tn(s){return s[$n]||null}function hr(s){const o=mt(s)||sn(s)||tn(s);return null!==o&&o.standalone}function Zn(s,o){const a=s[bn]||null;if(!a&&!0===o)throw new Error(`Type ${_e(s)} does not have '\u0275mod' property.`);return a}function Nu(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||ke,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pt(s.inputs,o),outputs:pt(s.outputs)}}function kf(s){s.features?.forEach(o=>o(s))}function Yo(s,o){if(!s)return null;const a=o?tn:Oa;return()=>("function"==typeof s?s():s).map(c=>a(c)).filter(ue)}const _i=0,qe=1,Lt=2,Dn=3,vi=4,fn=5,Kn=6,$s=7,kn=8,ka=9,Bi=10,jt=11,Fa=12,ho=13,ds=14,fo=15,jn=16,Qo=17,hs=18,ns=19,Xo=20,Ir=21,vn=22,La=1,uc=2,Jo=7,js=8,po=9,fr=10;function ii(s){return Array.isArray(s)&&"object"==typeof s[La]}function si(s){return Array.isArray(s)&&!0===s[La]}function Va(s){return 0!=(4&s.flags)}function ea(s){return s.componentOffset>-1}function lc(s){return 1==(1&s.flags)}function wi(s){return!!s.template}function ku(s){return 0!=(256&s[Lt])}function rs(s,o){return s.hasOwnProperty(dn)?s[dn]:null}class go{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function dc(){return Ua}function Ua(s){return s.type.prototype.ngOnChanges&&(s.setInput=hc),$d}function $d(){const s=Uf(this),o=s?.current;if(o){const a=s.previous;if(a===X)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function hc(s,o,a,c){const h=this.declaredInputs[a],g=Uf(s)||function Vu(s,o){return s[Hs]=o}(s,{previous:X,current:null}),_=g.current||(g.current={}),I=g.previous,b=I[h];_[h]=new go(b&&b.currentValue,o,I===X),s[c]=o}dc.ngInherit=!0;const Hs="__ngSimpleChanges__";function Uf(s){return s[Hs]||null}const zr=function(s,o,a){},Nr="svg";function pr(s){for(;Array.isArray(s);)s=s[_i];return s}function gs(s,o){return pr(o[s])}function gr(s,o){return pr(o[s.index])}function Hd(s,o){return s.data[o]}function rr(s,o){const a=o[s];return ii(a)?a:a[_i]}function ms(s){return 64==(64&s[Lt])}function zs(s,o){return null==o?null:s[o]}function ra(s){s[hs]=0}function $a(s,o){s[fn]+=o;let a=s,c=s[Dn];for(;null!==c&&(1===o&&1===a[fn]||-1===o&&0===a[fn]);)c[fn]+=o,a=c,c=c[Dn]}const Nt={lFrame:gc(null),bindingsEnabled:!0};function ju(){return Nt.bindingsEnabled}function le(){return Nt.lFrame.lView}function Vt(){return Nt.lFrame.tView}function Ha(s){return Nt.lFrame.contextLView=s,s[kn]}function Ga(s){return Nt.lFrame.contextLView=null,s}function ir(){let s=mo();for(;null!==s&&64===s.type;)s=s.parent;return s}function mo(){return Nt.lFrame.currentTNode}function qr(s,o){const a=Nt.lFrame;a.currentTNode=s,a.isParent=o}function Zd(){return Nt.lFrame.isParent}function yo(){return Nt.lFrame.bindingIndex++}function zu(s,o){const a=Nt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Qn(o)}function Qn(s){Nt.lFrame.currentDirectiveIndex=s}function pc(){return Nt.lFrame.currentQueryIndex}function qu(s){Nt.lFrame.currentQueryIndex=s}function Yd(s){const o=s[qe];return 2===o.type?o.declTNode:1===o.type?s[Kn]:null}function Wu(s,o,a){if(a&gt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||a&gt.Host||(h=Yd(g),null===h||(g=g[fo],10&h.type))););if(null===h)return!1;o=h,s=g}const c=Nt.lFrame=Wa();return c.currentTNode=o,c.lView=s,!0}function Zu(s){const o=Wa(),a=s[qe];Nt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Wa(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?gc(s):o}function gc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Za(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Qd=Za;function Ku(){const s=Za();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Dr(){return Nt.lFrame.selectedIndex}function _s(s){Nt.lFrame.selectedIndex=s}function Tn(){const s=Nt.lFrame;return Hd(s.tView,s.selectedIndex)}function Ka(){Nt.lFrame.currentNamespace=Nr}function Qu(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:R}=g;_&&(s.contentHooks??(s.contentHooks=[])).push(-a,_),I&&((s.contentHooks??(s.contentHooks=[])).push(a,I),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(a,I)),b&&(s.viewHooks??(s.viewHooks=[])).push(-a,b),x&&((s.viewHooks??(s.viewHooks=[])).push(a,x),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(a,x)),null!=R&&(s.destroyHooks??(s.destroyHooks=[])).push(a,R)}}function mc(s,o,a){_c(s,o,3,a)}function yc(s,o,a,c){(3&s[Lt])===a&&_c(s,o,a,c)}function Jd(s,o){let a=s[Lt];(3&a)===o&&(a&=2047,a+=1,s[Lt]=a)}function _c(s,o,a,c){const g=c??-1,_=o.length-1;let I=0;for(let b=void 0!==c?65535&s[hs]:0;b<_;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=c&&I>=c)break}else o[b]<0&&(s[hs]+=65536),(I<g||-1==g)&&(sa(s,a,o,b),s[hs]=(4294901760&s[hs])+b+2),b++}function sa(s,o,a,c){const h=a[c]<0,g=a[c+1],I=s[h?-a[c]:a[c]];if(h){if(s[Lt]>>11<s[hs]>>16&&(3&s[Lt])===o){s[Lt]+=2048,zr(4,I,g);try{g.call(I)}finally{zr(5,I,g)}}}else{zr(4,I,g);try{g.call(I)}finally{zr(5,I,g)}}}const oa=-1;class vs{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function aa(s,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const g=a[c++],_=a[c++],I=a[c++];s.setAttribute(o,_,I,g)}else{const g=h,_=a[++c];Eo(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),c++}}return c}function vc(s){return 3===s||4===s||6===s}function Eo(s){return 64===s.charCodeAt(0)}function Io(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||el(s,a,h,null,-1===a||2===a?o[++c]:null)}}return s}function el(s,o,a,c,h){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){_=-1;break}if(I>o){_=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,a),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function Do(s){return s!==oa}function qs(s){return 32767&s}function Co(s,o){let a=function eh(s){return s>>16}(s),c=o;for(;a>0;)c=c[fo],a--;return c}let tl=!0;function Qa(s){const o=tl;return tl=s,o}const nl=255,th=5;let bo=0;const ji={};function wc(s,o){const a=la(s,o);if(-1!==a)return a;const c=o[qe];c.firstCreatePass&&(s.injectorIndex=o.length,ua(c.data,s),ua(o,null),ua(c.blueprint,null));const h=nh(s,o),g=s.injectorIndex;if(Do(h)){const _=qs(h),I=Co(h,o),b=I[qe].data;for(let x=0;x<8;x++)o[g+x]=I[_+x]|b[_+x]}return o[g+8]=h,g}function ua(s,o){s.push(0,0,0,0,0,0,0,0,o)}function la(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function nh(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=eu(h),null===c)return oa;if(a++,h=h[fo],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return oa}function gn(s,o,a){!function ws(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Kt)&&(c=a[Kt]),null==c&&(c=a[Kt]=bo++);const h=c&nl;o.data[s+(h>>th)]|=1<<h}(s,o,a)}function rl(s,o,a){if(a&gt.Optional||void 0!==s)return s;He()}function Ec(s,o,a,c){if(a&gt.Optional&&void 0===c&&(c=null),!(a&(gt.Self|gt.Host))){const h=s[ka],g=Er(void 0);try{return h?h.get(o,c,a&gt.Optional):jr(o,c,a&gt.Optional)}finally{Er(g)}}return rl(c,0,a)}function il(s,o,a,c=gt.Default,h){if(null!==s){if(1024&o[Lt]){const _=function Dc(s,o,a,c,h){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[Lt]&&!(256&_[Lt]);){const I=sl(g,_,a,c|gt.Self,ji);if(I!==ji)return I;let b=g.parent;if(!b){const x=_[Ir];if(x){const R=x.get(a,ji,c);if(R!==ji)return R}b=eu(_),_=_[fo]}g=b}return h}(s,o,a,c,ji);if(_!==ji)return _}const g=sl(s,o,a,c,ji);if(g!==ji)return g}return Ec(o,a,c,h)}function sl(s,o,a,c,h){const g=function Ic(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Kt)?s[Kt]:void 0;return"number"==typeof o?o>=0?o&nl:zf:o}(a);if("function"==typeof g){if(!Wu(o,s,c))return c&gt.Host?rl(h,0,c):Ec(o,a,c,h);try{const _=g(c);if(null!=_||c&gt.Optional)return _;He()}finally{Qd()}}else if("number"==typeof g){let _=null,I=la(s,o),b=oa,x=c&gt.Host?o[jn][Kn]:null;for((-1===I||c&gt.SkipSelf)&&(b=-1===I?nh(s,o):o[I+8],b!==oa&&Ja(c,!1)?(_=o[qe],I=qs(b),o=Co(b,o)):I=-1);-1!==I;){const R=o[qe];if(Xa(g,I,R.data)){const F=sr(I,o,a,_,c,x);if(F!==ji)return F}b=o[I+8],b!==oa&&Ja(c,o[qe].data[I+8]===x)&&Xa(g,I,o)?(_=R,I=qs(b),o=Co(b,o)):I=-1}}return h}function sr(s,o,a,c,h,g){const _=o[qe],I=_.data[s+8],R=To(I,_,a,null==c?ea(I)&&tl:c!=_&&0!=(3&I.type),h&gt.Host&&g===I);return null!==R?Hn(o,_,R,I):ji}function To(s,o,a,c,h){const g=s.providerIndexes,_=o.data,I=1048575&g,b=s.directiveStart,R=g>>20,G=h?I+R:s.directiveEnd;for(let Y=c?I:I+R;Y<G;Y++){const me=_[Y];if(Y<b&&a===me||Y>=b&&me.type===a)return Y}if(h){const Y=_[b];if(Y&&wi(Y)&&Y.type===a)return b}return null}function Hn(s,o,a,c){let h=s[a];const g=o.data;if(function em(s){return s instanceof vs}(h)){const _=h;_.resolving&&function Pe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new he(-200,`Circular dependency in DI detected for ${s}${a}`)}(function Ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Re(s)}(g[a]));const I=Qa(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Er(_.injectImpl):null;Wu(s,c,gt.Default);try{h=s[a]=_.factory(void 0,g,s,c),o.firstCreatePass&&a>=c.directiveStart&&function Jg(s,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const _=Ua(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,_)}h&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-s,h),g&&((a.preOrderHooks??(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==b&&Er(b),Qa(I),_.resolving=!1,Qd()}}return h}function Xa(s,o,a){return!!(a[o+(s>>th)]&1<<s)}function Ja(s,o){return!(s&gt.Self||s&gt.Host&&o)}class Es{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return il(this._tNode,this._lView,o,Wn(c),a)}}function zf(){return new Es(ir(),le())}function ol(s){return L(()=>{const o=s.prototype.constructor,a=o[dn]||So(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[dn]||So(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function So(s){return je(s)?()=>{const o=So(W(s));return o&&o()}:rs(s)}function eu(s){const o=s[qe],a=o.type;return 2===a?o.declTNode:1===a?s[Kn]:null}function ca(s){return function rh(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const g=a[h];if(vc(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(g===o)return a[h+1];h+=2}}}return null}(ir(),s)}const da="__parameters__";function xo(s,o,a){return L(()=>{const c=function Ao(s){return function(...a){if(s){const c=s(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const _=new h(...g);return I.annotation=_,I;function I(b,x,R){const F=b.hasOwnProperty(da)?b[da]:Object.defineProperty(b,da,{value:[]})[da];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(_),b}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Xt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=bt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ss(s,o){s.forEach(a=>Array.isArray(a)?ss(a,o):o(a))}function Yf(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Ro(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Wr(s,o,a){let c=oi(s,o);return c>=0?s[1|c]=a:(c=~c,function Sc(s,o,a,c){let h=s.length;if(h==o)s.push(a,c);else if(1===h)s.push(c,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function nn(s,o){const a=oi(s,o);if(a>=0)return s[1|a]}function oi(s,o){return function kr(s,o,a){let c=0,h=s.length>>a;for(;h!==c;){const g=c+(h-c>>1),_=s[g<<a];if(o===_)return g<<a;_>o?h=g:c=g+1}return~(h<<a)}(s,o,1)}const ou=In(xo("Optional"),8),wt=In(xo("SkipSelf"),4);var Dt=(()=>((Dt=Dt||{})[Dt.Important=1]="Important",Dt[Dt.DashCase=2]="DashCase",Dt))();const lh=new Map;let Wi=0;const Z="__ngContext__";function te(s,o){ii(o)?(s[Z]=o[Xo],function dh(s){lh.set(s[Xo],s)}(o)):s[Z]=o}let Zi;function Js(s,o){return Zi(s,o)}function Lc(s){const o=s[Dn];return si(o)?o[Dn]:o}function Vc(s){return tp(s[ho])}function Vo(s){return tp(s[vi])}function tp(s){for(;null!==s&&!si(s);)s=s[vi];return s}function Uo(s,o,a,c,h){if(null!=c){let g,_=!1;si(c)?g=c:ii(c)&&(_=!0,c=c[_i]);const I=pr(c);0===s&&null!==a?null==h?Bc(o,a,I):ya(o,a,I,h||null,!0):1===s&&null!==a?ya(o,a,I,h||null,!0):2===s?function sp(s,o,a){const c=Bo(s,o);c&&function $c(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,I,_):3===s&&o.destroyNode(I),null!=g&&function zc(s,o,a,c,h){const g=a[Jo];g!==pr(a)&&Uo(o,s,c,g,h);for(let I=fr;I<a.length;I++){const b=a[I];Gc(b[qe],b,s,o,c,g)}}(o,s,g,a,h)}}function rp(s,o,a){return s.createElement(o,a)}function im(s,o){const a=s[po],c=a.indexOf(o),h=o[Dn];512&o[Lt]&&(o[Lt]&=-513,$a(h,-1)),a.splice(c,1)}function Uc(s,o){if(s.length<=fr)return;const a=fr+o,c=s[a];if(c){const h=c[Qo];null!==h&&h!==s&&im(h,c),o>0&&(s[a-1][vi]=c[vi]);const g=Ro(s,fr+o);!function m_(s,o){Gc(s,o,o[jt],2,null,null),o[_i]=null,o[Kn]=null}(c[qe],c);const _=g[ns];null!==_&&_.detachView(g[qe]),c[Dn]=null,c[vi]=null,c[Lt]&=-65}return c}function ph(s,o){if(!(128&o[Lt])){const a=o[jt];a.destroyNode&&Gc(s,o,a,3,null,null),function mw(s){let o=s[ho];if(!o)return ma(s[qe],s);for(;o;){let a=null;if(ii(o))a=o[ho];else{const c=o[fr];c&&(a=c)}if(!a){for(;o&&!o[vi]&&o!==s;)ii(o)&&ma(o[qe],o),o=o[Dn];null===o&&(o=s),ii(o)&&ma(o[qe],o),a=o&&o[vi]}o=a}}(o)}}function ma(s,o){if(!(128&o[Lt])){o[Lt]&=-65,o[Lt]|=128,function hu(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof vs)){const g=a[c+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const I=h[g[_]],b=g[_+1];zr(4,I,b);try{b.call(I)}finally{zr(5,I,b)}}else{zr(4,h,g);try{g.call(h)}finally{zr(5,h,g)}}}}}(s,o),function __(s,o){const a=s.cleanup,c=o[$s];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+3];_>=0?c[h=_]():c[h=-_].unsubscribe(),g+=2}else{const _=c[h=a[g+1]];a[g].call(_)}if(null!==c){for(let g=h+1;g<c.length;g++)(0,c[g])();o[$s]=null}}(s,o),1===o[qe].type&&o[jt].destroy();const a=o[Qo];if(null!==a&&si(o[Dn])){a!==o[Dn]&&im(a,o);const c=o[ns];null!==c&&c.detachView(s)}!function E(s){lh.delete(s[Xo])}(o)}}function wl(s,o,a){return function v_(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[_i];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:g}=s.data[c.directiveStart+h];if(g===ye.None||g===ye.Emulated)return null}return gr(c,a)}}(s,o.parent,a)}function ya(s,o,a,c,h){s.insertBefore(o,a,c,h)}function Bc(s,o,a){s.appendChild(o,a)}function sm(s,o,a,c,h){null!==c?ya(s,o,a,c,h):Bc(s,o,a)}function Bo(s,o){return s.parentNode(o)}let ip,Zc,Il,fu=function jc(s,o,a){return 40&s.type?gr(s,a):null};function pu(s,o,a,c){const h=wl(s,c,o),g=o[jt],I=function mh(s,o,a){return fu(s,o,a)}(c.parent||o[Kn],c,o);if(null!=h)if(Array.isArray(a))for(let b=0;b<a.length;b++)sm(g,h,a[b],I,!1);else sm(g,h,a,I,!1);void 0!==ip&&ip(g,c,o,a,h)}function _h(s,o){if(null!==o){const a=o.type;if(3&a)return gr(o,s);if(4&a)return Cs(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return _h(s,c);{const h=s[o.index];return si(h)?Cs(-1,h):pr(h)}}if(32&a)return Js(o,s)()||pr(s[o.index]);{const c=vh(s,o);return null!==c?Array.isArray(c)?c[0]:_h(Lc(s[jn]),c):_h(s,o.next)}}return null}function vh(s,o){return null!==o?s[jn][Kn].projection[o.projection]:null}function Cs(s,o){const a=fr+s+1;if(a<o.length){const c=o[a],h=c[qe].firstChild;if(null!==h)return _h(c,h)}return o[Jo]}function Hc(s,o,a,c,h,g,_){for(;null!=a;){const I=c[a.index],b=a.type;if(_&&0===o&&(I&&te(pr(I),c),a.flags|=2),32!=(32&a.flags))if(8&b)Hc(s,o,a.child,c,h,g,!1),Uo(o,s,h,I,g);else if(32&b){const x=Js(a,c);let R;for(;R=x();)Uo(o,s,h,R,g);Uo(o,s,h,I,g)}else 16&b?ap(s,o,c,a,h,g):Uo(o,s,h,I,g);a=_?a.projectionNext:a.next}}function Gc(s,o,a,c,h,g){Hc(a,c,s.firstChild,o,h,g,!1)}function ap(s,o,a,c,h,g){const _=a[jn],b=_[Kn].projection[c.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)Uo(o,s,h,b[x],g);else Hc(s,o,b,_[Dn],h,g,!0)}function os(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function qc(s,o,a){const{mergedAttrs:c,classes:h,styles:g}=a;null!==c&&aa(s,o,c),null!==h&&os(s,o,h),null!==g&&function up(s,o,a){s.setAttribute(o,"style",a)}(s,o,g)}function am(s){Zc=s}function dp(s){return function cp(){if(void 0===Il&&(Il=null,rn.trustedTypes))try{Il=rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Il}()?.createScriptURL(s)||s}class lm{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ht})`}}function Lr(s){return s instanceof lm?s.changingThisBreaksApplicationSecurity:s}function Si(s,o){const a=function Dl(s){return s instanceof lm&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ht})`)}return a===o}const yp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Pn=(()=>((Pn=Pn||{})[Pn.NONE=0]="NONE",Pn[Pn.HTML=1]="HTML",Pn[Pn.STYLE=2]="STYLE",Pn[Pn.SCRIPT=3]="SCRIPT",Pn[Pn.URL=4]="URL",Pn[Pn.RESOURCE_URL=5]="RESOURCE_URL",Pn))();function Yc(s){const o=_p();return o?o.sanitize(Pn.URL,s)||"":Si(s,"URL")?Lr(s):function Cl(s){return(s=String(s)).match(yp)?s:"unsafe:"+s}(Re(s))}function Qc(s){const o=_p();if(o)return dp(o.sanitize(Pn.RESOURCE_URL,s)||"");if(Si(s,"ResourceURL"))return dp(Lr(s));throw new he(904,!1)}function Dh(s,o,a){return function A_(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Qc:Yc}(o,a)(s)}function _p(){const s=le();return s&&s[Fa]}const R_=new Xt("ENVIRONMENT_INITIALIZER"),Xc=new Xt("INJECTOR",-1),Ch=new Xt("INJECTOR_DEF_TYPES");class yw{get(o,a=mi){if(a===mi){const c=new Error(`NullInjectorError: No provider for ${_e(o)}!`);throw c.name="NullInjectorError",c}return a}}function vp(...s){return{\u0275providers:bh(0,s),\u0275fromNgModule:!0}}function bh(s,...o){const a=[],c=new Set;let h;return ss(o,g=>{const _=g;P_(_,a,[],c)&&(h||(h=[]),h.push(_))}),void 0!==h&&_w(h,a),a}function _w(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];N_(h,g=>{o.push(g)})}}function P_(s,o,a,c){if(!(s=W(s)))return!1;let h=null,g=Us(s);const _=!g&&mt(s);if(g||_){if(_&&!_.standalone)return!1;h=s}else{const b=s.ngModule;if(g=Us(b),!g)return!1;h=b}const I=c.has(h);if(_){if(I)return!1;if(c.add(h),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of b)P_(x,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let x;c.add(h);try{ss(g.imports,R=>{P_(R,o,a,c)&&(x||(x=[]),x.push(R))})}finally{}void 0!==x&&_w(x,o)}if(!I){const x=rs(h)||(()=>new h);o.push({provide:h,useFactory:x,deps:ke},{provide:Ch,useValue:h,multi:!0},{provide:R_,useValue:()=>un(h),multi:!0})}const b=g.providers;null==b||I||N_(b,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}function N_(s,o){for(let a of s)Ce(a)&&(a=a.\u0275providers),Array.isArray(a)?N_(a,o):o(a)}const fC=ie({provide:String,useValue:ie});function O_(s){return null!==s&&"object"==typeof s&&fC in s}function _u(s){return"function"==typeof s}const Sl=new Xt("Set Injector scope."),mm={},gC={};let k_;function ym(){return void 0===k_&&(k_=new yw),k_}class Jc{}class ww extends Jc{get destroyed(){return this._destroyed}constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sh(o,_=>this.processProvider(_)),this.records.set(Xc,Th(void 0,this)),h.has("environment")&&this.records.set(Jc,Th(void 0,this));const g=this.records.get(Sl);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Ch.multi,ke,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Qt(this),c=Er(void 0);try{return o()}finally{Qt(a),Er(c)}}get(o,a=mi,c=gt.Default){this.assertNotDestroyed(),c=Wn(c);const h=Qt(this),g=Er(void 0);try{if(!(c&gt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function U_(s){return"function"==typeof s||"object"==typeof s&&s instanceof Xt}(o)&&Cn(o);I=b&&this.injectableDefInScope(b)?Th(F_(o),mm):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&gt.Self?ym():this.parent).get(o,a=c&gt.Optional&&a===mi?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[dr]=_[dr]||[]).unshift(_e(o)),h)throw _;return function Gr(s,o,a,c){const h=s[dr];throw o[pn]&&h.unshift(o[pn]),s.message=function B(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==ni?s.slice(2):s;let h=_e(o);if(Array.isArray(o))h=o.map(_e).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let I=o[_];g.push(_+":"+("string"==typeof I?JSON.stringify(I):_e(I)))}h=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${s.replace(Mn,"\n  ")}`}("\n"+s.message,h,a,c),s[Hr]=h,s[dr]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Er(g),Qt(h)}}resolveInjectorInitializers(){const o=Qt(this),a=Er(void 0);try{const c=this.get(R_.multi,ke,gt.Self);for(const h of c)h()}finally{Qt(o),Er(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(_e(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(o){let a=_u(o=W(o))?o:W(o&&o.provide);const c=function yC(s){return O_(s)?Th(void 0,s.useValue):Th(L_(s),mm)}(o);if(_u(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Th(void 0,mm,!0),h.factory=()=>Li(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===mm&&(a.value=gC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ew(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function F_(s){const o=Cn(s),a=null!==o?o.factory:rs(s);if(null!==a)return a;if(s instanceof Xt)throw new he(204,!1);if(s instanceof Function)return function mC(s){const o=s.length;if(o>0)throw function ul(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new he(204,!1);const a=function Mr(s){return s&&(s[gi]||s[co])||null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new he(204,!1)}function L_(s,o,a){let c;if(_u(s)){const h=W(s);return rs(h)||F_(h)}if(O_(s))c=()=>W(s.useValue);else if(function vw(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Li(s.deps||[]));else if(function pC(s){return!(!s||!s.useExisting)}(s))c=()=>un(W(s.useExisting));else{const h=W(s&&(s.useClass||s.provide));if(!function V_(s){return!!s.deps}(s))return rs(h)||F_(h);c=()=>new h(...Li(s.deps))}return c}function Th(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Sh(s,o){for(const a of s)Array.isArray(a)?Sh(a,o):a&&Ce(a)?Sh(a.\u0275providers,o):o(a)}class _C{}class Iw{}class Cw{resolveComponentFactory(o){throw function vC(s){const o=Error(`No component factory found for ${_e(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ah=(()=>{class s{}return s.NULL=new Cw,s})();function _m(){return vu(ir(),le())}function vu(s,o){return new xh(gr(s,o))}let xh=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=_m,s})();function wp(s){return s instanceof xh?s.nativeElement:s}class $_{}let wC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function EC(){const s=le(),a=rr(ir().index,s);return(ii(a)?a:s)[jt]}(),s})(),IC=(()=>{class s{}return s.\u0275prov=bt({token:s,providedIn:"root",factory:()=>null}),s})();class bw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Tw=new bw("15.2.9"),vm={},j_="ngOriginalError";function H_(s){return s[j_]}class Ep{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&H_(o);for(;a&&H_(a);)a=H_(a);return a||null}}function va(s){return s instanceof Function?s():s}function Pw(s,o,a){let c=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}a=h+1}}const G_="ng-template";function z_(s,o,a){let c=0,h=!0;for(;c<s.length;){let g=s[c++];if("string"==typeof g&&h){const _=s[c++];if(a&&"class"===g&&-1!==Pw(_.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<s.length&&"string"==typeof(g=s[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(h=!1)}}return!1}function q_(s){return 4===s.type&&s.value!==G_}function Mh(s,o,a){return o===(4!==s.type||a?s.value:G_)}function W_(s,o,a){let c=4;const h=s.attrs||[],g=function Ow(s){for(let o=0;o<s.length;o++)if(vc(s[o]))return o;return s.length}(h);let _=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!_)if(4&c){if(c=2|1&c,""!==b&&!Mh(s,b,a)||""===b&&1===o.length){if($o(c))return!1;_=!0}}else{const x=8&c?b:o[++I];if(8&c&&null!==s.attrs){if(!z_(s.attrs,x,a)){if($o(c))return!1;_=!0}continue}const F=Nw(8&c?"class":b,h,q_(s),a);if(-1===F){if($o(c))return!1;_=!0;continue}if(""!==x){let G;G=F>g?"":h[F+1].toLowerCase();const Y=8&c?G:null;if(Y&&-1!==Pw(Y,x,0)||2&c&&x!==G){if($o(c))return!1;_=!0}}}}else{if(!_&&!$o(c)&&!$o(b))return!1;if(_&&$o(b))continue;_=!1,c=b|1&c}}return $o(c)||_}function $o(s){return 0==(1&s)}function Nw(s,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let g=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)g=!0;else{if(1===_||2===_){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=g?1:2}return-1}return function kw(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function Dp(s,o,a=!1){for(let c=0;c<o.length;c++)if(W_(s,o[c],a))return!0;return!1}function Fw(s,o){return s?":not("+o.trim()+")":o}function MC(s){let o=s[0],a=1,c=2,h="",g=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&c){const I=s[++a];h+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+_:4&c&&(h+=" "+_);else""!==h&&!$o(_)&&(o+=Fw(g,h),h=""),c=_,g=g||!$o(c);a++}return""!==h&&(o+=Fw(g,h)),o}const Ut={};function Lw(s){Vw(Vt(),le(),Dr()+s,!1)}function Vw(s,o,a,c){if(!c)if(3==(3&o[Lt])){const g=s.preOrderCheckHooks;null!==g&&mc(o,g,a)}else{const g=s.preOrderHooks;null!==g&&yc(o,g,0,a)}_s(a)}function Bw(s,o=null,a=null,c){const h=Z_(s,o,a,c);return h.resolveInjectorInitializers(),h}function Z_(s,o=null,a=null,c,h=new Set){const g=[a||ke,vp(s)];return c=c||("object"==typeof s?void 0:_e(s)),new ww(g,o||ym(),c||null,h)}let Rh=(()=>{class s{static create(a,c){if(Array.isArray(a))return Bw({name:""},c,a,"");{const h=a.name??"";return Bw({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=mi,s.NULL=new yw,s.\u0275prov=bt({token:s,providedIn:"any",factory:()=>un(Xc)}),s.__NG_ELEMENT_ID__=-1,s})();function Oh(s,o=gt.Default){const a=le();return null===a?un(s,o):il(ir(),a,W(s),o)}function zw(){throw new Error("invalid")}function qw(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const g=a[c+1];if(-1!==g){const _=s.data[g];qu(a[c]),_.contentQueries(2,o[g],g)}}}function Dm(s,o,a,c,h,g,_,I,b,x,R){const F=o.blueprint.slice();return F[_i]=h,F[Lt]=76|c,(null!==R||s&&1024&s[Lt])&&(F[Lt]|=1024),ra(F),F[Dn]=F[fo]=s,F[kn]=a,F[Bi]=_||s&&s[Bi],F[jt]=I||s&&s[jt],F[Fa]=b||s&&s[Fa]||null,F[ka]=x||s&&s[ka]||null,F[Kn]=g,F[Xo]=function ch(){return Wi++}(),F[Ir]=R,F[jn]=2==o.type?s[jn]:F,F}function Sp(s,o,a,c,h){let g=s.data[o];if(null===g)g=function Cm(s,o,a,c,h){const g=mo(),_=Zd(),b=s.data[o]=function KC(s,o,a,c,h,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,o,c,h);return null===s.firstChild&&(s.firstChild=b),null!==g&&(_?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b,b.prev=g)),b}(s,o,a,c,h),function Kd(){return Nt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=c,g.attrs=h;const _=function Hu(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return qr(g,!0),g}function An(s,o,a,c){if(0===a)return-1;const h=o.length;for(let g=0;g<a;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Ap(s,o,a){Zu(o);try{const c=s.viewQuery;null!==c&&Op(1,c,a);const h=s.template;null!==h&&Zw(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&qw(s,o),s.staticViewQueries&&Op(2,s.viewQuery,a);const g=s.components;null!==g&&function Ww(s,o){for(let a=0;a<o.length;a++)eE(s,o[a])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[Lt]&=-5,Ku()}}function bm(s,o,a,c){const h=o[Lt];if(128!=(128&h)){Zu(o);try{ra(o),function is(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Zw(s,o,a,2,c);const _=3==(3&h);if(_){const x=s.preOrderCheckHooks;null!==x&&mc(o,x,null)}else{const x=s.preOrderHooks;null!==x&&yc(o,x,0,null),Jd(o,0)}if(function Jw(s){for(let o=Vc(s);null!==o;o=Vo(o)){if(!o[uc])continue;const a=o[po];for(let c=0;c<a.length;c++){const h=a[c];512&h[Lt]||$a(h[Dn],1),h[Lt]|=512}}}(o),function rv(s){for(let o=Vc(s);null!==o;o=Vo(o))for(let a=fr;a<o.length;a++){const c=o[a],h=c[qe];ms(c)&&bm(h,c,h.template,c[kn])}}(o),null!==s.contentQueries&&qw(s,o),_){const x=s.contentCheckHooks;null!==x&&mc(o,x)}else{const x=s.contentHooks;null!==x&&yc(o,x,1),Jd(o,1)}!function WC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)_s(~h);else{const g=h,_=a[++c],I=a[++c];zu(_,g),I(2,o[g])}}}finally{_s(-1)}}(s,o);const I=s.components;null!==I&&function ZC(s,o){for(let a=0;a<o.length;a++)JC(s,o[a])}(o,I);const b=s.viewQuery;if(null!==b&&Op(2,b,c),_){const x=s.viewCheckHooks;null!==x&&mc(o,x)}else{const x=s.viewHooks;null!==x&&yc(o,x,2),Jd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Lt]&=-41,512&o[Lt]&&(o[Lt]&=-513,$a(o[Dn],-1))}finally{Ku()}}}function Zw(s,o,a,c,h){const g=Dr(),_=2&c;try{_s(-1),_&&o.length>vn&&Vw(s,o,vn,!1),zr(_?2:0,h),a(c,h)}finally{_s(g),zr(_?3:1,h)}}function li(s,o,a){if(Va(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}function Kw(s,o,a){ju()&&(function xi(s,o,a,c){const h=a.directiveStart,g=a.directiveEnd;ea(a)&&function XC(s,o,a){const c=gr(o,s),h=pe(a),g=s[Bi],_=Pp(s,Dm(s,h,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));s[o.index]=_}(o,a,s.data[h+a.componentOffset]),s.firstCreatePass||wc(a,o),te(c,o);const _=a.initialInputs;for(let I=h;I<g;I++){const b=s.data[I],x=Hn(o,s,I,a);te(x,o),null!==_&&nv(0,I-h,x,b,0,_),wi(b)&&(rr(a.index,o)[kn]=Hn(o,s,I,a))}}(s,o,a,gr(a,o)),64==(64&a.flags)&&Rp(s,o,a))}function Tm(s,o,a=gr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const _=c[g+1],I=-1===_?a(o,s):s[_];s[h++]=I}}}function pe(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ts(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ts(s,o,a,c,h,g,_,I,b,x){const R=vn+c,F=R+h,G=function kh(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:Ut);return a}(R,F),Y="function"==typeof x?x():x;return G[qe]={type:s,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Y,incompleteFirstPass:!1}}function zt(s,o,a,c){const h=Rm(o);null===a?h.push(c):(h.push(a),s.firstCreatePass&&nE(s).push(c,h.length-1))}function io(s,o,a,c){for(let h in s)if(s.hasOwnProperty(h)){a=null===a?{}:a;const g=s[h];null===c?tt(a,o,h,g):c.hasOwnProperty(h)&&tt(a,o,c[h],g)}return a}function tt(s,o,a,c){s.hasOwnProperty(a)?s[a].push(o,c):s[a]=[o,c]}function Ai(s,o,a,c,h,g,_,I){const b=gr(o,a);let R,x=o.inputs;!I&&null!=x&&(R=x[c])?(Nm(s,a,R,c,h),ea(o)&&function Sm(s,o){const a=rr(o,s);16&a[Lt]||(a[Lt]|=32)}(a,o.index)):3&o.type&&(c=function Ht(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=_?_(h,o.value||"",c):h,g.setProperty(b,c,h))}function Mp(s,o,a,c){if(ju()){const h=null===c?null:{"":-1},g=function xl(s,o){const a=s.directiveRegistry;let c=null,h=null;if(a)for(let g=0;g<a.length;g++){const _=a[g];if(Dp(o,_.selectors,!1))if(c||(c=[]),wi(_))if(null!==_.findHostDirectiveDefs){const I=[];h=h||new Map,_.findHostDirectiveDefs(_,I,h),c.unshift(...I,_),ev(s,o,I.length)}else c.unshift(_),ev(s,o,0);else h=h||new Map,_.findHostDirectiveDefs?.(_,c,h),c.push(_)}return null===c?null:[c,h]}(s,a);let _,I;null===g?_=I=null:[_,I]=g,null!==_&&Yw(s,o,a,_,h,I),h&&function Qw(s,o,a){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=a[o[h+1]];if(null==g)throw new he(-301,!1);c.push(o[h],g)}}}(a,c,h)}a.mergedAttrs=Io(a.mergedAttrs,a.attrs)}function Yw(s,o,a,c,h,g){for(let x=0;x<c.length;x++)gn(wc(a,o),s,c[x].type);!function Xw(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,c.length);for(let x=0;x<c.length;x++){const R=c[x];R.providersResolver&&R.providersResolver(R)}let _=!1,I=!1,b=An(s,o,c.length,null);for(let x=0;x<c.length;x++){const R=c[x];a.mergedAttrs=Io(a.mergedAttrs,R.hostAttrs),Mi(s,a,o,b,R),tv(b,R,h),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const F=R.type.prototype;!_&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(a.index),_=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(a.index),I=!0),b++}!function J_(s,o,a){const h=o.directiveEnd,g=s.data,_=o.attrs,I=[];let b=null,x=null;for(let R=o.directiveStart;R<h;R++){const F=g[R],G=a?a.get(F):null,me=G?G.outputs:null;b=io(F.inputs,R,b,G?G.inputs:null),x=io(F.outputs,R,x,me);const Le=null===b||null===_||q_(o)?null:xm(b,R,_);I.push(Le)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=b,o.outputs=x}(s,a,g)}function Rp(s,o,a){const c=a.directiveStart,h=a.directiveEnd,g=a.index,_=function Xg(){return Nt.lFrame.currentDirectiveIndex}();try{_s(g);for(let I=c;I<h;I++){const b=s.data[I],x=o[I];Qn(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Kr(b,x)}}finally{_s(-1),Qn(_)}}function Kr(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ev(s,o,a){o.componentOffset=a,(s.components??(s.components=[])).push(o.index)}function tv(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;wi(o)&&(a[""]=s)}}function Mi(s,o,a,c,h){s.data[c]=h;const g=h.factory||(h.factory=rs(h.type)),_=new vs(g,wi(h),Oh);s.blueprint[c]=_,a[c]=_,function YC(s,o,a,c,h){const g=h.hostBindings;if(g){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const I=~o.index;(function QC(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(_)!=I&&_.push(I),_.push(a,c,g)}}(s,o,c,An(s,a,h.hostVars,Ut),h)}function Ss(s,o,a,c,h,g){const _=gr(s,o);!function Am(s,o,a,c,h,g,_){if(null==g)s.removeAttribute(o,h,a);else{const I=null==_?Re(g):_(g,c||"",h);s.setAttribute(o,h,I,a)}}(o[jt],_,g,s.value,a,c,h)}function nv(s,o,a,c,h,g){const _=g[o];if(null!==_){const I=c.setInput;for(let b=0;b<_.length;){const x=_[b++],R=_[b++],F=_[b++];null!==I?c.setInput(a,F,x,R):a[R]=F}}}function xm(s,o,a){let c=null,h=0;for(;h<a.length;){const g=a[h];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const _=s[g];for(let I=0;I<_.length;I+=2)if(_[I]===o){c.push(g,_[I+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function jo(s,o,a,c){return[s,!0,!1,o,null,0,c,a,null,null]}function JC(s,o){const a=rr(o,s);if(ms(a)){const c=a[qe];48&a[Lt]?bm(c,a,c.template,a[kn]):a[fn]>0&&Ml(a)}}function Ml(s){for(let c=Vc(s);null!==c;c=Vo(c))for(let h=fr;h<c.length;h++){const g=c[h];if(ms(g))if(512&g[Lt]){const _=g[qe];bm(_,g,_.template,g[kn])}else g[fn]>0&&Ml(g)}const a=s[qe].components;if(null!==a)for(let c=0;c<a.length;c++){const h=rr(a[c],s);ms(h)&&h[fn]>0&&Ml(h)}}function eE(s,o){const a=rr(o,s),c=a[qe];(function iv(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),Ap(c,a,a[kn])}function Pp(s,o){return s[ho]?s[ds][vi]=o:s[ho]=o,s[ds]=o,o}function Mm(s){for(;s;){s[Lt]|=32;const o=Lc(s);if(ku(s)&&!o)return s;s=o}return null}function Np(s,o,a,c=!0){const h=o[Bi];h.begin&&h.begin();try{bm(s,o,s.template,a)}catch(_){throw c&&Pm(o,_),_}finally{h.end&&h.end()}}function Op(s,o,a){qu(0),o(s,a)}function Rm(s){return s[$s]||(s[$s]=[])}function nE(s){return s.cleanup||(s.cleanup=[])}function Pm(s,o){const a=s[ka],c=a?a.get(Ep,null):null;c&&c.handleError(o)}function Nm(s,o,a,c,h){for(let g=0;g<a.length;){const _=a[g++],I=a[g++],b=o[_],x=s.data[_];null!==x.setInput?x.setInput(b,h,c,I):b[I]=h}}function Rl(s,o,a){let c=a?s.styles:null,h=a?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const I=o[_];"number"==typeof I?g=I:1==g?h=ce(h,I):2==g&&(c=ce(c,I+": "+o[++_]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=h:s.classesWithoutHost=h}function Om(s,o,a,c,h=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push(pr(g)),si(g))for(let I=fr;I<g.length;I++){const b=g[I],x=b[qe].firstChild;null!==x&&Om(b[qe],b,x,c)}const _=a.type;if(8&_)Om(s,o,a.child,c);else if(32&_){const I=Js(a,o);let b;for(;b=I();)c.push(b)}else if(16&_){const I=vh(o,a);if(Array.isArray(I))c.push(...I);else{const b=Lc(o[jn]);Om(b[qe],b,I,c,!0)}}a=h?a.projectionNext:a.next}return c}class Eu{get rootNodes(){const o=this._lView,a=o[qe];return Om(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(o){this._lView[kn]=o}get destroyed(){return 128==(128&this._lView[Lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Dn];if(si(o)){const a=o[js],c=a?a.indexOf(this):-1;c>-1&&(Uc(o,c),Ro(a,c))}this._attachedToViewContainer=!1}ph(this._lView[qe],this._lView)}onDestroy(o){zt(this._lView[qe],this._lView,null,o)}markForCheck(){Mm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Lt]&=-65}reattach(){this._lView[Lt]|=64}detectChanges(){Np(this._lView[qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fh(s,o){Gc(s,o,o[jt],2,null,null)}(this._lView[qe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=o}}class eb extends Eu{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Np(o[qe],o,o[kn],!1)}checkNoChanges(){}get context(){return null}}class iE extends Ah{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=mt(o);return new Fh(a,this.ngModule)}}function kp(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class sE{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Wn(c);const h=this.injector.get(o,vm,c);return h!==vm||a===vm?h:this.parentInjector.get(o,a,c)}}class Fh extends Iw{get inputs(){return kp(this.componentDef.inputs)}get outputs(){return kp(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function RC(s){return s.map(MC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,h){let g=(h=h||this.ngModule)instanceof Jc?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new sE(o,g):o,I=_.get($_,null);if(null===I)throw new he(407,!1);const b=_.get(IC,null),x=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function Al(s,o,a){return s.selectRootElement(o,a===ye.ShadowDom)}(x,c,this.componentDef.encapsulation):rp(x,R,function ov(s){const o=s.toLowerCase();return"svg"===o?Nr:"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,Y=Ts(0,null,null,1,0,null,null,null,null,null),me=Dm(null,Y,null,G,null,null,I,x,b,_,null);let Le,Ke;Zu(me);try{const ut=this.componentDef;let xt,xe=null;ut.findHostDirectiveDefs?(xt=[],xe=new Map,ut.findHostDirectiveDefs(ut,xt,xe),xt.push(ut)):xt=[ut];const $t=function uv(s,o){const a=s[qe],c=vn;return s[c]=o,Sp(a,c,2,"#host",null)}(me,F),Bn=function lv(s,o,a,c,h,g,_,I){const b=h[qe];!function cv(s,o,a,c){for(const h of s)o.mergedAttrs=Io(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Rl(o,o.mergedAttrs,!0),null!==a&&qc(c,a,o))}(c,s,o,_);const x=g.createRenderer(o,a),R=Dm(h,pe(a),null,a.onPush?32:16,h[s.index],s,g,x,I||null,null,null);return b.firstCreatePass&&ev(b,s,c.length-1),Pp(h,R),h[s.index]=R}($t,F,ut,xt,me,I,x);Ke=Hd(Y,vn),F&&function aE(s,o,a,c){if(c)aa(s,a,["ng-version",Tw.full]);else{const{attrs:h,classes:g}=function PC(s){const o=[],a=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&a.push(g);else{if(!$o(h))break;h=g}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&aa(s,a,h),g&&g.length>0&&os(s,a,g.join(" "))}}(x,ut,F,c),void 0!==a&&function uE(s,o,a){const c=s.projection=[];for(let h=0;h<o.length;h++){const g=a[h];c.push(null!=g?Array.from(g):null)}}(Ke,this.ngContentSelectors,a),Le=function dv(s,o,a,c,h,g){const _=ir(),I=h[qe],b=gr(_,h);Yw(I,h,_,a,null,c);for(let R=0;R<a.length;R++)te(Hn(h,I,_.directiveStart+R,_),h);Rp(I,h,_),b&&te(b,h);const x=Hn(h,I,_.directiveStart+_.componentOffset,_);if(s[kn]=h[kn]=x,null!==g)for(const R of g)R(x,o);return li(I,_,s),x}(Bn,ut,xt,xe,me,[tb]),Ap(Y,me,null)}finally{Ku()}return new oE(this.componentType,Le,vu(Ke,me),me,Ke)}}class oE extends _C{constructor(o,a,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new eb(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const g=this._rootLView;Nm(g[qe],g,h,o,a),Mm(rr(this._tNode.index,g))}}get injector(){return new Es(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function tb(){const s=ir();Qu(le()[qe],s)}function km(s){let o=function hv(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let h;if(wi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new he(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const _=s;_.inputs=Fm(s.inputs),_.declaredInputs=Fm(s.declaredInputs),_.outputs=Fm(s.outputs);const I=h.hostBindings;I&&gv(s,I);const b=h.viewQuery,x=h.contentQueries;if(b&&nb(s,b),x&&pv(s,x),ge(s.inputs,h.inputs),ge(s.declaredInputs,h.declaredInputs),ge(s.outputs,h.outputs),wi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let _=0;_<g.length;_++){const I=g[_];I&&I.ngInherit&&I(s),I===km&&(a=!1)}}o=Object.getPrototypeOf(o)}!function fv(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Io(h.hostAttrs,a=Io(a,h.hostAttrs))}}(c)}function Fm(s){return s===X?{}:s===ke?[]:s}function nb(s,o){const a=s.viewQuery;s.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function pv(s,o){const a=s.contentQueries;s.contentQueries=a?(c,h,g)=>{o(c,h,g),a(c,h,g)}:o}function gv(s,o){const a=s.hostBindings;s.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}function Fp(s){return!!Lp(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Lp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Qr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function td(s,o,a,c){const h=le();return Qr(h,yo(),o)&&(Vt(),Ss(Tn(),h,s,o,a,c)),td}function rd(s,o,a,c){return Qr(s,yo(),a)?o+Re(a)+c:Ut}function Bm(s,o,a,c,h,g,_,I){const b=le(),x=Vt(),R=s+vn,F=x.firstCreatePass?function hE(s,o,a,c,h,g,_,I,b){const x=o.consts,R=Sp(o,s,4,_||null,zs(x,I));Mp(o,a,R,zs(x,b)),Qu(o,R);const F=R.tView=Ts(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,x,b,o,a,c,h,g,_):x.data[R];qr(F,!1);const G=b[jt].createComment("");pu(x,b,G,F),te(G,b),Pp(b,b[R]=jo(G,b,G,F)),lc(F)&&Kw(x,b,F),null!=_&&Tm(b,F,I)}function sd(s,o,a){const c=le();return Qr(c,yo(),o)&&Ai(Vt(),Tn(),c,s,o,c[jt],a,!1),sd}function Bp(s,o,a,c,h){const _=h?"class":"style";Nm(s,a,o.inputs[_],_,c)}function Hh(s,o,a,c){const h=le(),g=Vt(),_=vn+s,I=h[jt],b=g.firstCreatePass?function Iv(s,o,a,c,h,g){const _=o.consts,b=Sp(o,s,2,c,zs(_,h));return Mp(o,a,b,zs(_,g)),null!==b.attrs&&Rl(b,b.attrs,!1),null!==b.mergedAttrs&&Rl(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(_,g,h,o,a,c):g.data[_],x=h[_]=rp(I,o,function Xd(){return Nt.lFrame.currentNamespace}()),R=lc(b);return qr(b,!0),qc(I,x,b),32!=(32&b.flags)&&pu(g,h,x,b),0===function zd(){return Nt.lFrame.elementDepthCount}()&&te(x,h),function $u(){Nt.lFrame.elementDepthCount++}(),R&&(Kw(g,h,b),li(g,b,h)),null!==c&&Tm(h,b),Hh}function od(){let s=ir();Zd()?function Gu(){Nt.lFrame.isParent=!1}():(s=s.parent,qr(s,!1));const o=s;!function qd(){Nt.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(Qu(a,s),Va(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ya(s){return 0!=(8&s.flags)}(o)&&Bp(a,o,le(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function vo(s){return 0!=(16&s.flags)}(o)&&Bp(a,o,le(),o.stylesWithoutHost,!1),od}function ad(s,o,a,c){return Hh(s,o,a,c),od(),ad}function $m(){return le()}function jm(s){return!!s&&"function"==typeof s.then}function Cv(s){return!!s&&"function"==typeof s.subscribe}const bv=Cv;function Tv(s,o,a,c){const h=le(),g=Vt(),_=ir();return function Hp(s,o,a,c,h,g,_){const I=lc(c),x=s.firstCreatePass&&nE(s),R=o[kn],F=Rm(o);let G=!0;if(3&c.type||_){const Le=gr(c,o),Ke=_?_(Le):Le,ut=F.length,xt=_?$t=>_(pr($t[c.index])):c.index;let xe=null;if(!_&&I&&(xe=function mE(s,o,a,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const _=h[g];if(_===a&&h[g+1]===c){const I=o[$s],b=h[g+2];return I.length>b?I[b]:null}"string"==typeof _&&(g+=2)}return null}(s,o,h,c.index)),null!==xe)(xe.__ngLastListenerFn__||xe).__ngNextListenerFn__=g,xe.__ngLastListenerFn__=g,G=!1;else{g=Ol(c,o,R,g,!1);const $t=a.listen(Ke,h,g);F.push(g,$t),x&&x.push(h,xt,ut,ut+1)}}else g=Ol(c,o,R,g,!1);const Y=c.outputs;let me;if(G&&null!==Y&&(me=Y[h])){const Le=me.length;if(Le)for(let Ke=0;Ke<Le;Ke+=2){const Bn=o[me[Ke]][me[Ke+1]].subscribe(g),er=F.length;F.push(g,Bn),x&&x.push(h,c.index,er,-(er+1))}}}(g,h,h[jt],_,s,o,c),Tv}function zh(s,o,a,c){try{return zr(6,o,a),!1!==a(c)}catch(h){return Pm(s,h),!1}finally{zr(7,o,a)}}function Ol(s,o,a,c,h){return function g(_){if(_===Function)return c;Mm(s.componentOffset>-1?rr(s.index,o):o);let b=zh(o,a,c,_),x=g.__ngNextListenerFn__;for(;x;)b=zh(o,a,x,_)&&b,x=x.__ngNextListenerFn__;return h&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function Hm(s=1){return function Bf(s){return(Nt.lFrame.contextLView=function Yu(s,o){for(;s>0;)o=o[fo],s--;return o}(s,Nt.lFrame.contextLView))[kn]}(s)}function Gm(s,o,a){return zm(s,"",o,"",a),Gm}function zm(s,o,a,c,h){const g=le(),_=rd(g,o,a,c);return _!==Ut&&Ai(Vt(),Tn(),g,s,_,g[jt],h,!1),zm}function Fl(s,o){return s<<17|o<<2}function Ll(s){return s>>17&32767}function Av(s){return 2|s}function ud(s){return(131068&s)>>2}function xv(s,o){return-131069&s|o<<2}function Da(s){return 1|s}function wE(s,o,a,c,h){const g=s[a+1],_=null===o;let I=c?Ll(g):ud(g),b=!1;for(;0!==I&&(!1===b||_);){const R=s[I+1];db(s[I],o)&&(b=!0,s[I+1]=c?Da(R):Av(R)),I=c?Ll(R):ud(R)}b&&(s[a+1]=c?Av(g):Da(g))}function db(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&oi(s,o)>=0}function Km(s,o){return function oo(s,o,a,c){const h=le(),g=Vt(),_=function Di(s){const o=Nt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);g.firstUpdatePass&&function TE(s,o,a,c){const h=s.data;if(null===h[a+1]){const g=h[Dr()],_=function bE(s,o){return o>=s.expandoStartIndex}(s,a);(function Yp(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!_&&(o=!1),o=function SE(s,o,a,c){const h=function ia(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=As(a=Qm(null,s,o,a,c),o.attrs,c),g=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(a=Qm(h,s,o,a,c),null===g){let b=function AE(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==ud(c))return s[Ll(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=Qm(null,s,o,b[1],c),b=As(b,o.attrs,c),function xE(s,o,a,c){s[Ll(a?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else g=function Ym(s,o,a){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=As(c,s[g].hostAttrs,a);return As(c,o.attrs,a)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),a}(h,g,o,c),function vE(s,o,a,c,h,g){let _=g?o.classBindings:o.styleBindings,I=Ll(_),b=ud(_);s[c]=a;let R,x=!1;if(Array.isArray(a)?(R=a[1],(null===R||oi(a,R)>0)&&(x=!0)):R=a,h)if(0!==b){const G=Ll(s[I+1]);s[c+1]=Fl(G,I),0!==G&&(s[G+1]=xv(s[G+1],c)),s[I+1]=function ub(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Fl(I,0),0!==I&&(s[I+1]=xv(s[I+1],c)),I=c;else s[c+1]=Fl(b,0),0===I?I=c:s[b+1]=xv(s[b+1],c),b=c;x&&(s[c+1]=Av(s[c+1])),wE(s,R,c,!0),wE(s,R,c,!1),function Wh(s,o,a,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&oi(g,o)>=0&&(a[c+1]=Da(a[c+1]))}(o,R,s,c,g),_=Fl(I,b),g?o.classBindings=_:o.styleBindings=_}(h,g,o,a,_,c)}}(g,s,_,c),o!==Ut&&Qr(h,_,o)&&function Fv(s,o,a,c,h,g,_,I){if(!(3&o.type))return;const b=s.data,x=b[I+1],R=function Wp(s){return 1==(1&s)}(x)?Xm(b,o,a,h,ud(x),_):void 0;ld(R)||(ld(g)||function _E(s){return 2==(2&s)}(x)&&(g=Xm(b,null,a,h,I,_)),function eo(s,o,a,c,h){if(o)h?s.addClass(a,c):s.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:Dt.DashCase;null==h?s.removeStyle(a,c,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Dt.Important),s.setStyle(a,c,h,g))}}(c,_,gs(Dr(),a),h,g))}(g,g.data[Dr()],h,h[jt],s,h[_+1]=function RE(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=_e(Lr(s)))),s}(o,a),c,_)}(s,o,null,!0),Km}function Qm(s,o,a,c,h){let g=null;const _=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<_&&(g=o[I],c=As(c,g.hostAttrs,h),g!==s);)I++;return null!==s&&(a.directiveStylingLast=I),c}function As(s,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?h=_:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Wr(s,_,!!a||o[++g]))}return void 0===s?null:s}function Xm(s,o,a,c,h,g){const _=null===o;let I;for(;h>0;){const b=s[h],x=Array.isArray(b),R=x?b[1]:b,F=null===R;let G=a[h+1];G===Ut&&(G=F?ke:void 0);let Y=F?nn(G,c):R===c?G:void 0;if(x&&!ld(Y)&&(Y=nn(b,c)),ld(Y)&&(I=Y,_))return I;const me=s[h+1];h=_?Ll(me):ud(me)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(I=nn(b,c))}return I}function ld(s){return void 0!==s}function PE(s,o=""){const a=le(),c=Vt(),h=s+vn,g=c.firstCreatePass?Sp(c,h,1,o,null):c.data[h],_=a[h]=function vl(s,o){return s.createText(o)}(a[jt],o);pu(c,a,_,g),qr(g,!1)}function Jm(s){return Ul("",s,""),Jm}function Ul(s,o,a){const c=le(),h=rd(c,s,o,a);return h!==Ut&&function wu(s,o,a){const c=gs(o,s);!function np(s,o,a){s.setValue(o,a)}(s[jt],c,a)}(c,Dr(),h),Ul}const Bl=void 0;var yb=["en",[["a","p"],["AM","PM"],Bl],[["AM","PM"],Bl,Bl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bl,"{1} 'at' {0}",Bl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Qh(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Xh={};function zv(s){const o=function _b(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=$E(o);if(a)return a;const c=o.split("-")[0];if(a=$E(c),a)return a;if("en"===c)return yb;throw new he(701,!1)}function qv(s){return zv(s)[At.PluralCase]}function $E(s){return s in Xh||(Xh[s]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[s]),Xh[s]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const Xn="en-US";let lr=Xn;function ay(s,o,a,c,h){if(s=W(s),Array.isArray(s))for(let g=0;g<s.length;g++)ay(s[g],o,a,c,h);else{const g=Vt(),_=le();let I=_u(s)?s:W(s.provide),b=L_(s);const x=ir(),R=1048575&x.providerIndexes,F=x.directiveStart,G=x.providerIndexes>>20;if(_u(s)||!s.multi){const Y=new vs(b,h,Oh),me=uy(I,o,h?R:R+G,F);-1===me?(gn(wc(x,_),g,I),n0(g,s,o.length),o.push(I),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),a.push(Y),_.push(Y)):(a[me]=Y,_[me]=Y)}else{const Y=uy(I,o,R+G,F),me=uy(I,o,R,R+G),Ke=me>=0&&a[me];if(h&&!Ke||!h&&!(Y>=0&&a[Y])){gn(wc(x,_),g,I);const ut=function aI(s,o,a,c,h){const g=new vs(s,a,Oh);return g.multi=[],g.index=o,g.componentProviders=0,r0(g,h,c&&!a),g}(h?s0:Lb,a.length,h,c,b);!h&&Ke&&(a[me].providerFactory=ut),n0(g,s,o.length,0),o.push(I),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),a.push(ut),_.push(ut)}else n0(g,s,Y>-1?Y:me,r0(a[h?me:Y],b,!h&&c));!h&&c&&Ke&&a[me].componentProviders++}}}function n0(s,o,a,c){const h=_u(o),g=function gm(s){return!!s.useClass}(o);if(h||g){const b=(g?W(o.useClass):o).prototype.ngOnDestroy;if(b){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=x.indexOf(a);-1===R?x.push(a,[c,b]):x[R+1].push(c,b)}else x.push(a,b)}}}function r0(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function uy(s,o,a,c){for(let h=a;h<c;h++)if(o[h]===s)return h;return-1}function Lb(s,o,a,c){return Tr(this.multi,[])}function s0(s,o,a,c){const h=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=Hn(a,a[qe],this.providerFactory.index,c);g=I.slice(0,_),Tr(h,g);for(let b=_;b<I.length;b++)g.push(I[b])}else g=[],Tr(h,g);return g}function Tr(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function bu(s,o=[]){return a=>{a.providersResolver=(c,h)=>function Fb(s,o,a){const c=Vt();if(c.firstCreatePass){const h=wi(s);ay(a,c.data,c.blueprint,h,!0),ay(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class fd{}class xn{}function ly(s,o){return new Nn(s,o??null)}class Nn extends fd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iE(this);const c=Zn(o);this._bootstrapComponents=va(c.bootstrap),this._r3Injector=Z_(o,a,[{provide:fd,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],_e(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class cy extends xn{constructor(o){super(),this.moduleType=o}create(o){return new Nn(this.moduleType,o)}}class cf extends fd{constructor(o,a,c){super(),this.componentFactoryResolver=new iE(this),this.instance=null;const h=new ww([...o,{provide:fd,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],a||ym(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Oi(s,o,a=null){return new cf(s,o,a).injector}let uI=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=bh(0,a.type),h=c.length>0?Oi([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=bt({token:s,providedIn:"environment",factory:()=>new s(un(Jc))}),s})();function lI(s){s.getStandaloneInjector=o=>o.get(uI).getOrCreateStandaloneInjector(s)}function gI(s,o,a,c,h,g,_){const I=o+a;return function Iu(s,o,a,c){const h=Qr(s,o,a);return Qr(s,o+1,c)||h}(s,I,h,g)?function Ea(s,o,a){return s[o]=a}(s,I+2,_?c.call(_,h,g):c(h,g)):function hf(s,o){const a=s[o];return a===Ut?void 0:a}(s,I+2)}function c0(s,o){const a=Vt();let c;const h=s+vn;a.firstCreatePass?(c=function Un(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks??(a.destroyHooks=[])).push(h,c.onDestroy)):c=a.data[h];const g=c.factory||(c.factory=rs(c.type)),_=Er(Oh);try{const I=Qa(!1),b=g();return Qa(I),function fE(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,le(),h,b),b}finally{Er(_)}}function d0(s,o,a,c){const h=s+vn,g=le(),_=function Or(s,o){return s[o]}(g,h);return function Yt(s,o){return s[qe].data[o].pure}(g,h)?gI(g,function Yn(){const s=Nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,_.transform,a,c,_):_.transform(a,c)}function zl(s){return o=>{setTimeout(s,void 0,o)}}const uo=class En extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,g=a||(()=>null),_=c;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),g=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(g=zl(g),h&&(h=zl(h)),_&&(_=zl(_)));const I=super.subscribe({next:h,error:g,complete:_});return o instanceof Q.w0&&o.add(I),I}};function h0(){return this._results[Symbol.iterator]()}class my{get changes(){return this._changes||(this._changes=new uo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=my.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=h0)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=function Hi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Tc(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let yd=(()=>{class s{}return s.__NG_ELEMENT_ID__=wI,s})();const _I=yd,vI=class extends _I{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tView,h=Dm(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);h[Qo]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[ns];return null!==_&&(h[ns]=_.createEmbeddedView(c)),Ap(c,h,o),new Eu(h)}};function wI(){return yy(ir(),le())}function yy(s,o){return 4&s.type?new vI(o,s,vu(s,o)):null}let _y=(()=>{class s{}return s.__NG_ELEMENT_ID__=Bb,s})();function Bb(){return DI(ir(),le())}const EI=_y,II=class extends EI{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return vu(this._hostTNode,this._hostLView)}get injector(){return new Es(this._hostTNode,this._hostLView)}get parentInjector(){const o=nh(this._hostTNode,this._hostLView);if(Do(o)){const a=Co(o,this._hostLView),c=qs(o);return new Es(a[qe].data[c+8],a)}return new Es(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=f0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(o,a,c){let h,g;"number"==typeof c?h=c:null!=c&&(h=c.index,g=c.injector);const _=o.createEmbeddedView(a||{},g);return this.insert(_,h),_}createComponent(o,a,c,h,g){const _=o&&!function al(s){return"function"==typeof s}(o);let I;if(_)I=a;else{const F=a||{};I=F.index,c=F.injector,h=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const b=_?o:new Fh(mt(o)),x=c||this.parentInjector;if(!g&&null==b.ngModule){const G=(_?x:this.parentInjector).get(Jc,null);G&&(g=G)}const R=b.create(x,h,void 0,g);return this.insert(R.hostView,I),R}insert(o,a){const c=o._lView,h=c[qe];if(function fc(s){return si(s[Dn])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[Dn],G=new II(F,F[Kn],F[Dn]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(a),_=this._lContainer;!function du(s,o,a,c){const h=fr+c,g=a.length;c>0&&(a[h-1][vi]=o),c<g-fr?(o[vi]=a[h],Yf(a,fr+c,o)):(a.push(o),o[vi]=null),o[Dn]=a;const _=o[Qo];null!==_&&a!==_&&function y_(s,o){const a=s[po];o[jn]!==o[Dn][Dn][jn]&&(s[uc]=!0),null===a?s[po]=[o]:a.push(o)}(_,o);const I=o[ns];null!==I&&I.insertView(s),o[Lt]|=64}(h,c,_,g);const I=Cs(g,_),b=c[jt],x=Bo(b,_[Jo]);return null!==x&&function rm(s,o,a,c,h,g){c[_i]=h,c[Kn]=o,Gc(s,c,a,1,h,g)}(h,_[Kn],b,c,x,I),o.attachToViewContainerRef(),Yf(p0(_),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=f0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Uc(this._lContainer,a);c&&(Ro(p0(this._lContainer),a),ph(c[qe],c))}detach(o){const a=this._adjustIndex(o,-1),c=Uc(this._lContainer,a);return c&&null!=Ro(p0(this._lContainer),a)?new Eu(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function f0(s){return s[js]}function p0(s){return s[js]||(s[js]=[])}function DI(s,o){let a;const c=o[s.index];if(si(c))a=c;else{let h;if(8&s.type)h=pr(c);else{const g=o[jt];h=g.createComment("");const _=gr(s,o);ya(g,Bo(g,_),h,function om(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=a=jo(c,o,h,s),Pp(o,a)}return new II(a,s,o)}class g0{constructor(o){this.queryList=o,this.matches=null}clone(){return new g0(this.queryList)}setDirty(){this.queryList.setDirty()}}class dg{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let g=0;g<c;g++){const _=a.getByIndex(g);h.push(this.queries[_.indexInDeclarationView].clone())}return new dg(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==gf(o,a).matches&&this.queries[a].setDirty()}}class ql{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class _d{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new _d(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class pf{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new pf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,a,vy(a,g)),this.matchTNodeWithReadOption(o,a,To(a,o,g,!1,!1))}else c===yd?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,To(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===xh||h===_y||h===yd&&4&a.type)this.addMatch(a.index,-2);else{const g=To(a,o,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function vy(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function bI(s,o,a,c){return-1===a?function CI(s,o){return 11&s.type?vu(s,o):4&s.type?yy(s,o):null}(o,s):-2===a?function Au(s,o,a){return a===xh?vu(o,s):a===yd?yy(o,s):a===_y?DI(o,s):void 0}(s,o,c):Hn(s,s[qe],a,o)}function m0(s,o,a,c){const h=o[ns].queries[c];if(null===h.matches){const g=s.data,_=a.matches,I=[];for(let b=0;b<_.length;b+=2){const x=_[b];I.push(x<0?null:bI(o,g[x],_[b+1],a.metadata.read))}h.matches=I}return h.matches}function Wl(s,o,a,c){const h=s.queries.getByIndex(a),g=h.matches;if(null!==g){const _=m0(s,o,h,a);for(let I=0;I<g.length;I+=2){const b=g[I];if(b>0)c.push(_[I/2]);else{const x=g[I+1],R=o[-b];for(let F=fr;F<R.length;F++){const G=R[F];G[Qo]===G[Dn]&&Wl(G[qe],G,x,c)}if(null!==R[po]){const F=R[po];for(let G=0;G<F.length;G++){const Y=F[G];Wl(Y[qe],Y,x,c)}}}}}return c}function y0(s){const o=le(),a=Vt(),c=pc();qu(c+1);const h=gf(a,c);if(s.dirty&&function Bu(s){return 4==(4&s[Lt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Wl(a,o,c,[]):m0(a,o,h,c);s.reset(g,wp),s.notifyOnChanges()}return!0}return!1}function hg(s,o,a,c){const h=Vt();if(h.firstCreatePass){const g=ir();(function Ey(s,o,a){null===s.queries&&(s.queries=new _d),s.queries.track(new pf(o,a))})(h,new ql(o,a,c),g.index),function Iy(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function ki(s,o,a){const c=new my(4==(4&a));zt(s,o,c,c.destroy),null===o[ns]&&(o[ns]=new dg),o[ns].queries.push(new g0(c))}(h,le(),a)}function wy(){return function vd(s,o){return s[ns].queries[o].queryList}(le(),pc())}function gf(s,o){return s.queries.getByIndex(o)}function Fi(s){return!!Zn(s)}function Ig(...s){}const Dg=new Xt("Application Initializer");let Cg=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Ig,this.reject=Ig,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(jm(g))a.push(g);else if(bv(g)){const _=new Promise((I,b)=>{g.subscribe({complete:I,error:b})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(un(Dg,8))},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const GI=new Xt("AppId",{providedIn:"root",factory:function I0(){return`${bg()}${bg()}${bg()}`}});function bg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wf=new Xt("Platform Initializer"),Tg=new Xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let zI=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Sg=new Xt("LocaleId",{providedIn:"root",factory:()=>On(Sg,gt.Optional|gt.SkipSelf)||function qI(){return typeof $localize<"u"&&$localize.locale||Xn}()}),Kb=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Xb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Jb=(()=>{class s{compileModuleSync(a){return new cy(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=va(Zn(a).declarations).reduce((_,I)=>{const b=mt(I);return b&&_.push(new Fh(b)),_},[]);return new Xb(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const KI=(()=>Promise.resolve(0))();function Id(s){typeof Zone>"u"?KI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ns{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new uo(!1),this.onMicrotaskEmpty=new uo(!1),this.onStable=new uo(!1),this.onError=new uo(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Ra(){let s=rn.requestAnimationFrame,o=rn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function XI(s){const o=()=>{!function QI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(rn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,b0(s),s.isCheckStableRunning=!0,xy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),b0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,g,_,I)=>{try{return JI(s),a.invokeTask(h,g,_,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),If(s)}},onInvoke:(a,c,h,g,_,I,b)=>{try{return JI(s),a.invoke(h,g,_,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),If(s)}},onHasTask:(a,c,h,g)=>{a.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,b0(s),xy(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,h,g)=>(a.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ns.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(Ns.isInAngularZone())throw new he(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+h,o,Ag,Ig,Ig);try{return g.runTask(_,a,c)}finally{g.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Ag={};function xy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function b0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function JI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function If(s){s._nesting--,xy(s)}class T0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new uo,this.onMicrotaskEmpty=new uo,this.onStable=new uo,this.onError=new uo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const eD=new Xt(""),S0=new Xt("");let My,A0=(()=>{class s{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,My||(function tT(s){My=s}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ns.assertNotInAngularZone(),Id(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Id(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(un(Ns),un(x0),un(S0))},s.\u0275prov=bt({token:s,factory:s.\u0275fac}),s})(),x0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return My?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const xu=!1;let Yl=null;const tD=new Xt("AllowMultipleToken"),Pa=new Xt("PlatformDestroyListeners"),Dd=new Xt("appBootstrapListener");class Mu{constructor(o,a){this.name=o,this.token=a}}function Ql(s,o,a=[]){const c=`Platform: ${o}`,h=new Xt(c);return(g=[])=>{let _=Py();if(!_||_.injector.get(tD,!1)){const I=[...a,...g,{provide:h,useValue:!0}];s?s(I):function iD(s){if(Yl&&!Yl.get(tD,!1))throw new he(400,!1);Yl=s;const o=s.get(Ny);(function M0(s){const o=s.get(wf,null);o&&o.forEach(a=>a())})(s)}(function Xl(s=[],o){return Rh.create({name:o,providers:[{provide:Sl,useValue:"platform"},{provide:Pa,useValue:new Set([()=>Yl=null])},...s]})}(I,c))}return function Cd(s){const o=Py();if(!o)throw new he(401,!1);return o}()}}function Py(){return Yl?.get(Ny)??null}let Ny=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function P0(s,o){let a;return a="noop"===s?new T0:("zone.js"===s?void 0:s)||new Ns(o),a}(c?.ngZone,function Oy(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Ns,useValue:h}];return h.run(()=>{const _=Rh.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(_),b=I.injector.get(Ep,null);if(!b)throw new he(402,!1);return h.runOutsideAngular(()=>{const x=h.onError.subscribe({next:R=>{b.handleError(R)}});I.onDestroy(()=>{Mg(this._modules,I),x.unsubscribe()})}),function N0(s,o,a){try{const c=a();return jm(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,h,()=>{const x=I.injector.get(Cg);return x.runInitializers(),x.donePromise.then(()=>(function Rs(s){ft(s,"Expected localeId to be defined"),"string"==typeof s&&(lr=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Sg,Xn)||Xn),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const h=sD({},c);return function nD(s,o,a){const c=new cy(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const c=a.injector.get(xg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new he(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Pa,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(un(Rh))},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function sD(s,o){return Array.isArray(o)?o.reduce(sD,s):{...s,...o}}let xg=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,h){this._zone=a,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new O.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Ns.assertNotInAngularZone(),Id(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Ns.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),x.unsubscribe()}});this.isStable=(0,se.T)(g,_.pipe((0,re.B)()))}bootstrap(a,c){const h=a instanceof Iw;if(!this._injector.get(Cg).done){!h&&hr(a);throw new he(405,xu)}let _;_=h?a:this._injector.get(Ah).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function rD(s){return s.isBoundToModule}(_)?void 0:this._injector.get(fd),x=_.create(Rh.NULL,[],c||_.selector,I),R=x.location.nativeElement,F=x.injector.get(eD,null);return F?.registerApplication(R),x.onDestroy(()=>{this.detachView(x.hostView),Mg(this.components,x),F?.unregisterApplication(R)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Mg(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Dd,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Mg(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new he(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(un(Ns),un(Jc),un(Ep))},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Mg(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}function bd(){return!1}let iT=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ng,s})();function Ng(s){return function Td(s,o,a){if(ea(s)&&!a){const c=rr(s.index,o);return new Eu(c,c)}return 47&s.type?new Eu(o[jn],o):null}(ir(),le(),16==(16&s))}class fi{constructor(){}supports(o){return Fp(o)}create(o){return new Uy(o)}}const uD=(s,o)=>o;class Uy{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||uD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,g=null;for(;a||c;){const _=!c||a&&a.currentIndex<Ad(c,h,g)?a:c,I=Ad(_,h,g),b=_.currentIndex;if(_===c)h--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)h++;else{g||(g=[]);const x=I-h,R=b-h;if(x!=R){for(let G=0;G<x;G++){const Y=G<g.length?g[G]:g[G]=0,me=Y+G;R<=me&&me<x&&(g[G]=Y+1)}g[_.previousIndex]=R-x}}I!==b&&o(_,I,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Fp(o))throw new he(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],_=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,g,_,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,I),c=!0),a=a._next}else h=0,function sb(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{_=this._trackByFn(h,I),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,I,_,h)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,h)):o=this._addAfter(new By(a,c),g,h),o}_verifyReinsertion(o,a,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ru),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ru),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class By{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Ru{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new lD,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ad(s,o,a){const c=s.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class U0{constructor(){}supports(o){return o instanceof Map||Lp(o)}create(){return new xd}}class xd{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Lp(o)))throw new he(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const g=h._prev,_=h._next;return g&&(g._next=_),_&&(_._prev=g),h._next=null,h._prev=null,h}const c=new lT(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class lT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Md(){return new $y([new fi])}let $y=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Md()),deps:[[s,new wt,new ou]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new he(901,!1)}}return s.\u0275prov=bt({token:s,providedIn:"root",factory:Md}),s})();function B0(){return new $0([new U0])}let $0=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||B0()),deps:[[s,new wt,new ou]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new he(901,!1)}}return s.\u0275prov=bt({token:s,providedIn:"root",factory:B0}),s})();const jy=Ql(null,"core",[]);let dD=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(un(xg))},s.\u0275mod=J({type:s}),s.\u0275inj=_n({}),s})();function hT(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(It,be,k)=>{k.d(be,{Z:()=>We});var d=k(2090),Q=k(4859),O=k(6881),se=k(1877);class re{constructor(he,Me){this._delegate=he,this.firebase=Me,(0,O._addComponent)(he,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,Me=O._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(he);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Re=Ve.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:Me})}_removeServiceInstance(he,Me=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Me)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ce(){const ht=function _e(ht){const he={},Me={__esModule:!0,initializeApp:function Pe(Oe,rt={}){const ne=O.initializeApp(Oe,rt);if((0,d.r3)(he,ne.name))return he[ne.name];const Tt=new ht(ne,Me);return he[ne.name]=Tt,Tt},app:Ve,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(Oe){const rt=Oe.name,ne=rt.replace("-compat","");if(O._registerComponent(Oe)&&"PUBLIC"===Oe.type){const Tt=(et=Ve())=>{if("function"!=typeof et[ne])throw ge.create("invalid-app-argument",{appName:rt});return et[ne]()};void 0!==Oe.serviceProps&&(0,d.ZB)(Tt,Oe.serviceProps),Me[ne]=Tt,ht.prototype[ne]=function(...et){return this._getService.bind(this,rt).apply(this,Oe.multipleInstances?et:[])}}return"PUBLIC"===Oe.type?Me[ne]:null},removeApp:function Re(Oe){delete he[Oe]},useAsService:function He(Oe,rt){return"serverAuth"===rt?null:rt},modularAPIs:O}};function Ve(Oe){if(!(0,d.r3)(he,Oe=Oe||O._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Oe});return he[Oe]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function ve(){return Object.keys(he).map(Oe=>he[Oe])}}),Ve.App=ht,Me}(re);return ht.INTERNAL=Object.assign(Object.assign({},ht.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function he(Me){(0,d.ZB)(ht,Me)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ht}(),$=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ht=self.firebase.SDK_VERSION;ht&&ht.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=j;!function Ce(ht){(0,O.registerVersion)("@firebase/app-compat","0.2.9",ht)}()},6881:(It,be,k)=>{k.r(be),k.d(be,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Bs,_DEFAULT_ENTRY_NAME:()=>jr,_addComponent:()=>it,_addOrOverwriteComponent:()=>Pt,_apps:()=>rn,_clearComponents:()=>Hr,_components:()=>an,_getProvider:()=>ti,_registerComponent:()=>mi,_removeServiceInstance:()=>dr,deleteApp:()=>yi,getApp:()=>es,getApps:()=>un,initializeApp:()=>Qt,onLog:()=>Li,registerVersion:()=>Wn,setLogLevel:()=>In});var d=k(5861),Q=k(4859),O=k(1877),se=k(2090);const re=(ue,J)=>J.some(Ne=>ue instanceof Ne);let ie,ge;const j=new WeakMap,$=new WeakMap,W=new WeakMap,je=new WeakMap,Ce=new WeakMap;let he={get(ue,J,Ne){if(ue instanceof IDBTransaction){if("done"===J)return $.get(ue);if("objectStoreNames"===J)return ue.objectStoreNames||W.get(ue);if("store"===J)return Ne.objectStoreNames[1]?void 0:Ne.objectStore(Ne.objectStoreNames[0])}return Pe(ue[J])},set:(ue,J,Ne)=>(ue[J]=Ne,!0),has:(ue,J)=>ue instanceof IDBTransaction&&("done"===J||"store"===J)||J in ue};function Ve(ue){return"function"==typeof ue?function Re(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...J){return ue.apply(ve(this),J),Pe(j.get(this))}:function(...J){return Pe(ue.apply(ve(this),J))}:function(J,...Ne){const pt=ue.call(ve(this),J,...Ne);return W.set(pt,J.sort?J.sort():[J]),Pe(pt)}}(ue):(ue instanceof IDBTransaction&&function ht(ue){if($.has(ue))return;const J=new Promise((Ne,pt)=>{const Ct=()=>{ue.removeEventListener("complete",Gt),ue.removeEventListener("error",mt),ue.removeEventListener("abort",mt)},Gt=()=>{Ne(),Ct()},mt=()=>{pt(ue.error||new DOMException("AbortError","AbortError")),Ct()};ue.addEventListener("complete",Gt),ue.addEventListener("error",mt),ue.addEventListener("abort",mt)});$.set(ue,J)}(ue),re(ue,function _e(){return ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,he):ue)}function Pe(ue){if(ue instanceof IDBRequest)return function We(ue){const J=new Promise((Ne,pt)=>{const Ct=()=>{ue.removeEventListener("success",Gt),ue.removeEventListener("error",mt)},Gt=()=>{Ne(Pe(ue.result)),Ct()},mt=()=>{pt(ue.error),Ct()};ue.addEventListener("success",Gt),ue.addEventListener("error",mt)});return J.then(Ne=>{Ne instanceof IDBCursor&&j.set(Ne,ue)}).catch(()=>{}),Ce.set(J,ue),J}(ue);if(je.has(ue))return je.get(ue);const J=Ve(ue);return J!==ue&&(je.set(ue,J),Ce.set(J,ue)),J}const ve=ue=>Ce.get(ue),Oe=["get","getKey","getAll","getAllKeys","count"],rt=["put","add","delete","clear"],ne=new Map;function Tt(ue,J){if(!(ue instanceof IDBDatabase)||J in ue||"string"!=typeof J)return;if(ne.get(J))return ne.get(J);const Ne=J.replace(/FromIndex$/,""),pt=J!==Ne,Ct=rt.includes(Ne);if(!(Ne in(pt?IDBIndex:IDBObjectStore).prototype)||!Ct&&!Oe.includes(Ne))return;const Gt=function(){var mt=(0,d.Z)(function*(sn,...tn){const hr=this.transaction(sn,Ct?"readwrite":"readonly");let Zn=hr.store;return pt&&(Zn=Zn.index(tn.shift())),(yield Promise.all([Zn[Ne](...tn),Ct&&hr.done]))[0]});return function(tn){return mt.apply(this,arguments)}}();return ne.set(J,Gt),Gt}!function Me(ue){he=ue(he)}(ue=>({...ue,get:(J,Ne,pt)=>Tt(J,Ne)||ue.get(J,Ne,pt),has:(J,Ne)=>!!Tt(J,Ne)||ue.has(J,Ne)}));class et{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function Zt(ue){return"VERSION"===ue.getComponent()?.type}(Ne)){const pt=Ne.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Ne=>Ne).join(" ")}}const lt="@firebase/app",fe=new O.Yd("@firebase/app"),jr="[DEFAULT]",Ji={[lt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rn=new Map,an=new Map;function it(ue,J){try{ue.container.addComponent(J)}catch(Ne){fe.debug(`Component ${J.name} failed to register with FirebaseApp ${ue.name}`,Ne)}}function Pt(ue,J){ue.container.addOrOverwriteComponent(J)}function mi(ue){const J=ue.name;if(an.has(J))return fe.debug(`There were multiple attempts to register component ${J}.`),!1;an.set(J,ue);for(const Ne of rn.values())it(Ne,ue);return!0}function ti(ue,J){const Ne=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),ue.container.getProvider(J)}function dr(ue,J,Ne=jr){ti(ue,J).clearInstance(Ne)}function Hr(){an.clear()}const ni=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pn{constructor(J,Ne,pt){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}const Bs="9.21.0";function Qt(ue,J={}){let Ne=ue;"object"!=typeof J&&(J={name:J});const pt=Object.assign({name:jr,automaticDataCollectionEnabled:!1},J),Ct=pt.name;if("string"!=typeof Ct||!Ct)throw ni.create("bad-app-name",{appName:String(Ct)});if(Ne||(Ne=(0,se.aH)()),!Ne)throw ni.create("no-options");const Gt=rn.get(Ct);if(Gt){if((0,se.vZ)(Ne,Gt.options)&&(0,se.vZ)(pt,Gt.config))return Gt;throw ni.create("duplicate-app",{appName:Ct})}const mt=new Q.H0(Ct);for(const tn of an.values())mt.addComponent(tn);const sn=new pn(Ne,pt,mt);return rn.set(Ct,sn),sn}function es(ue=jr){const J=rn.get(ue);if(!J&&ue===jr)return Qt();if(!J)throw ni.create("no-app",{appName:ue});return J}function un(){return Array.from(rn.values())}function yi(ue){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(ue){const J=ue.name;rn.has(J)&&(rn.delete(J),yield Promise.all(ue.container.getProviders().map(Ne=>Ne.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function Wn(ue,J,Ne){var pt;let Ct=null!==(pt=Ji[ue])&&void 0!==pt?pt:ue;Ne&&(Ct+=`-${Ne}`);const Gt=Ct.match(/\s|\//),mt=J.match(/\s|\//);if(Gt||mt){const sn=[`Unable to register library "${Ct}" with version "${J}":`];return Gt&&sn.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Gt&&mt&&sn.push("and"),mt&&sn.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void fe.warn(sn.join(" "))}mi(new Q.wA(`${Ct}-version`,()=>({library:Ct,version:J}),"VERSION"))}function Li(ue,J){if(null!==ue&&"function"!=typeof ue)throw ni.create("invalid-log-argument");(0,O.Am)(ue,J)}function In(ue){(0,O.Ub)(ue)}const Vi="firebase-heartbeat-database",Gr=1,B="firebase-heartbeat-store";let L=null;function z(){return L||(L=function we(ue,J,{blocked:Ne,upgrade:pt,blocking:Ct,terminated:Gt}={}){const mt=indexedDB.open(ue,J),sn=Pe(mt);return pt&&mt.addEventListener("upgradeneeded",tn=>{pt(Pe(mt.result),tn.oldVersion,tn.newVersion,Pe(mt.transaction),tn)}),Ne&&mt.addEventListener("blocked",tn=>Ne(tn.oldVersion,tn.newVersion,tn)),sn.then(tn=>{Gt&&tn.addEventListener("close",()=>Gt()),Ct&&tn.addEventListener("versionchange",hr=>Ct(hr.oldVersion,hr.newVersion,hr))}).catch(()=>{}),sn}(Vi,Gr,{upgrade:(ue,J)=>{0===J&&ue.createObjectStore(B)}}).catch(ue=>{throw ni.create("idb-open",{originalErrorMessage:ue.message})})),L}function X(){return(X=(0,d.Z)(function*(ue){try{return(yield z()).transaction(B).objectStore(B).get(en(ue))}catch(J){if(J instanceof se.ZR)fe.warn(J.message);else{const Ne=ni.create("idb-get",{originalErrorMessage:J?.message});fe.warn(Ne.message)}}})).apply(this,arguments)}function ke(ue,J){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(ue,J){try{const pt=(yield z()).transaction(B,"readwrite");return yield pt.objectStore(B).put(J,en(ue)),pt.done}catch(Ne){if(Ne instanceof se.ZR)fe.warn(Ne.message);else{const pt=ni.create("idb-set",{originalErrorMessage:Ne?.message});fe.warn(pt.message)}}})).apply(this,arguments)}function en(ue){return`${ue.name}!${ue.options.appId}`}class dn{constructor(J){this.container=J,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new Ui(Ne),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var J=this;return(0,d.Z)(function*(){const pt=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=Kt();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!J._heartbeatsCache.heartbeats.some(Gt=>Gt.date===Ct))return J._heartbeatsCache.heartbeats.push({date:Ct,agent:pt}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(Gt=>{const mt=new Date(Gt.date).valueOf();return Date.now()-mt<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,d.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Ne=Kt(),{heartbeatsToSend:pt,unsentEntries:Ct}=function Pr(ue,J=1024){const Ne=[];let pt=ue.slice();for(const Ct of ue){const Gt=Ne.find(mt=>mt.agent===Ct.agent);if(Gt){if(Gt.dates.push(Ct.date),ts(Ne)>J){Gt.dates.pop();break}}else if(Ne.push({agent:Ct.agent,dates:[Ct.date]}),ts(Ne)>J){Ne.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:pt}}(J._heartbeatsCache.heartbeats),Gt=(0,se.L)(JSON.stringify({version:2,heartbeats:pt}));return J._heartbeatsCache.lastSentHeartbeatDate=Ne,Ct.length>0?(J._heartbeatsCache.heartbeats=Ct,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Gt})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class Ui{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,d.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function ye(ue){return X.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Ne=this;return(0,d.Z)(function*(){var pt;if(yield Ne._canUseIndexedDBPromise){const Gt=yield Ne.read();return ke(Ne.app,{lastSentHeartbeatDate:null!==(pt=J.lastSentHeartbeatDate)&&void 0!==pt?pt:Gt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Ne=this;return(0,d.Z)(function*(){var pt;if(yield Ne._canUseIndexedDBPromise){const Gt=yield Ne.read();return ke(Ne.app,{lastSentHeartbeatDate:null!==(pt=J.lastSentHeartbeatDate)&&void 0!==pt?pt:Gt.lastSentHeartbeatDate,heartbeats:[...Gt.heartbeats,...J.heartbeats]})}})()}}function ts(ue){return(0,se.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function Oa(ue){mi(new Q.wA("platform-logger",J=>new et(J),"PRIVATE")),mi(new Q.wA("heartbeat",J=>new dn(J),"PRIVATE")),Wn(lt,"0.9.9",ue),Wn(lt,"0.9.9","esm2017"),Wn("fire-js","")}("")},4859:(It,be,k)=>{k.d(be,{H0:()=>_e,wA:()=>O});var d=k(5861),Q=k(2090);class O{constructor(j,$,W){this.name=j,this.instanceFactory=$,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const se="[DEFAULT]";class re{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const W=new Q.BH;if(this.instancesDeferred.set($,W),this.isInitialized($)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:$});je&&W.resolve(je)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const W=this.normalizeInstanceIdentifier(j?.identifier),je=null!==($=j?.optional)&&void 0!==$&&$;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Ce){if(je)return null;throw Ce}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ge(ce){return"EAGER"===ce.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[$,W]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier($);try{const Ce=this.getOrInitializeService({instanceIdentifier:je});W.resolve(Ce)}catch{}}}}clearInstance(j=se){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,d.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...$.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=se){return this.instances.has(j)}getOptions(j=se){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,W=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:W,options:$});for(const[Ce,We]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Ce)&&We.resolve(je);return je}onInit(j,$){var W;const je=this.normalizeInstanceIdentifier($),Ce=null!==(W=this.onInitCallbacks.get(je))&&void 0!==W?W:new Set;Ce.add(j),this.onInitCallbacks.set(je,Ce);const We=this.instances.get(je);return We&&j(We,je),()=>{Ce.delete(j)}}invokeOnInitCallbacks(j,$){const W=this.onInitCallbacks.get($);if(W)for(const je of W)try{je(j,$)}catch{}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let W=this.instances.get(j);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=j,ce===se?void 0:ce),options:$}),this.instances.set(j,W),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(W,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,W)}catch{}var ce;return W||null}normalizeInstanceIdentifier(j=se){return this.component?this.component.multipleInstances?j:se:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new re(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(It,be,k)=>{k.d(be,{Am:()=>ce,Ub:()=>_e,Yd:()=>ge,in:()=>Q});const d=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},se=Q.INFO,re={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ie=(j,$,...W)=>{if($<j.logLevel)return;const je=(new Date).toISOString(),Ce=re[$];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ce](`[${je}]  ${j.name}:`,...W)};class ge{constructor($){this.name=$,this._logLevel=se,this._logHandler=ie,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Q))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...$),this._logHandler(this,Q.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...$),this._logHandler(this,Q.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...$),this._logHandler(this,Q.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...$),this._logHandler(this,Q.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...$),this._logHandler(this,Q.ERROR,...$)}}function _e(j){d.forEach($=>{$.setLogLevel(j)})}function ce(j,$){for(const W of d){let je=null;$&&$.level&&(je=O[$.level]),W.userLogHandler=null===j?null:(Ce,We,...ht)=>{const he=ht.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");We>=(je??Ce.logLevel)&&j({level:Q[We].toLowerCase(),message:he,args:ht,type:Ce.name})}}}},259:(It,be,k)=>{k.d(be,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=k(6881);(0,d.registerVersion)("firebase","9.21.0","app")},9260:(It,be,k)=>{k.d(be,{Z:()=>d.Z});var d=k(3942);d.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(It,be,k)=>{k.r(be);var d=k(5861),Q=k(3942),O=k(2090),se=k(6881),re=k(655),ie=k(1877),ge=k(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W_EMAIL_SIGNIN="EMAIL_SIGNIN",W_PASSWORD_RESET="PASSWORD_RESET",W_RECOVER_EMAIL="RECOVER_EMAIL",W_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",W_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",W_VERIFY_EMAIL="VERIFY_EMAIL";const We=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ht=function Ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Re=new ie.Yd("@firebase/auth");function Pe(y,...f){Re.logLevel<=ie.in.ERROR&&Re.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function ve(y,...f){throw rt(y,...f)}function we(y,...f){return rt(y,...f)}function He(y,f,p){const v=Object.assign(Object.assign({},ht()),{[f]:p});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function Oe(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&ve(y,"argument-error"),He(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rt(y,...f){if("string"!=typeof y){const p=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...f)}function ne(y,f,...p){if(!y)throw rt(f,...p)}function Tt(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Pe(f),new Error(f)}function et(y,f){y||Tt(f)}function Zt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===de()||"https:"===de()}function de(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Te{constructor(f,p){this.shortDelay=f,this.longDelay=p,et(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function fe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ge(y,f){et(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class Ue{static initialize(f,p,v){this.fetchImpl=f,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ct=new Te(3e4,6e4);function Ot(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Qe(y,f,p,v){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(y,f,p,v,S={}){return bt(y,S,(0,d.Z)(function*(){let M={},U={};v&&("GET"===f?U=v:M={body:JSON.stringify(v)});const K=(0,O.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Ae=yield y._getAdditionalHeaders();return Ae["Content-Type"]="application/json",y.languageCode&&(Ae["X-Firebase-Locale"]=y.languageCode),Ue.fetch()(xr(y,y.config.apiHost,p,K),Object.assign({method:f,headers:Ae,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function bt(y,f,p){return on.apply(this,arguments)}function on(){return(on=(0,d.Z)(function*(y,f,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},ft),f);try{const S=new $r(y),M=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const U=yield M.json();if("needConfirmation"in U)throw Mr(y,"account-exists-with-different-credential",U);if(M.ok&&!("errorMessage"in U))return U;{const K=M.ok?U.errorMessage:U.error.message,[Ae,$e]=K.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ae)throw Mr(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Ae)throw Mr(y,"email-already-in-use",U);if("USER_DISABLED"===Ae)throw Mr(y,"user-disabled",U);const Je=v[Ae]||Ae.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw He(y,Je,$e);ve(y,Je)}}catch(S){if(S instanceof O.ZR)throw S;ve(y,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function _n(y,f,p,v){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,d.Z)(function*(y,f,p,v,S={}){const M=yield Qe(y,f,p,v,S);return"mfaPendingCredential"in M&&ve(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function xr(y,f,p,v){const S=`${f}${p}?${v}`;return y.config.emulator?Ge(y.config,S):`${y.config.apiScheme}://${S}`}class $r{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(we(this.auth,"network-request-failed")),ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mr(y,f,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const S=we(y,f,v);return S.customData._tokenResponse=p,S}function gi(){return(gi=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function gt(){return(gt=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ei(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function jr(){return(jr=(0,d.Z)(function*(y,f=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(f),S=rn(v);ne(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,U=M?.sign_in_provider;return{claims:S,token:v,authTime:ei(Ji(S.auth_time)),issuedAtTime:ei(Ji(S.iat)),expirationTime:ei(Ji(S.exp)),signInProvider:U||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function Ji(y){return 1e3*Number(y)}function rn(y){const[f,p,v]=y.split(".");if(void 0===f||void 0===p||void 0===v)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(p);return S?JSON.parse(S):(Pe("Failed to decode base64 JWT payload"),null)}catch(S){return Pe("Caught error parsing JWT payload as JSON",S?.toString()),null}}function it(y,f){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&function mi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}class ti{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield p.iteration()}),v)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class dr{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hr(y){return Mn.apply(this,arguments)}function Mn(){return Mn=(0,d.Z)(function*(y){var f;const p=y.auth,v=yield y.getIdToken(),S=yield it(y,function Rr(y,f){return gt.apply(this,arguments)}(p,{idToken:v}));ne(S?.users.length,p,"internal-error");const M=S.users[0];y._notifyReloadListener(M);const U=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?function Qt(y){return y.map(f=>{var{providerId:p}=f,v=(0,re._T)(f,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}(M.providerUserInfo):[],K=function Bs(y,f){return[...y.filter(v=>!f.some(S=>S.providerId===v.providerId)),...f]}(y.providerData,U),Je=!!y.isAnonymous&&!(y.email&&M.passwordHash||K?.length),nt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:K,metadata:new dr(M.createdAt,M.lastLoginAt),isAnonymous:Je};Object.assign(y,nt)}),Mn.apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(y){const f=(0,O.m9)(y);yield Hr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function un(){return(un=(0,d.Z)(function*(y,f){const p=yield bt(y,{},(0,d.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:M}=y.config,U=xr(y,S,"/v1/token",`key=${M}`),K=yield y._getAdditionalHeaders();return K["Content-Type"]="application/x-www-form-urlencoded",Ue.fetch()(U,{method:"POST",headers:K,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(typeof f.idToken<"u","internal-error"),ne(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function an(y){const f=rn(y);return ne(f,"internal-error"),ne(typeof f.exp<"u","internal-error"),ne(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var v=this;return(0,d.Z)(function*(){return ne(!v.accessToken||v.refreshToken,f,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var v=this;return(0,d.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:U}=yield function es(y,f){return un.apply(this,arguments)}(f,p);v.updateTokensAndExpiration(S,M,Number(U))})()}updateTokensAndExpiration(f,p,v){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,p){const{refreshToken:v,accessToken:S,expirationTime:M}=p,U=new yi;return v&&(ne("string"==typeof v,"internal-error",{appName:f}),U.refreshToken=v),S&&(ne("string"==typeof S,"internal-error",{appName:f}),U.accessToken=S),M&&(ne("number"==typeof M,"internal-error",{appName:f}),U.expirationTime=M),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new yi,this.toJSON())}_performRefresh(){return Tt("not implemented")}}function On(y,f){ne("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Wn{constructor(f){var{uid:p,auth:v,stsTokenManager:S}=f,M=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ti(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new dr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,d.Z)(function*(){const v=yield it(p,p.stsTokenManager.getToken(p.auth,f));return ne(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(f){return function Er(y){return jr.apply(this,arguments)}(this,f)}reload(){return function ni(y){return pn.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Wn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var v=this;return(0,d.Z)(function*(){let S=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),S=!0),p&&(yield Hr(v)),yield v.auth._persistUserIfCurrent(v),S&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,d.Z)(function*(){const p=yield f.getIdToken();return yield it(f,function Us(y,f){return gi.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var v,S,M,U,K,Ae,$e,Je;const nt=null!==(v=p.displayName)&&void 0!==v?v:void 0,Sn=null!==(S=p.email)&&void 0!==S?S:void 0,no=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,Kc=null!==(U=p.photoURL)&&void 0!==U?U:void 0,S_=null!==(K=p.tenantId)&&void 0!==K?K:void 0,Pn=null!==(Ae=p._redirectEventId)&&void 0!==Ae?Ae:void 0,fm=null!==($e=p.createdAt)&&void 0!==$e?$e:void 0,pm=null!==(Je=p.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:Yc,emailVerified:Qc,isAnonymous:Ki,providerData:Ih,stsTokenManager:Tl}=p;ne(Yc&&Tl,f,"internal-error");const A_=yi.fromJSON(this.name,Tl);ne("string"==typeof Yc,f,"internal-error"),On(nt,f.name),On(Sn,f.name),ne("boolean"==typeof Qc,f,"internal-error"),ne("boolean"==typeof Ki,f,"internal-error"),On(no,f.name),On(Kc,f.name),On(S_,f.name),On(Pn,f.name),On(fm,f.name),On(pm,f.name);const Dh=new Wn({uid:Yc,auth:f,email:Sn,emailVerified:Qc,displayName:nt,isAnonymous:Ki,photoURL:Kc,phoneNumber:no,tenantId:S_,stsTokenManager:A_,createdAt:fm,lastLoginAt:pm});return Ih&&Array.isArray(Ih)&&(Dh.providerData=Ih.map(x_=>Object.assign({},x_))),Pn&&(Dh._redirectEventId=Pn),Dh}static _fromIdTokenResponse(f,p,v=!1){return(0,d.Z)(function*(){const S=new yi;S.updateFromServerResponse(p);const M=new Wn({uid:p.localId,auth:f,stsTokenManager:S,isAnonymous:v});return yield Hr(M),M})()}}const Li=new Map;function In(y){et(y instanceof Function,"Expected a class definition");let f=Li.get(y);return f?(et(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Li.set(y,f),f)}const Gr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(p,v){var S=this;return(0,d.Z)(function*(){S.storage[p]=v})()}_get(p){var v=this;return(0,d.Z)(function*(){const S=v.storage[p];return void 0===S?null:S})()}_remove(p){var v=this;return(0,d.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function B(y,f,p){return`firebase:${y}:${f}:${p}`}class L{constructor(f,p,v){this.persistence=f,this.auth=p,this.userKey=v;const{config:S,name:M}=this.auth;this.fullUserKey=B(this.userKey,S.apiKey,M),this.fullPersistenceKey=B("persistence",S.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Wn._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,d.Z)(function*(){if(p.persistence===f)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,v="authUser"){return(0,d.Z)(function*(){if(!p.length)return new L(In(Gr),f,v);const S=(yield Promise.all(p.map(function(){var $e=(0,d.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return $e.apply(this,arguments)}}()))).filter($e=>$e);let M=S[0]||In(Gr);const U=B(v,f.config.apiKey,f.name);let K=null;for(const $e of p)try{const Je=yield $e._get(U);if(Je){const nt=Wn._fromJSON(f,Je);$e!==M&&(K=nt),M=$e;break}}catch{}const Ae=S.filter($e=>$e._shouldAllowMigration);return M._shouldAllowMigration&&Ae.length?(M=Ae[0],K&&(yield M._set(U,K.toJSON())),yield Promise.all(p.map(function(){var $e=(0,d.Z)(function*(Je){if(Je!==M)try{yield Je._remove(U)}catch{}});return function(Je){return $e.apply(this,arguments)}}())),new L(M,f,v)):new L(M,f,v)})()}}function z(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(St(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ye(f))return"Firefox";if(f.includes("silk/"))return"Silk";if($n(f))return"Blackberry";if(bn(f))return"Webos";if(X(f))return"Safari";if((f.includes("chrome/")||ke(f))&&!f.includes("edge/"))return"Chrome";if(en(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function ye(y=(0,O.z$)()){return/firefox\//i.test(y)}function X(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ke(y=(0,O.z$)()){return/crios\//i.test(y)}function St(y=(0,O.z$)()){return/iemobile/i.test(y)}function en(y=(0,O.z$)()){return/android/i.test(y)}function $n(y=(0,O.z$)()){return/blackberry/i.test(y)}function bn(y=(0,O.z$)()){return/webos/i.test(y)}function dn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function ts(y=(0,O.z$)()){return dn(y)||en(y)||bn(y)||$n(y)||/windows phone/i.test(y)||St(y)}function ue(y,f=[]){let p;switch(y){case"Browser":p=z((0,O.z$)());break;case"Worker":p=`${z((0,O.z$)())}-${y}`;break;default:p=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${se.SDK_VERSION}/${v}`}function Ne(){return(Ne=(0,d.Z)(function*(y){return(yield Qe(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function pt(y,f){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,d.Z)(function*(y,f){return Qe(y,"GET","/v2/recaptchaConfig",Ot(y,f))})).apply(this,arguments)}function Gt(y){return void 0!==y&&void 0!==y.getResponse}function mt(y){return void 0!==y&&void 0!==y.enterprise}class sn{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function hr(y){return new Promise((f,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=S=>{const M=we("internal-error");M.customData=S,p(M)},v.type="text/javascript",v.charset="UTF-8",function tn(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function Zn(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Yo="NO_RECAPTCHA";class _i{constructor(f){this.type="recaptcha-enterprise",this.auth=fn(f)}verify(f="verify",p=!1){var v=this;return(0,d.Z)(function*(){function M(){return M=(0,d.Z)(function*(K){if(!p){if(null==K.tenantId&&null!=K._agentRecaptchaConfig)return K._agentRecaptchaConfig.siteKey;if(null!=K.tenantId&&void 0!==K._tenantRecaptchaConfigs[K.tenantId])return K._tenantRecaptchaConfigs[K.tenantId].siteKey}return new Promise(function(){var Ae=(0,d.Z)(function*($e,Je){pt(K,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nt=>{if(void 0!==nt.recaptchaKey){const Sn=new sn(nt);return null==K.tenantId?K._agentRecaptchaConfig=Sn:K._tenantRecaptchaConfigs[K.tenantId]=Sn,$e(Sn.siteKey)}Je(new Error("recaptcha Enterprise site key undefined"))}).catch(nt=>{Je(nt)})});return function($e,Je){return Ae.apply(this,arguments)}}())}),M.apply(this,arguments)}function U(K,Ae,$e){const Je=window.grecaptcha;mt(Je)?Je.enterprise.ready(()=>{Je.enterprise.execute(K,{action:f}).then(nt=>{Ae(nt)}).catch(()=>{Ae(Yo)})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((K,Ae)=>{(function S(K){return M.apply(this,arguments)})(v.auth).then($e=>{if(!p&&mt(window.grecaptcha))U($e,K,Ae);else{if(typeof window>"u")return void Ae(new Error("RecaptchaVerifier is only supported in browser"));hr("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{U($e,K,Ae)}).catch(Je=>{Ae(Je)})}}).catch($e=>{Ae($e)})})})()}}function qe(y,f,p){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*(y,f,p,v=!1){const S=new _i(y);let M;try{M=yield S.verify(p)}catch{M=yield S.verify(p,!0)}const U=Object.assign({},f);return Object.assign(U,v?{captchaResp:M}:{captchaResponse:M}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class Dn{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const v=M=>new Promise((U,K)=>{try{U(f(M))}catch(Ae){K(Ae)}});v.onAbort=p,this.queue.push(v);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,d.Z)(function*(){if(p.auth.currentUser===f)return;const v=[];try{for(const S of p.queue)yield S(f),S.onAbort&&v.push(S.onAbort)}catch(S){v.reverse();for(const M of v)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class vi{constructor(f,p,v,S){this.app=f,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=v,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kn(this),this.idTokenSubscription=new Kn(this),this.beforeStateQueue=new Dn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(f,p){var v=this;return p&&(this._popupRedirectResolver=In(p)),this._initializationPromise=this.queue((0,d.Z)(function*(){var S,M;if(!v._deleted&&(v.persistenceManager=yield L.create(v,f),!v._deleted)){if(null!==(S=v._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(M=v.currentUser)||void 0===M?void 0:M.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,d.Z)(function*(){var v;const S=yield p.assertedPersistence.getCurrentUser();let M=S,U=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const K=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Ae=M?._redirectEventId,$e=yield p.tryRedirectSignIn(f);(!K||K===Ae)&&$e?.user&&(M=$e.user,U=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(U)try{yield p.beforeStateQueue.runMiddleware(M)}catch(K){M=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(K))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var p=this;return(0,d.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,d.Z)(function*(){try{yield Hr(f)}catch(v){if("auth/network-request-failed"!==v?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function De(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,d.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&ne(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(f,p=!1){var v=this;return(0,d.Z)(function*(){if(!v._deleted)return f&&ne(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,d.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,d.Z)(function*(){yield p.assertedPersistence.setPersistence(In(f))}))}initializeRecaptchaConfig(){var f=this;return(0,d.Z)(function*(){const p=yield pt(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),v=new sn(p);null==f.tenantId?f._agentRecaptchaConfig=v:f._tenantRecaptchaConfigs[f.tenantId]=v,v.emailPasswordEnabled&&new _i(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,p,v){return this.registerStateListener(this.authStateSubscription,f,p,v)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,v){return this.registerStateListener(this.idTokenSubscription,f,p,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var v=this;return(0,d.Z)(function*(){const S=yield v.getOrInitRedirectPersistenceManager(p);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,d.Z)(function*(){if(!p.redirectPersistenceManager){const v=f&&In(f)||p._popupRedirectResolver;ne(v,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[In(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,d.Z)(function*(){var v,S;return p._isInitialized&&(yield p.queue((0,d.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===f?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,d.Z)(function*(){if(f===p.currentUser)return p.queue((0,d.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,v,S){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),U=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(U,this,"internal-error"),U.then(()=>M(this.currentUser)),"function"==typeof p?f.addObserver(p,v,S):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,d.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var p;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();S&&(v["X-Firebase-Client"]=S);const M=yield f._getAppCheckToken();return M&&(v["X-Firebase-AppCheck"]=M),v})()}_getAppCheckToken(){var f=this;return(0,d.Z)(function*(){var p;const v=yield null===(p=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return v?.error&&function Ve(y,...f){Re.logLevel<=ie.in.WARN&&Re.warn(`Auth (${se.SDK_VERSION}): ${y}`,...f)}(`Error while retrieving App Check token: ${v.error}`),v?.token})()}}function fn(y){return(0,O.m9)(y)}class Kn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Fa(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ds{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return Tt("not implemented")}_getIdTokenResponse(f){return Tt("not implemented")}_linkToIdToken(f,p){return Tt("not implemented")}_getReauthenticationResolver(f){return Tt("not implemented")}}function fo(y,f){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:resetPassword",Ot(y,f))})).apply(this,arguments)}function Qo(y,f){return hs.apply(this,arguments)}function hs(){return(hs=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xo(){return(Xo=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",Ot(y,f))})).apply(this,arguments)}function Ir(y,f){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(y,f){return _n(y,"POST","/v1/accounts:signInWithPassword",Ot(y,f))})).apply(this,arguments)}function ri(y,f){return La.apply(this,arguments)}function La(){return(La=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:sendOobCode",Ot(y,f))})).apply(this,arguments)}function Jo(){return(Jo=(0,d.Z)(function*(y,f){return ri(y,f)})).apply(this,arguments)}function js(y,f){return po.apply(this,arguments)}function po(){return(po=(0,d.Z)(function*(y,f){return ri(y,f)})).apply(this,arguments)}function fr(y,f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,d.Z)(function*(y,f){return ri(y,f)})).apply(this,arguments)}function si(){return(si=(0,d.Z)(function*(y,f){return ri(y,f)})).apply(this,arguments)}function ea(){return(ea=(0,d.Z)(function*(y,f){return _n(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,f))})).apply(this,arguments)}function wi(){return(wi=(0,d.Z)(function*(y,f){return _n(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,f))})).apply(this,arguments)}class ku extends ds{constructor(f,p,v,S=null){super("password",v),this._email=f,this._password=p,this._tenantId=S}static _fromEmailAndPassword(f,p){return new ku(f,p,"password")}static _fromEmailAndCode(f,p,v=null){return new ku(f,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,d.Z)(function*(){var v;switch(p.signInMethod){case"password":const S={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=f._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const M=yield qe(f,S,"signInWithPassword");return Ir(f,M)}return Ir(f,S).catch(function(){var M=(0,d.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const K=yield qe(f,S,"signInWithPassword");return Ir(f,K)}return Promise.reject(U)});return function(U){return M.apply(this,arguments)}}());case"emailLink":return function Va(y,f){return ea.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:ve(f,"internal-error")}})()}_linkToIdToken(f,p){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return Qo(f,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function lc(y,f){return wi.apply(this,arguments)}(f,{idToken:p,email:v._email,oobCode:v._password});default:ve(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function $i(y,f){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,d.Z)(function*(y,f){return _n(y,"POST","/v1/accounts:signInWithIdp",Ot(y,f))})).apply(this,arguments)}class fs extends ds{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new fs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):ve("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:S}=p,M=(0,re._T)(p,["providerId","signInMethod"]);if(!v||!S)return null;const U=new fs(v,S);return U.idToken=M.idToken||void 0,U.accessToken=M.accessToken||void 0,U.secret=M.secret,U.nonce=M.nonce,U.pendingToken=M.pendingToken||null,U}_getIdTokenResponse(f){return $i(f,this.buildRequest())}_linkToIdToken(f,p){const v=this.buildRequest();return v.idToken=p,$i(f,v)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,$i(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,O.xO)(p)}return f}}function cc(){return(cc=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:sendVerificationCode",Ot(y,f))})).apply(this,arguments)}function Vd(){return(Vd=(0,d.Z)(function*(y,f){return _n(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,f))})).apply(this,arguments)}function Fu(){return(Fu=(0,d.Z)(function*(y,f){const p=yield _n(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,f));if(p.temporaryProof)throw Mr(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ud={USER_NOT_FOUND:"user-not-found"};function Lu(){return(Lu=(0,d.Z)(function*(y,f){return _n(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ud)})).apply(this,arguments)}class Ei extends ds{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new Ei({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new Ei({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Zg(y,f){return Vd.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Kg(y,f){return Fu.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function c_(y,f){return Lu.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:v,verificationCode:S}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:v,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:v,phoneNumber:S,temporaryProof:M}=f;return v||p||S||M?new Ei({verificationId:p,verificationCode:v,phoneNumber:S,temporaryProof:M}):null}}class ta{constructor(f){var p,v,S,M,U,K;const Ae=(0,O.zd)((0,O.pd)(f)),$e=null!==(p=Ae.apiKey)&&void 0!==p?p:null,Je=null!==(v=Ae.oobCode)&&void 0!==v?v:null,nt=function Lf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ae.mode)&&void 0!==S?S:null);ne($e&&Je&&nt,"argument-error"),this.apiKey=$e,this.operation=nt,this.code=Je,this.continueUrl=null!==(M=Ae.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(U=Ae.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(K=Ae.tenantId)&&void 0!==K?K:null}static parseLink(f){const p=function Bd(y){const f=(0,O.zd)((0,O.pd)(y)).link,p=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||f||y}(f);try{return new ta(p)}catch{return null}}}let Vf=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return ku._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const S=ta.parseLink(v);return ne(S,"argument-error"),ku._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ps{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class rs extends ps{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class go extends rs{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return ne("providerId"in p&&"signInMethod"in p,"argument-error"),fs._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return go.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return go.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:S,pendingToken:M,nonce:U,providerId:K}=f;if(!v&&!S&&!p&&!M||!K)return null;try{return new go(K)._credential({idToken:p,accessToken:v,nonce:U,pendingToken:M})}catch{return null}}}let dc=(()=>{class y extends rs{constructor(){super("facebook.com")}static credential(p){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ua=(()=>{class y extends rs{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:S}=p;if(!v&&!S)return null;try{return y.credential(v,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),$d=(()=>{class y extends rs{constructor(){super("github.com")}static credential(p){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Hs extends ds{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return $i(f,this.buildRequest())}_linkToIdToken(f,p){const v=this.buildRequest();return v.idToken=p,$i(f,v)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,$i(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:S,pendingToken:M}=p;return v&&S&&M&&v===S?new Hs(v,M):null}static _create(f,p){return new Hs(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vu extends ps{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Vu.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Vu.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Hs.fromJSON(f);return ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:v}=f;if(!p||!v)return null;try{return Hs._create(v,p)}catch{return null}}}let Uu=(()=>{class y extends rs{constructor(){super("twitter.com")}static credential(p,v){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:S}=p;if(!v||!S)return null;try{return y.credential(v,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Gs(y,f){return zr.apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(y,f){return _n(y,"POST","/v1/accounts:signUp",Ot(y,f))})).apply(this,arguments)}class Nr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,v,S=!1){return(0,d.Z)(function*(){const M=yield Wn._fromIdTokenResponse(f,v,S),U=Ba(v);return new Nr({user:M,providerId:U,_tokenResponse:v,operationType:p})})()}static _forOperation(f,p,v){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const S=Ba(v);return new Nr({user:f,providerId:S,_tokenResponse:v,operationType:p})})()}}function Ba(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function na(){return(na=(0,d.Z)(function*(y){var f;const p=fn(y);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new Nr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Gs(p,{returnSecureToken:!0}),S=yield Nr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class gs extends O.ZR{constructor(f,p,v,S){var M;super(p.code,p.message),this.operationType=v,this.user=S,Object.setPrototypeOf(this,gs.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,p,v,S){return new gs(f,p,v,S)}}function gr(y,f,p,v){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?gs._fromErrorAndOperation(y,M,f,v):M})}function jd(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Or(){return Or=(0,d.Z)(function*(y,f){const p=(0,O.m9)(y);yield ms(!0,p,f);const{providerUserInfo:v}=yield function Ko(y,f){return co.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),S=jd(v||[]);return p.providerData=p.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Or.apply(this,arguments)}function rr(y,f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,d.Z)(function*(y,f,p=!1){const v=yield it(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return Nr._forOperation(y,"link",v)})).apply(this,arguments)}function ms(y,f,p){return fc.apply(this,arguments)}function fc(){return(fc=(0,d.Z)(function*(y,f,p){yield Hr(f);const S=!1===y?"provider-already-linked":"no-such-provider";ne(jd(f.providerData).has(p)===y,f.auth,S)})).apply(this,arguments)}function zs(y,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,d.Z)(function*(y,f,p=!1){const{auth:v}=y,S="reauthenticate";try{const M=yield it(y,gr(v,S,f,y),p);ne(M.idToken,v,"internal-error");const U=rn(M.idToken);ne(U,v,"internal-error");const{sub:K}=U;return ne(y.uid===K,v,"user-mismatch"),Nr._forOperation(y,S,M)}catch(M){throw"auth/user-not-found"===M?.code&&ve(v,"user-mismatch"),M}})).apply(this,arguments)}function $a(y,f){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(y,f,p=!1){const v="signIn",S=yield gr(y,v,f),M=yield Nr._fromIdTokenResponse(y,v,S);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function ja(y,f){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,d.Z)(function*(y,f){return $a(fn(y),f)})).apply(this,arguments)}function zd(y,f){return $u.apply(this,arguments)}function $u(){return($u=(0,d.Z)(function*(y,f){const p=(0,O.m9)(y);return yield ms(!1,p,f.providerId),rr(p,f)})).apply(this,arguments)}function qd(y,f){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(y,f){return zs((0,O.m9)(y),f)})).apply(this,arguments)}function Wd(){return(Wd=(0,d.Z)(function*(y,f){return _n(y,"POST","/v1/accounts:signInWithCustomToken",Ot(y,f))})).apply(this,arguments)}function Vt(){return Vt=(0,d.Z)(function*(y,f){const p=fn(y),v=yield function Yg(y,f){return Wd.apply(this,arguments)}(p,{token:f,returnSecureToken:!0}),S=yield Nr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(S.user),S}),Vt.apply(this,arguments)}class Ha{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?Ga._fromServerResponse(f,p):"totpInfo"in p?ir._fromServerResponse(f,p):ve(f,"internal-error")}}class Ga extends Ha{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new Ga(p)}}class ir extends Ha{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new ir(p)}}function mo(y,f,p){var v;ne((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ne(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ne(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(ne(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function qr(){return qr=(0,d.Z)(function*(y,f,p){var v;const S=fn(y),M={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=S._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const U=yield qe(S,M,"getOobCode",!0);p&&mo(S,U,p),yield js(S,U)}else p&&mo(S,M,p),yield js(S,M).catch(function(){var U=(0,d.Z)(function*(K){if("auth/missing-recaptcha-token"!==K.code)return Promise.reject(K);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ae=yield qe(S,M,"getOobCode",!0);p&&mo(S,Ae,p),yield js(S,Ae)}});return function(K){return U.apply(this,arguments)}}())}),qr.apply(this,arguments)}function Gu(){return(Gu=(0,d.Z)(function*(y,f,p){yield fo((0,O.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function ys(){return ys=(0,d.Z)(function*(y,f){yield function ns(y,f){return Xo.apply(this,arguments)}((0,O.m9)(y),{oobCode:f})}),ys.apply(this,arguments)}function za(y,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(y,f){const p=(0,O.m9)(y),v=yield fo(p,{oobCode:f}),S=v.requestType;switch(ne(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(v.mfaInfo,p,"internal-error");default:ne(v.email,p,"internal-error")}let M=null;return v.mfaInfo&&(M=Ha._fromServerResponse(fn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(y,f){const{data:p}=yield za((0,O.m9)(y),f);return p.email})).apply(this,arguments)}function Di(){return Di=(0,d.Z)(function*(y,f,p){var v;const S=fn(y),M={returnSecureToken:!0,email:f,password:p,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(v=S._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const $e=yield qe(S,M,"signUpPassword");U=Gs(S,$e)}else U=Gs(S,M).catch(function(){var $e=(0,d.Z)(function*(Je){if("auth/missing-recaptcha-token"===Je.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const nt=yield qe(S,M,"signUpPassword");return Gs(S,nt)}return Promise.reject(Je)});return function(Je){return $e.apply(this,arguments)}}());const K=yield U.catch($e=>Promise.reject($e)),Ae=yield Nr._fromIdTokenResponse(S,"signIn",K);return yield S._updateCurrentUser(Ae.user),Ae}),Di.apply(this,arguments)}function zu(){return zu=(0,d.Z)(function*(y,f,p){var v;const S=fn(y),M={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function U(K,Ae){ne(Ae.handleCodeInApp,S,"argument-error"),Ae&&mo(S,K,Ae)}if(null!==(v=S._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const K=yield qe(S,M,"getOobCode",!0);U(K,p),yield fr(S,K)}else U(M,p),yield fr(S,M).catch(function(){var K=(0,d.Z)(function*(Ae){if("auth/missing-recaptcha-token"!==Ae.code)return Promise.reject(Ae);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield qe(S,M,"getOobCode",!0);U($e,p),yield fr(S,$e)}});return function(Ae){return K.apply(this,arguments)}}())}),zu.apply(this,arguments)}function ia(){return(ia=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y),S=Vf.credentialWithLink(f,p||Zt());return ne(S._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),ja(v,S)})).apply(this,arguments)}function qu(){return(qu=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:createAuthUri",Ot(y,f))})).apply(this,arguments)}function Wu(){return Wu=(0,d.Z)(function*(y,f){const v={identifier:f,continueUri:lt()?Zt():"http://localhost"},{signinMethods:S}=yield function pc(y,f){return qu.apply(this,arguments)}((0,O.m9)(y),v);return S||[]}),Wu.apply(this,arguments)}function Wa(){return Wa=(0,d.Z)(function*(y,f){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&mo(p.auth,S,f);const{email:M}=yield function uc(y,f){return Jo.apply(this,arguments)}(p.auth,S);M!==y.email&&(yield y.reload())}),Wa.apply(this,arguments)}function Za(){return Za=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&mo(v.auth,M,p);const{email:U}=yield function ii(y,f){return si.apply(this,arguments)}(v.auth,M);U!==y.email&&(yield y.reload())}),Za.apply(this,arguments)}function Ku(){return(Ku=(0,d.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Yu(){return Yu=(0,d.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const v=(0,O.m9)(y),M={idToken:yield v.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},U=yield it(v,function Qd(y,f){return Ku.apply(this,arguments)}(v.auth,M));v.displayName=U.displayName||null,v.photoURL=U.photoUrl||null;const K=v.providerData.find(({providerId:Ae})=>"password"===Ae);K&&(K.displayName=v.displayName,K.photoURL=v.photoURL),yield v._updateTokensIfNecessary(U)}),Yu.apply(this,arguments)}function Tn(y,f,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,d.Z)(function*(y,f,p){const{auth:v}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),p&&(M.password=p);const U=yield it(y,Qo(v,M));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class _o{constructor(f,p,v={}){this.isNewUser=f,this.providerId=p,this.profile=v}}class jf extends _o{constructor(f,p,v,S){super(f,p,v),this.username=S}}class Xd extends _o{constructor(f,p){super(f,"facebook.com",p)}}class Jg extends jf{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Qu extends _o{constructor(f,p){super(f,"google.com",p)}}class mc extends jf{constructor(f,p,v){super(f,"twitter.com",p,v)}}function yc(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function $f(y){var f,p;if(!y)return null;const{providerId:v}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const U=null===(p=null===(f=rn(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(U)return new _o(M,"anonymous"!==U&&"custom"!==U?U:null)}if(!v)return null;switch(v){case"facebook.com":return new Xd(M,S);case"github.com":return new Jg(M,S);case"google.com":return new Qu(M,S);case"twitter.com":return new mc(M,S,y.screenName||null);case"custom":case"anonymous":return new _o(M,null);default:return new _o(M,v,S)}}(p)}class vo{constructor(f,p,v){this.type=f,this.credential=p,this.auth=v}static _fromIdtoken(f,p){return new vo("enroll",f,p)}static _fromMfaPendingCredential(f){return new vo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,v;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return vo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(v=f.multiFactorSession)&&void 0!==v&&v.idToken)return vo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class wo{constructor(f,p,v){this.session=f,this.hints=p,this.signInResolver=v}static _fromError(f,p){const v=fn(f),S=p.customData._serverResponse,M=(S.mfaInfo||[]).map(K=>Ha._fromServerResponse(v,K));ne(S.mfaPendingCredential,v,"internal-error");const U=vo._fromMfaPendingCredential(S.mfaPendingCredential);return new wo(U,M,function(){var K=(0,d.Z)(function*(Ae){const $e=yield Ae._process(v,U);delete S.mfaInfo,delete S.mfaPendingCredential;const Je=Object.assign(Object.assign({},S),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(p.operationType){case"signIn":const nt=yield Nr._fromIdTokenResponse(v,p.operationType,Je);return yield v._updateCurrentUser(nt.user),nt;case"reauthenticate":return ne(p.user,v,"internal-error"),Nr._forOperation(p.user,p.operationType,Je);default:ve(v,"internal-error")}});return function(Ae){return K.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,d.Z)(function*(){return p.signInResolver(f)})()}}class Do{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Ha._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Do(f)}getSession(){var f=this;return(0,d.Z)(function*(){return vo._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var v=this;return(0,d.Z)(function*(){const S=f,M=yield v.getSession(),U=yield it(v.user,S._process(v.user.auth,M,p));return yield v.user._updateTokensIfNecessary(U),v.user.reload()})()}unenroll(f){var p=this;return(0,d.Z)(function*(){const v="string"==typeof f?f:f.uid,S=yield p.user.getIdToken();try{const M=yield it(p.user,function el(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(y,f))}(p.user.auth,{idToken:S,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:U})=>U!==v),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const qs=new WeakMap,Co="__sak";class tl{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Co,"1"),this.storage.removeItem(Co),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const bo=(()=>{class y extends tl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Qa(){const y=(0,O.z$)();return X(y)||dn(y)}()&&function Oa(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ts(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const S=this.storage.getItem(v),M=this.localCache[v];S!==M&&p(v,M,S)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((K,Ae,$e)=>{this.notifyListeners(K,$e)});const S=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const K=this.storage.getItem(S);if(p.newValue!==K)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!v)return}const M=()=>{const K=this.storage.getItem(S);!v&&this.localCache[S]===K||this.notifyListeners(S,K)},U=this.storage.getItem(S);!function Ui(){return(0,O.w1)()&&10===document.documentMode}()||U===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,v){this.localCache[p]=v;const S=this.listeners[p];if(S)for(const M of Array.from(S))M(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var S=()=>super._set,M=this;return(0,d.Z)(function*(){yield S().call(M,p,v),M.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,S=this;return(0,d.Z)(function*(){const M=yield v().call(S,p);return S.localCache[p]=JSON.stringify(M),M})()}_remove(p){var v=()=>super._remove,S=this;return(0,d.Z)(function*(){yield v().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),ws=(()=>{class y extends tl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let ua=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(M=>M.isListeningto(p));if(v)return v;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,d.Z)(function*(){const S=p,{eventId:M,eventType:U,data:K}=S.data,Ae=v.handlersMap[U];if(!Ae?.size)return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:U});const $e=Array.from(Ae).map(function(){var nt=(0,d.Z)(function*(Sn){return Sn(S.origin,K)});return function(Sn){return nt.apply(this,arguments)}}()),Je=yield function wc(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return f.apply(this,arguments)}}()))}($e);S.ports[0].postMessage({status:"done",eventId:M,eventType:U,response:Je})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function la(y="",f=10){let p="";for(let v=0;v<f;v++)p+=Math.floor(10*Math.random());return y+p}class nh{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,v=50){var S=this;return(0,d.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let U,K;return new Promise((Ae,$e)=>{const Je=la("",20);M.port1.start();const nt=setTimeout(()=>{$e(new Error("unsupported_event"))},v);K={messageChannel:M,onMessage(Sn){const no=Sn;if(no.data.eventId===Je)switch(no.data.status){case"ack":clearTimeout(nt),U=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Ae(no.data.response);break;default:clearTimeout(nt),clearTimeout(U),$e(new Error("invalid_response"))}}},S.handlers.add(K),M.port1.addEventListener("message",K.onMessage),S.target.postMessage({eventType:f,eventId:Je,data:p},[M.port2])}).finally(()=>{K&&S.removeMessageHandler(K)})})()}}function gn(){return window}function rl(){return typeof gn().WorkerGlobalScope<"u"&&"function"==typeof gn().importScripts}function il(){return(il=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const To="firebaseLocalStorageDb",Hn=1,Ic="firebaseLocalStorage",Xa="fbase_key";class Ja{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Es(y,f){return y.transaction([Ic],f?"readwrite":"readonly").objectStore(Ic)}function ol(){const y=indexedDB.open(To,Hn);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Ic,{keyPath:Xa})}catch(S){p(S)}}),y.addEventListener("success",(0,d.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Ic)?f(v):(v.close(),yield function zf(){const y=indexedDB.deleteDatabase(To);return new Ja(y).toPromise()}(),f(yield ol()))}))})}function So(y,f,p){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,d.Z)(function*(y,f,p){const v=Es(y,!0).put({[Xa]:f,value:p});return new Ja(v).toPromise()})).apply(this,arguments)}function ca(){return(ca=(0,d.Z)(function*(y,f){const p=Es(y,!1).get(f),v=yield new Ja(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ws(y,f){const p=Es(y,!0).delete(f);return new Ja(p).toPromise()}const Ao=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,d.Z)(function*(){return p.db||(p.db=yield ol()),p.db})()}_withRetries(p){var v=this;return(0,d.Z)(function*(){let S=0;for(;;)try{const M=yield v._openDb();return yield p(M)}catch(M){if(S++>3)throw M;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,d.Z)(function*(){return rl()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,d.Z)(function*(){p.receiver=ua._getInstance(function sr(){return rl()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,d.Z)(function*(S,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(S,M){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,d.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,d.Z)(function*(){var v,S;if(p.activeServiceWorker=yield function Ec(){return il.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new nh(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);M&&null!==(v=M[0])&&void 0!==v&&v.fulfilled&&null!==(S=M[0])&&void 0!==S&&S.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,d.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function sl(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const p=yield ol();return yield So(p,Co,"1"),yield Ws(p,Co),!0}catch{}return!1})()}_withPendingWrite(p){var v=this;return(0,d.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(M=>So(M,p,v)),S.localCache[p]=v,S.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,d.Z)(function*(){const S=yield v._withRetries(M=>function eu(y,f){return ca.apply(this,arguments)}(M,p));return v.localCache[p]=S,S})()}_remove(p){var v=this;return(0,d.Z)(function*(){return v._withPendingWrite((0,d.Z)(function*(){return yield v._withRetries(S=>Ws(S,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,d.Z)(function*(){const v=yield p._withRetries(U=>{const K=Es(U,!1).getAll();return new Ja(K).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:U,value:K}of v)M.add(U),JSON.stringify(p.localCache[U])!==JSON.stringify(K)&&(p.notifyListeners(U,K),S.push(U));for(const U of Object.keys(p.localCache))p.localCache[U]&&!M.has(U)&&(p.notifyListeners(U,null),S.push(U));return S})()}notifyListeners(p,v){this.localCache[p]=v;const S=this.listeners[p];if(S)for(const M of Array.from(S))M(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),nu=1e12;class Cc{constructor(f){this.auth=f,this.counter=nu,this._widgets=new Map}render(f,p){const v=this.counter;return this._widgets.set(v,new bc(f,this.auth.name,p||{})),this.counter++,v}reset(f){var p;const v=f||nu;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(f){var p;return(null===(p=this._widgets.get(f||nu))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,d.Z)(function*(){var v;return null===(v=p._widgets.get(f||nu))||void 0===v||v.execute(),""})()}}class bc{constructor(f,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;ne(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function f_(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zf=Zn("rcb"),p_=new Te(3e4,6e4);class g_{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=gn().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return ne(function Kf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)&&Gt(gn().grecaptcha)?Promise.resolve(gn().grecaptcha):new Promise((v,S)=>{const M=gn().setTimeout(()=>{S(we(f,"network-request-failed"))},p_.get());gn()[Zf]=()=>{gn().clearTimeout(M),delete gn()[Zf];const K=gn().grecaptcha;if(!K||!Gt(K))return void S(we(f,"internal-error"));const Ae=K.render;K.render=($e,Je)=>{const nt=Ae($e,Je);return this.counter++,nt},this.hostLanguage=p,v(K)},hr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Zf,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),S(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=gn().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class or{load(f){return(0,d.Z)(function*(){return new Cc(f)})()}clearedOneInstance(){}}const ru="recaptcha",al={theme:"light",type:"image"};class Tc{constructor(f,p=Object.assign({},al),v){this.parameters=p,this.type=ru,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(v),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;ne(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new or:new g_,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(p)||new Promise(M=>{const U=K=>{K&&(f.tokenChangeListeners.delete(U),M(K))};f.tokenChangeListeners.add(U),f.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof f)f(p);else if("string"==typeof f){const v=gn()[f];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){ne(lt()&&!rl(),f.auth,"internal-error"),yield function Hi(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function J(y){return Ne.apply(this,arguments)}(f.auth);ne(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ss{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=Ei._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function Ro(){return(Ro=(0,d.Z)(function*(y,f,p){const v=fn(y),S=yield cl(v,f,(0,O.m9)(p));return new ss(S,M=>ja(v,M))})).apply(this,arguments)}function ll(){return(ll=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);yield ms(!1,v,"phone");const S=yield cl(v.auth,f,(0,O.m9)(p));return new ss(S,M=>zd(v,M))})).apply(this,arguments)}function Sc(){return(Sc=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y),S=yield cl(v.auth,f,(0,O.m9)(p));return new ss(S,M=>qd(v,M))})).apply(this,arguments)}function cl(y,f,p){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,d.Z)(function*(y,f,p){var v;const S=yield p.verify();try{let M;if(ne("string"==typeof S,y,"argument-error"),ne(p.type===ru,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const U=M.session;if("phoneNumber"in M)return ne("enroll"===U.type,y,"internal-error"),(yield function aa(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:start",Ot(y,f))}(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ne("signin"===U.type,y,"internal-error");const K=(null===(v=M.multiFactorHint)||void 0===v?void 0:v.uid)||M.multiFactorUid;return ne(K,y,"missing-multi-factor-info"),(yield function xo(y,f){return Qe(y,"POST","/v2/accounts/mfaSignIn:start",Ot(y,f))}(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:K,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function Wg(y,f){return cc.apply(this,arguments)}(y,{phoneNumber:M.phoneNumber,recaptchaToken:S});return U}}finally{p._reset()}}),Wr.apply(this,arguments)}function oi(){return(oi=(0,d.Z)(function*(y,f){yield rr((0,O.m9)(y),f)})).apply(this,arguments)}let ot=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=fn(p)}verifyPhoneNumber(p,v){return cl(this.auth,p,(0,O.m9)(v))}static credential(p,v){return Ei._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:S}=p;return v&&S?Ei._fromTokenResponse(v,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function kr(y,f){return f?In(f):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Rn extends ds{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return $i(f,this._buildIdpRequest())}_linkToIdToken(f,p){return $i(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return $i(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function sh(y){return $a(y.auth,new Rn(y),y.bypassAuthState)}function iu(y){const{auth:f,user:p}=y;return ne(p,f,"internal-error"),zs(p,new Rn(y),y.bypassAuthState)}function ai(y){return dl.apply(this,arguments)}function dl(){return(dl=(0,d.Z)(function*(y){const{auth:f,user:p}=y;return ne(p,f,"internal-error"),rr(p,new Rn(y),y.bypassAuthState)})).apply(this,arguments)}class Ac{constructor(f,p,v,S,M=!1){this.auth=f,this.resolver=v,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,d.Z)(function*(v,S){f.pendingPromise={resolve:v,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(v,S){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,d.Z)(function*(){const{urlResponse:v,sessionId:S,postBody:M,tenantId:U,error:K,type:Ae}=f;if(K)return void p.reject(K);const $e={auth:p.auth,requestUri:v,sessionId:S,tenantId:U||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ae)($e))}catch(Je){p.reject(Je)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return sh;case"linkViaPopup":case"linkViaRedirect":return ai;case"reauthViaPopup":case"reauthViaRedirect":return iu;default:ve(this.auth,"internal-error")}}resolve(f){et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ci=new Te(2e3,1e4);function su(){return(su=(0,d.Z)(function*(y,f,p){const v=fn(y);Oe(y,f,ps);const S=kr(v,p);return new hl(v,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);Oe(v.auth,f,ps);const S=kr(v.auth,p);return new hl(v.auth,"reauthViaPopup",f,S,v).executeNotNull()})).apply(this,arguments)}function xc(){return(xc=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);Oe(v.auth,f,ps);const S=kr(v.auth,p);return new hl(v.auth,"linkViaPopup",f,S,v).executeNotNull()})).apply(this,arguments)}let hl=(()=>{class y extends Ac{constructor(p,v,S,M,U){super(p,v,M,U),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,d.Z)(function*(){const v=yield p.execute();return ne(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,d.Z)(function*(){et(1===p.filter.length,"Popup operations only handle one event");const v=la();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(we(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,S;this.pollId=null!==(S=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Ci.get())};p()}}return y.currentPopupAction=null,y})();const Ks="pendingRedirect",Ys=new Map;class mr extends Ac{constructor(f,p,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,d.Z)(function*(){let v=Ys.get(p.auth._key());if(!v){try{const M=(yield function Mc(y,f){return Rc.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;v=()=>Promise.resolve(M)}catch(S){v=()=>Promise.reject(S)}Ys.set(p.auth._key(),v)}return p.bypassAuthState||Ys.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,v=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(v,f);if("unknown"!==f.type){if(f.eventId){const S=yield v.auth._redirectUserForId(f.eventId);if(S)return v.user=S,p().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Rc(){return(Rc=(0,d.Z)(function*(y,f){const p=fa(f),v=pl(y);if(!(yield v._isAvailable()))return!1;const S="true"===(yield v._get(p));return yield v._remove(p),S})).apply(this,arguments)}function Po(y,f){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(y,f){return pl(y)._set(fa(f),"true")})).apply(this,arguments)}function oh(y,f){Ys.set(y._key(),f)}function pl(y){return In(y._redirectPersistence)}function fa(y){return B(Ks,y.config.apiKey,y.name)}function ah(y,f,p){return function Xf(y,f,p){return au.apply(this,arguments)}(y,f,p)}function au(){return(au=(0,d.Z)(function*(y,f,p){const v=fn(y);Oe(y,f,ps),yield v._initializationPromise;const S=kr(v,p);return yield Po(S,v),S._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function uu(y,f,p){return function Gi(y,f,p){return lu.apply(this,arguments)}(y,f,p)}function lu(){return(lu=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);Oe(v.auth,f,ps),yield v.auth._initializationPromise;const S=kr(v.auth,p);yield Po(S,v.auth);const M=yield Gn(v);return S._openRedirect(v.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function Cr(y,f,p){return function Pc(y,f,p){return Nc.apply(this,arguments)}(y,f,p)}function Nc(){return(Nc=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);Oe(v.auth,f,ps),yield v.auth._initializationPromise;const S=kr(v.auth,p);yield ms(!1,v,f.providerId),yield Po(S,v.auth);const M=yield Gn(v);return S._openRedirect(v.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(y,f){return yield fn(y)._initializationPromise,Oo(y,f,!1)})).apply(this,arguments)}function Oo(y,f){return ui.apply(this,arguments)}function ui(){return(ui=(0,d.Z)(function*(y,f,p=!1){const v=fn(y),S=kr(v,f),U=yield new mr(v,S,p).execute();return U&&!p&&(delete U.user._redirectEventId,yield v._persistUserIfCurrent(U.user),yield v._setRedirectUser(null,f)),U})).apply(this,arguments)}function Gn(y){return ko.apply(this,arguments)}function ko(){return(ko=(0,d.Z)(function*(y){const f=la(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class pa{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(p=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function yr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Is(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var v;if(f.error&&!Is(f)){const S=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(we(this.auth,S))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const v=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zi(f))}saveEventToCache(f){this.cachedEventUids.add(zi(f)),this.lastProcessedEventTime=Date.now()}}function zi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Is({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function Fo(y){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,d.Z)(function*(y,f={}){return Qe(y,"GET","/v1/projects",f)})).apply(this,arguments)}const gl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ml=/^https?/;function Ds(){return(Ds=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Fo(y);for(const p of f)try{if(kc(p))return}catch{}ve(y,"unauthorized-domain")})).apply(this,arguments)}function kc(y){const f=Zt(),{protocol:p,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&U.hostname===v}if(!ml.test(p))return!1;if(gl.test(y))return v===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(v)}const ga=new Te(3e4,6e4);function Dt(){const y=gn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let _l=null;const uh=new Te(5e3,15e3),lh="__/auth/iframe",Wi="emulator/auth/iframe",ch={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hh(y){const f=y.config;ne(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?Ge(f,Wi):`https://${y.config.authDomain}/${lh}`,v={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},S=dh.get(y.config.apiHost);S&&(v.eid=S);const M=y._getFrameworks();return M.length&&(v.fw=M.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function D(){return D=(0,d.Z)(function*(y){const f=yield function bi(y){return _l=_l||function qi(y){return new Promise((f,p)=>{var v,S,M;function U(){Dt(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Dt(),p(we(y,"network-request-failed"))},timeout:ga.get()})}if(null!==(S=null===(v=gn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(M=gn().gapi)||void 0===M||!M.load){const K=Zn("iframefcb");return gn()[K]=()=>{gapi.load?U():p(we(y,"network-request-failed"))},hr(`https://apis.google.com/js/api.js?onload=${K}`).catch(Ae=>p(Ae))}U()}}).catch(f=>{throw _l=null,f})}(y),_l}(y),p=gn().gapi;return ne(p,y,"internal-error"),f.open({where:document.body,url:hh(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ch,dontclear:!0},v=>new Promise(function(){var S=(0,d.Z)(function*(M,U){yield v.restyle({setHideOnLeave:!1});const K=we(y,"network-request-failed"),Ae=gn().setTimeout(()=>{U(K)},uh.get());function $e(){gn().clearTimeout(Ae),M(v)}v.ping($e).then($e,()=>{U(K)})});return function(M,U){return S.apply(this,arguments)}}()))}),D.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N=500,H=600,Z="_blank",te="http://localhost";class ze{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Mt="__/auth/handler",Rt="emulator/auth/handler",Fr=encodeURIComponent("fac");function mn(y,f,p,v,S,M){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(y,f,p,v,S,M){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:se.SDK_VERSION,eventId:S};if(f instanceof ps){f.setDefaultLanguage(y.languageCode),U.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(U.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Je,nt]of Object.entries(M||{}))U[Je]=nt}if(f instanceof rs){const Je=f.getScopes().filter(nt=>""!==nt);Je.length>0&&(U.scopes=Je.join(","))}y.tenantId&&(U.tid=y.tenantId);const K=U;for(const Je of Object.keys(K))void 0===K[Je]&&delete K[Je];const Ae=yield y._getAppCheckToken(),$e=Ae?`#${Fr}=${encodeURIComponent(Ae)}`:"";return`${function Xs({config:y}){return y.emulator?Ge(y,Rt):`https://${y.authDomain}/${Mt}`}(y)}?${(0,O.xO)(K).slice(1)}${$e}`})).apply(this,arguments)}const Lo="webStorageSupport",Zi=class _r{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ws,this._completeRedirectFn=Oo,this._overrideRedirectResult=oh}_openPopup(f,p,v,S){var M=this;return(0,d.Z)(function*(){var U;et(null===(U=M.eventManagers[f._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const K=yield mn(f,p,v,Zt(),S);return function Be(y,f,p,v=N,S=H){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),U=Math.max((window.screen.availWidth-v)/2,0).toString();let K="";const Ae=Object.assign(Object.assign({},A),{width:v.toString(),height:S.toString(),top:M,left:U}),$e=(0,O.z$)().toLowerCase();p&&(K=ke($e)?Z:p),ye($e)&&(f=f||te,Ae.scrollbars="yes");const Je=Object.entries(Ae).reduce((Sn,[no,Kc])=>`${Sn}${no}=${Kc},`,"");if(function Pr(y=(0,O.z$)()){var f;return dn(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}($e)&&"_self"!==K)return function at(y,f){const p=document.createElement("a");p.href=y,p.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(f||"",K),new ze(null);const nt=window.open(f||"",K,Je);ne(nt,y,"popup-blocked");try{nt.focus()}catch{}return new ze(nt)}(f,K,la())})()}_openRedirect(f,p,v,S){var M=this;return(0,d.Z)(function*(){return yield M._originValidation(f),function rh(y){gn().location.href=y}(yield mn(f,p,v,Zt(),S)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:S,promise:M}=this.eventManagers[p];return S?Promise.resolve(S):(et(M,"If manager is not set, promise should be"),M)}const v=this.initAndGetManager(f);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(f){var p=this;return(0,d.Z)(function*(){const v=yield function E(y){return D.apply(this,arguments)}(f),S=new pa(f);return v.register("authEvent",M=>(ne(M?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:S},p.iframes[f._key()]=v,S})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Lo,{type:Lo},S=>{var M;const U=null===(M=S?.[0])||void 0===M?void 0:M[Lo];void 0!==U&&p(!!U),ve(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function yl(y){return Ds.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return ts()||X()||dn()}};class Js{constructor(f){this.factorId=f}_process(f,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,v);case"signin":return this._finalizeSignIn(f,p.credential);default:return Tt("unexpected MultiFactorSessionType")}}}class Fc extends Js{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Fc(f)}_finalizeEnroll(f,p,v){return function vc(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(y,f))}(f,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function Wf(y,f){return Qe(y,"POST","/v2/accounts/mfaSignIn:finalize",Ot(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Lc=(()=>{class y{constructor(){}static assertion(p){return Fc._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var tp="@firebase/auth";class vl{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,d.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(v=>{f(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);p&&(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function du(){return window}(0,O.Pz)("authIdTokenMaxAge"),function nm(y){(0,se._registerComponent)(new ge.wA("auth",(f,{options:p})=>{const v=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),M=f.getProvider("app-check-internal"),{apiKey:U,authDomain:K}=v.options;ne(U&&!U.includes(":"),"invalid-api-key",{appName:v.name}),ne(!K?.includes(":"),"argument-error",{appName:v.name});const Ae={apiKey:U,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ue(y)},$e=new vi(v,S,M,Ae);return function kn(y,f){const p=f?.persistence||[],v=(Array.isArray(p)?p:[p]).map(In);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,f?.popupRedirectResolver)}($e,p),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,v)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ge.wA("auth-internal",f=>{const p=fn(f.getProvider("auth").getImmediate());return new vl(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(tp,"0.23.1",function np(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(tp,"0.23.1","esm2017")}("Browser");const y_=2e3;function Uc(){return Uc=(0,d.Z)(function*(y,f,p){var v;const{BuildInfo:S}=du();et(f.sessionId,"AuthEvent did not contain a session ID");const M=yield function ya(y){return Bc.apply(this,arguments)}(f.sessionId),U={};return dn()?U.ibi=S.packageName:en()?U.apn=S.packageName:ve(y,"operation-not-supported-in-this-environment"),S.displayName&&(U.appDisplayName=S.displayName),U.sessionId=M,mn(y,p,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,U)}),Uc.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(y){const{BuildInfo:f}=du(),p={};dn()?p.iosBundleId=f.packageName:en()?p.androidPackageName=f.packageName:ve(y,"operation-not-supported-in-this-environment"),yield Fo(y,p)})).apply(this,arguments)}function wl(){return(wl=(0,d.Z)(function*(y,f,p){const{cordova:v}=du();let S=()=>{};try{yield new Promise((M,U)=>{let K=null;function Ae(){var nt;M();const Sn=null===(nt=v.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof Sn&&Sn(),"function"==typeof p?.close&&p.close()}function $e(){K||(K=window.setTimeout(()=>{U(we(y,"redirect-cancelled-by-user"))},y_))}function Je(){"visible"===document?.visibilityState&&$e()}f.addPassiveListener(Ae),document.addEventListener("resume",$e,!1),en()&&document.addEventListener("visibilitychange",Je,!1),S=()=>{f.removePassiveListener(Ae),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",Je,!1),K&&window.clearTimeout(K)}})}finally{S()}})).apply(this,arguments)}function Bc(){return(Bc=(0,d.Z)(function*(y){const f=function sm(y){if(et(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const $c=20;class gh extends pa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function mh(y){return jc.apply(this,arguments)}function jc(){return(jc=(0,d.Z)(function*(y){const f=yield yh()._get(pu(y));return f&&(yield yh()._remove(pu(y))),f})).apply(this,arguments)}function ip(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<$c;p++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function yh(){return In(bo)}function pu(y){return B("authEvent",y.config.apiKey,y.name)}function Cs(y){if(!y?.includes("?"))return{};const[f,...p]=y.split("?");return(0,O.zd)(p.join("?"))}const Gc=class Hc{constructor(){this._redirectPersistence=ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Oo,this._overrideRedirectResult=oh}_initialize(f){var p=this;return(0,d.Z)(function*(){const v=f._key();let S=p.eventManagers.get(v);return S||(S=new gh(f),p.eventManagers.set(v,S),p.attachCallbackListeners(f,S)),S})()}_openPopup(f){ve(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,v,S){var M=this;return(0,d.Z)(function*(){!function v_(y){var f,p,v,S,M,U,K,Ae,$e,Je;const nt=du();ne("function"==typeof(null===(f=nt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(p=nt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(M=null===(S=null===(v=nt?.cordova)||void 0===v?void 0:v.plugins)||void 0===S?void 0:S.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ae=null===(K=null===(U=nt?.cordova)||void 0===U?void 0:U.plugins)||void 0===K?void 0:K.browsertab)||void 0===Ae?void 0:Ae.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Je=null===($e=nt?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===Je?void 0:Je.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const U=yield M._initialize(f);yield U.initialized(),U.resetRedirect(),function fl(){Ys.clear()}(),yield M._originValidation(f);const K=function Bo(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:ip(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(f,v,S);yield function om(y,f){return yh()._set(pu(y),f)}(f,K);const Ae=yield function im(y,f,p){return Uc.apply(this,arguments)}(f,K,p),$e=yield function __(y){const{cordova:f}=du();return new Promise(p=>{f.plugins.browsertab.isAvailable(v=>{let S=null;v?f.plugins.browsertab.openUrl(y):S=f.InAppBrowser.open(y,function Kt(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Ae);return function hu(y,f,p){return wl.apply(this,arguments)}(f,U,$e)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ph(y){return ma.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:v,handleOpenURL:S,BuildInfo:M}=du(),U=setTimeout((0,d.Z)(function*(){yield mh(f),p.onEvent(op())}),500),K=function(){var Je=(0,d.Z)(function*(nt){clearTimeout(U);const Sn=yield mh(f);let no=null;Sn&&nt?.url&&(no=function fu(y,f){var p,v;const S=function vh(y){const f=Cs(y),p=f.link?decodeURIComponent(f.link):void 0,v=Cs(p).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Cs(S).link||S||v||p||y}(f);if(S.includes("/__/auth/callback")){const M=Cs(S),U=M.firebaseError?function _h(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,K=null===(v=null===(p=U?.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Ae=K?we(K):null;return Ae?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ae,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Sn,nt.url)),p.onEvent(no||op())});return function(Sn){return Je.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,K);const Ae=S,$e=`${M.packageName.toLowerCase()}://`;du().handleOpenURL=function(){var Je=(0,d.Z)(function*(nt){if(nt.toLowerCase().startsWith($e)&&K({url:nt}),"function"==typeof Ae)try{Ae(nt)}catch(Sn){console.error(Sn)}});return function(nt){return Je.apply(this,arguments)}}()}};function op(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}const up=1e3;function os(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function _a(y=(0,O.z$)()){return!("file:"!==os()&&"ionic:"!==os()&&"capacitor:"!==os()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function I_(){try{const y=self.localStorage,f=la();if(y)return y.setItem(f,"1"),y.removeItem(f),!function E_(y=(0,O.z$)()){return function El(){return(0,O.w1)()&&11===document?.documentMode}()||function w_(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return lp()&&(0,O.hl)()}return!1}function lp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zc(){return(function qc(){return"http:"===os()||"https:"===os()}()||(0,O.ru)()||_a())&&!function Wc(){return(0,O.b$)()||(0,O.UG)()}()&&I_()&&!lp()}function am(){return _a()&&typeof document<"u"}function Il(){return(Il=(0,d.Z)(function*(){return!!am()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},up);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},gu=ne,dp="persistence";function hp(y){return fp.apply(this,arguments)}function fp(){return(fp=(0,d.Z)(function*(y){yield y._initializationPromise;const f=pp(),p=B(dp,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function pp(){var y;try{return(null===(y=function cp(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const gp=ne;class Lr{constructor(){this.browserResolver=In(Zi),this.cordovaResolver=In(Gc),this.underlyingResolver=null,this._redirectPersistence=ws,this._completeRedirectFn=Oo,this._overrideRedirectResult=oh}_initialize(f){var p=this;return(0,d.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,v,S){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,p,v,S)})()}_openRedirect(f,p,v,S){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,p,v,S)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return am()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const p=yield function um(){return Il.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function Si(y){return y.unwrap()}function C_(y){return T_(y)}function T_(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ot.credentialFromResult(y);const p=f.providerId;if(!p||p===ce.PASSWORD)return null;let v;switch(p){case ce.GOOGLE:v=Ua;break;case ce.FACEBOOK:v=dc;break;case ce.GITHUB:v=$d;break;case ce.TWITTER:v=Uu;break;default:const{oauthIdToken:S,oauthAccessToken:M,oauthTokenSecret:U,pendingToken:K,nonce:Ae}=f;return M||U||S||K?K?p.startsWith("saml.")?Hs._create(p,K):fs._fromParams({providerId:p,signInMethod:p,pendingToken:K,idToken:S,accessToken:M}):new go(p).credential({idToken:S,accessToken:M,rawNonce:Ae}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ar(y,f){return f.catch(p=>{throw p instanceof O.ZR&&function b_(y,f){var p;const v=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Eh(y,function Ju(y,f){var p;const v=(0,O.m9)(y),S=f;return ne(f.customData.operationType,v,"argument-error"),ne(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),wo._fromError(v,S)}(y,f));else if(v){const S=T_(f),M=f;S&&(M.credential=S,M.tenantId=v.tenantId||void 0,M.email=v.email||void 0,M.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:C_(p),additionalUserInfo:yc(p),user:to.getOrCreate(S)}})}function mp(y,f){return wh.apply(this,arguments)}function wh(){return(wh=(0,d.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:v=>ar(y,p.confirm(v))}})).apply(this,arguments)}class Eh{constructor(f,p){this.resolver=p,this.auth=function Dl(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ar(Si(this.auth),this.resolver.resolveSignIn(f))}}class to{constructor(f){this._delegate=f,this.multiFactor=function eh(y){const f=(0,O.m9)(y);return qs.has(f)||qs.set(f,Do._fromUser(f)),qs.get(f)}(f)}static getOrCreate(f){return to.USER_MAP.has(f)||to.USER_MAP.set(f,new to(f)),to.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,d.Z)(function*(){return ar(p.auth,zd(p._delegate,f))})()}linkWithPhoneNumber(f,p){var v=this;return(0,d.Z)(function*(){return mp(v.auth,function ul(y,f,p){return ll.apply(this,arguments)}(v._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,d.Z)(function*(){return ar(p.auth,function wt(y,f,p){return xc.apply(this,arguments)}(p._delegate,f,Lr))})()}linkWithRedirect(f){var p=this;return(0,d.Z)(function*(){return yield hp(fn(p.auth)),Cr(p._delegate,f,Lr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,d.Z)(function*(){return ar(p.auth,qd(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return mp(this.auth,function Qf(y,f,p){return Sc.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return ar(this.auth,function ou(y,f,p){return Zs.apply(this,arguments)}(this._delegate,f,Lr))}reauthenticateWithRedirect(f){var p=this;return(0,d.Z)(function*(){return yield hp(fn(p.auth)),uu(p._delegate,f,Lr)})()}sendEmailVerification(f){return function Zu(y,f){return Wa.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,d.Z)(function*(){return yield function Hd(y,f){return Or.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Dr(y,f){return Tn((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function _s(y,f){return Tn((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function nn(y,f){return oi.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Bf(y,f){return Yu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function gc(y,f,p){return Za.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}to.USER_MAP=new WeakMap;const mu=ne;let yp=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;mu(S,"invalid-api-key",{appName:p.name}),mu(S,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?Lr:void 0;this._delegate=v.initialize({options:{persistence:bs(S,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?to.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function ka(y,f,p){const v=fn(y);ne(v._canInitEmulator,v,"emulator-config-failed"),ne(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const S=!!p?.disableWarnings,M=Bi(f),{host:U,port:K}=function jt(y){const f=Bi(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(v);if(S){const M=S[1];return{host:M,port:Fa(v.substr(M.length+1))}}{const[M,U]=v.split(":");return{host:M,port:Fa(U)}}}(f);v.config.emulator={url:`${M}//${U}${null===K?"":`:${K}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:U,port:K,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ho(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function Qg(y,f){return ys.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return za(this._delegate,p)}confirmPasswordReset(p,v){return function Zd(y,f,p){return Gu.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var S=this;return(0,d.Z)(function*(){return ar(S._delegate,function yo(y,f,p){return Di.apply(this,arguments)}(S._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Yd(y,f){return Wu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Xg(y,f){return"EMAIL_SIGNIN"===ta.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,d.Z)(function*(){mu(Zc(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Fn(y,f){return Qs.apply(this,arguments)}(p._delegate,Lr);return v?ar(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function ap(y,f){fn(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,v,S){const{next:M,error:U,complete:K}=Cl(p,v,S);return this._delegate.onAuthStateChanged(M,U,K)}onIdTokenChanged(p,v,S){const{next:M,error:U,complete:K}=Cl(p,v,S);return this._delegate.onIdTokenChanged(M,U,K)}sendSignInLinkToEmail(p,v){return function qa(y,f,p){return zu.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Hu(y,f,p){return qr.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,d.Z)(function*(){let S;switch(function lm(y,f){gu(Object.values(Ti).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?gu(f!==Ti.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?gu(f===Ti.NONE,y,"unsupported-persistence-type"):lp()?gu(f===Ti.NONE||f===Ti.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):gu(f===Ti.NONE||I_(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Ti.SESSION:S=ws;break;case Ti.LOCAL:S=(yield In(Ao)._isAvailable())?Ao:bo;break;case Ti.NONE:S=Gr;break;default:return ve("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ar(this._delegate,function pr(y){return na.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ar(this._delegate,ja(this._delegate,p))}signInWithCustomToken(p){return ar(this._delegate,function le(y,f){return Vt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return ar(this._delegate,function Kd(y,f,p){return ja((0,O.m9)(y),Vf.credential(f,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return ar(this._delegate,function Qn(y,f,p){return ia.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return mp(this._delegate,function Yf(y,f,p){return Ro.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,d.Z)(function*(){return mu(Zc(),v._delegate,"operation-not-supported-in-this-environment"),ar(v._delegate,function ha(y,f,p){return su.apply(this,arguments)}(v._delegate,p,Lr))})()}signInWithRedirect(p){var v=this;return(0,d.Z)(function*(){return mu(Zc(),v._delegate,"operation-not-supported-in-this-environment"),yield hp(v._delegate),ah(v._delegate,p,Lr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Ii(y,f){return is.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ti,y})();function Cl(y,f,p){let v=y;"function"!=typeof y&&({next:v,error:f,complete:p}=y);const S=v;return{next:U=>S(U&&to.getOrCreate(U)),error:f,complete:p}}function bs(y,f){const p=function D_(y,f){const p=pp();if(!p)return[];const v=B(dp,y,f);switch(p.getItem(v)){case Ti.NONE:return[Gr];case Ti.LOCAL:return[Ao,ws];case Ti.SESSION:return[ws];default:return[]}}(y,f);if(typeof self<"u"&&!p.includes(Ao)&&p.push(Ao),typeof window<"u")for(const v of[bo,ws])p.includes(v)||p.push(v);return p.includes(Gr)||p.push(Gr),p}class yu{constructor(){this.providerId="phone",this._delegate=new ot(Si(Q.Z.auth()))}static credential(f,p){return ot.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}yu.PHONE_SIGN_IN_METHOD=ot.PHONE_SIGN_IN_METHOD,yu.PROVIDER_ID=ot.PROVIDER_ID;const bl=ne;class cm{constructor(f,p,v=Q.Z.app()){var S;bl(null===(S=v.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Tc(f,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hm(y){y.INTERNAL.registerComponent(new ge.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new yp(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:W_EMAIL_SIGNIN,PASSWORD_RESET:W_PASSWORD_RESET,RECOVER_EMAIL:W_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:W_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:W_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:W_VERIFY_EMAIL}},EmailAuthProvider:Vf,FacebookAuthProvider:dc,GithubAuthProvider:$d,GoogleAuthProvider:Ua,OAuthProvider:go,SAMLAuthProvider:Vu,PhoneAuthProvider:yu,PhoneMultiFactorGenerator:Lc,RecaptchaVerifier:cm,TwitterAuthProvider:Uu,Auth:yp,AuthCredential:ds,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.1")}(Q.Z)},5861:(It,be,k)=>{function d(O,se,re,ie,ge,_e,ce){try{var j=O[_e](ce),$=j.value}catch(W){return void re(W)}j.done?se($):Promise.resolve($).then(ie,ge)}function Q(O){return function(){var se=this,re=arguments;return new Promise(function(ie,ge){var _e=O.apply(se,re);function ce($){d(_e,ie,ge,ce,j,"next",$)}function j($){d(_e,ie,ge,ce,j,"throw",$)}ce(void 0)})}}k.d(be,{Z:()=>Q})}},It=>{It(It.s=4731)}]);